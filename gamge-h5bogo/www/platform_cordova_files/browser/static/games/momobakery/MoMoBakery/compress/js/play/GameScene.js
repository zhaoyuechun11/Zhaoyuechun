gc.GameScene=function(){PIXI.Container.call(this),this.lastEventTime=void 0,this.cookieMatrixPos=[[75,550],[170,550],[265,550],[360,550],[455,550],[550,550],[645,550],[75,645],[170,645],[265,645],[360,645],[455,645],[550,645],[645,645],[75,740],[170,740],[265,740],[360,740],[455,740],[550,740],[645,740],[75,835],[170,835],[265,835],[360,835],[455,835],[550,835],[645,835],[75,935],[170,935],[265,935],[360,935],[455,935],[550,935],[645,935],[75,1030],[170,1030],[265,1030],[360,1030],[455,1030],[550,1030],[645,1030],[75,1125],[170,1125],[265,1125],[360,1125],[455,1125],[550,1125],[645,1125]],this.cookieNumMatrix=[],this.cookieMatrix=[],this.itemEffectMc=[],this.bombAnerge=0,this.bombfull=50,this.fixArr1=[],this.fixArr2=[],this.readytxt=!0,this.starttxt=!1,this.playGame=!1,this.addPoint=0,this.itemIndex=void 0,this.itemIndex1=void 0,this.itemIndex2=void 0,this.itemIndexes=[],this.canClick=!1,this.hint=[],this.giveHint=!1,this.bundle=[],this.prestageMode="normal",this.stageMode="normal",this.chance=60,this.useItem=!1,this.remembers=[],this.combo=0,this.restComboTime=0,this.lastTime=void 0,this.totalCombo=0,this.champagneCombo=0,this.bombCombo=0,this.getMedal1=!1,this.getMedal2=!1,this.getMedal3=!1,this.getMedal4=!1,this.callfevercnt=0,this.lastEnd=!1,this.bumpscale=.01,this.pauseMode=!1,this.pauseTime=0,this.exceptSound=!1},gc.GameScene.constructor=gc.GameScene,gc.GameScene.prototype=Object.create(PIXI.Container.prototype),gc.GameScene.prototype.init=function(){this.readytxt=!0,this.starttxt=!1,this.declareObjects(),this.setBG(),this.readyGame(),this.fever=setInterval(this.setFever.bind(this),33.333),this.test=!0,this.explode(),this.stageMode="fever",this.actFever(),this.stageMode="normal",this.normalMode()},gc.GameScene.prototype.declareObjects=function(){this.bomb=new PIXI.Sprite.fromFrame("bomb_0001.png"),this.bombgauge=new PIXI.Sprite.fromFrame("bomb_gauge_bar_0001.png"),this.chanceImg=new gc.NumberText("score_num_","center",-4),this.readyBG=new PIXI.Sprite(GD.loader.resources.ready_bg.texture),this.readyImg=new PIXI.Sprite.fromFrame("ready_0001.png"),this.startImg=new PIXI.Sprite.fromFrame("start_0001.png"),this.gameoverImg=new PIXI.Sprite.fromFrame("gameover.png");for(var a=0;a<this.cookieMatrixPos.length;a++)this.cookieMatrix[a]=new PIXI.Sprite.fromFrame("cookie_0001.png"),this.itemEffectMc[a]=new gc.MovieClip("item_effect_00",1,14,.2);this.gameBG=new PIXI.Sprite(GD.loader.resources.game_bg.texture),this.gameTable=new PIXI.Sprite(GD.loader.resources.game_table.texture),this.shadow=new PIXI.Sprite(GD.loader.resources.shadow_bg.texture),this.fevereffect1=new gc.MovieClip("fever_effect_1_00",1,23,.3,!0),this.fevereffect2=new gc.MovieClip("fever_effect_2_00",1,29,.3,!0),this.normalmomo=new gc.MovieClip("momo_normal_00",1,50,.3),this.fevermomo=new gc.MovieClip("momo_fever_00",1,43,.3),this.normalshushu=new gc.MovieClip("shushu_normal_00",1,12,.3),this.fevershushu=new gc.MovieClip("shushu_fever_00",1,17,.3),this.timeup=new PIXI.Sprite.fromFrame("momotime_0001.png"),this.scoreTxt=new gc.NumberText("score_num_","center",-4),this.crossEffect1=new PIXI.Sprite.fromFrame("line_clear_effect.png"),this.crossEffect2=new PIXI.Sprite.fromFrame("line_clear_effect.png"),this.superfeverText=new PIXI.Sprite.fromFrame("super_fever_0001.png"),this.feverText=new PIXI.Sprite.fromFrame("fever_0001.png")},gc.GameScene.prototype.readyGame=function(){this.readytxt&&(GD.soundPlay("sound_ready"),this.readyBG.anchor.set(.5),this.readyBG.position.x=GD.width/2,this.readyBG.position.y=GD.height/2,this.addChild(this.readyBG),this.readyImg.anchor.set(.5),this.readyImg.position=this.readyBG.position,this.readyImg.scale.x=0,this.readyImg.scale.y=0,TweenMax.to(this.readyImg.scale,.8,{x:1,y:1}),this.addChild(this.readyImg),this.readytxt=!1,this.starttxt=!0,setTimeout(this.startGame.bind(this),1e3))},gc.GameScene.prototype.startGame=function(){this.starttxt&&(GD.soundPlay("sound_start"),this.readyImg.visible=!1,this.startImg.anchor.set(.5),this.startImg.position=this.readyImg.position,this.startImg.scale.x=0,this.startImg.scale.y=0,TweenMax.to(this.startImg.scale,.5,{x:1.2,y:1.2}),this.addChild(this.startImg),setTimeout(this.playStart.bind(this),600))},gc.GameScene.prototype.setItemEffect=function(){for(var a=0;a<this.cookieMatrix.length;a++)this.cookieMatrix[a].removeChild(this.itemEffectMc[a]);for(var a=0;a<this.cookieMatrixPos.length;a++)this.itemEffectMc[a].anchor.set(.5),this.itemEffectMc[a].stop(),this.itemEffectMc[a].alpha=0,this.cookieMatrix[a].addChild(this.itemEffectMc[a])},gc.GameScene.prototype.playStart=function(){this.removeChild(this.readyImg),this.removeChild(this.startImg),this.readyBG.visible=!1,this.setCookies()},gc.GameScene.prototype.setBG=function(){this.gameTable.position.y=470,this.addChild(this.gameBG),this.setFeverEffect2(),this.setMomo(),this.setShushu(),this.gameBG.addChild(this.gameTable),this.setBomb(),this.setChance(),this.makeShadow(),this.setScore(),this.setFeverEffect1()},gc.GameScene.prototype.makeShadow=function(){this.shadowContainer.addChild(this.shadow),this.shadow.alpha=0},gc.GameScene.prototype.setFeverEffect1=function(){this.fevereffect1.anchor.set(.5),this.fevereffect1.position.x=gc.width/2,this.fevereffect1.position.y=600,this.addChild(this.fevereffect1),this.fevereffect1.alpha=0},gc.GameScene.prototype.setFeverEffect2=function(){this.fevereffect2.anchor.set(.5),this.fevereffect2.position.x=gc.width/2,this.fevereffect2.position.y=288.5,this.gameBG.addChild(this.fevereffect2),this.fevereffect2.alpha=0},gc.GameScene.prototype.setMomo=function(){this.normalmomo.position.x=gc.width/2,this.normalmomo.position.y=220,this.gameBG.addChild(this.normalmomo),this.fevermomo.position.x=this.normalmomo.x,this.fevermomo.position.y=this.normalmomo.y,this.fevermomo.alpha=0,this.fevermomo.stop(),this.gameBG.addChild(this.fevermomo)},gc.GameScene.prototype.setShushu=function(){this.normalshushu.position.x=gc.width/4,this.normalshushu.position.y=300,this.gameBG.addChild(this.normalshushu),this.fevershushu.position.x=this.normalshushu.x,this.fevershushu.position.y=this.normalshushu.y,this.fevershushu.alpha=0,this.fevershushu.stop(),this.gameBG.addChild(this.fevershushu)},gc.GameScene.prototype.normalMode=function(){console.log("normal"),this.fevermomo.alpha=0,this.fevermomo.stop(),this.normalmomo.alpha=1,this.normalmomo.play(),this.fevershushu.alpha=0,this.fevershushu.stop(),this.normalshushu.alpha=1,this.normalshushu.play()},gc.GameScene.prototype.otherMode=function(){console.log("other"),this.normalmomo.alpha=0,this.normalmomo.stop(),this.fevermomo.alpha=1,this.fevermomo.play(),this.normalshushu.alpha=0,this.normalshushu.stop(),this.fevershushu.alpha=1,this.fevershushu.play()},gc.GameScene.prototype.setChance=function(){void 0==this.explodeContainer&&(this.explodeContainer=new PIXI.Container,this.explodeContainer.position=this.gameBG.position,this.explodeContainer.width=this.gameBG.width,this.explodeContainer.height=this.gameBG.height,this.addChild(this.explodeContainer)),this.shadowContainer=new PIXI.Container,this.addChild(this.shadowContainer),void 0==this.explodeContainer2&&(this.explodeContainer2=new PIXI.Container,this.explodeContainer2.position=this.gameBG.position,this.explodeContainer2.width=this.gameBG.width,this.explodeContainer2.height=this.gameBG.height,this.addChild(this.explodeContainer2)),this.chanceImg.x=55,this.chanceImg.y=45,this.chanceImg.scale.x=.8,this.chanceImg.scale.y=.8,this.rangeChance()},gc.GameScene.prototype.rangeChance=function(){this.chanceImg.setValue(this.chance)},gc.GameScene.prototype.lastPang=function(){this.lastEnd=!0,this.itemOver=!1,this.scanIndex=void 0,this.useItem=!1;for(var a=0,b=0;b<this.cookieNumMatrix.length;b++){if(this.cookieNumMatrix[b]>6){this.scanIndex=b,this.useItem=!0,10==this.cookieNumMatrix[b]?this.actBomb(b):9==this.cookieNumMatrix[b]?this.actEqual(b):8==this.cookieNumMatrix[b]&&(this.crossIndex=b,this.actCross(b));break}a++}a==this.cookieNumMatrix.length&&(this.itemOver=!0,this.checkMatching3())},gc.GameScene.prototype.setGameOver=function(){this.canClick=!1,this.playGame=!1,this.checkLeftItem(),this.lastEnd?(this.timeup.anchor.set(.5),this.timeup.position.x=this.gameBG.width/2,this.timeup.position.y=GD.height/2+50,this.timeup.scale.x=0,this.timeup.scale.y=0,this.addChild(this.timeup),GD.soundPlay("sound_momotime"),this.canClick=!1,this.removeChild(this.hintMc1),this.removeChild(this.hintMc2),void 0!=this.real1&&(this.real1.alpha=1),void 0!=this.real2&&(this.real2.alpha=1),this.reachmax=!1,this.incdgree=.15,this.stageMode="momotime",this.playGame=!1,this.otherMode(),this.actfeverEffect(),this.momotime=setInterval(this.showMomoTime.bind(this),33.333)):this.lastPang()},gc.GameScene.prototype.checkLeftItem=function(){this.lastEnd=!1;for(var a=0;a<this.cookieNumMatrix.length;a++)this.cookieNumMatrix[a]>7&&(this.lastEnd=!0)},gc.GameScene.prototype.showMomoTime=function(){this.reachmax&&this.timeup.scale.x<=1&&(this.incdgree=0,setTimeout(this.delay.bind(this),1e3),clearInterval(this.momotime)),this.timeup.scale.x>=1.3&&(this.incdgree*=-1,this.reachmax=!0),this.timeup.scale.x+=this.incdgree,this.timeup.scale.y+=this.incdgree},gc.GameScene.prototype.delay=function(){this.dropmomotime=setInterval(this.dropMomoTime.bind(this),33.333)},gc.GameScene.prototype.dropMomoTime=function(){this.timeup.scale.y=1.2,this.timeup.position.y+=70,this.timeup.position.y>=gc.height+this.timeup.height&&(this.removeChild(this.timeup),this.lastPang(),clearInterval(this.dropmomotime))},gc.GameScene.prototype.setScore=function(){this.scoreTxt.x=355,this.scoreTxt.y=45,this.scoreTxt.scale.x=.8,this.scoreTxt.scale.y=.8,this.score=0,this.scoreTxt.setValue(this.score),this.shadowContainer.addChild(this.chanceImg),this.shadowContainer.addChild(this.scoreTxt)},gc.GameScene.prototype.setBomb=function(){this.bomb.anchor.set(.5),this.bomb.x=69,this.bomb.y=211,this.bombgauge.anchor.x=.5,this.bombgauge.anchor.y=1,this.bombgauge.position.x=69,this.bombgauge.position.y=448,this.addChild(this.bombgauge),this.addChild(this.bomb)},gc.GameScene.prototype.setCookies=function(){for(var a=0;a<this.cookieMatrixPos.length;a++)(this.cookieNumMatrix[a]<7||void 0==this.cookieNumMatrix[a])&&(this.cookieNumMatrix[a]=parseInt(6*Math.random()+1));if(this.checkMatching1())this.setCookies();else{for(var a=0;a<this.cookieNumMatrix.length;a++)this.drawCookie(this.cookieNumMatrix[a],a);this.giveHint=!1,this.playGame&&this.findHint()}},gc.GameScene.prototype.drawCookie=function(a,b){switch(a){case 1:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0001.png");break;case 2:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0002.png");break;case 3:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0003.png");break;case 4:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0004.png");break;case 5:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0005.png");break;case 6:this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("cookie_0006.png");break;default:this.cookieMatrix[b].texture=this.cookieMatrix[b].texture}this.cookieMatrix[b].anchor.set(.5),this.cookieMatrix[b].scale.x=.85,this.cookieMatrix[b].scale.y=.85,this.cookieMatrix[b].position.x=this.cookieMatrixPos[b][0],this.cookieMatrix[b].position.y=this.cookieMatrixPos[b][1],this.cookieNumMatrix[b]<7&&TweenMax.from(this.cookieMatrix[b],.1,{y:this.cookieMatrixPos[b][1]-30}),this.cookieMatrix[b].flag=1,9!=this.cookieNumMatrix[b]&&(this.cookieMatrix[b].remember=0),this.cookieMatrix[b].buttonMode=!0,this.cookieMatrix[b].interactive=!0,gc.IS_MOBILE?(this.cookieMatrix[b].touchstart=function(a){a.stopPropagation(),gc.IS_MOBILE&&(this.previousX=a.data.getLocalPosition(this.parent).x,this.previousY=a.data.getLocalPosition(this.parent).y),this.getTouchStartPosition(b)}.bind(this),this.cookieMatrix[b].touchendoutside=function(a){a.stopPropagation(),gc.IS_MOBILE&&(this.currentX=a.data.getLocalPosition(this.parent).x,this.currentY=a.data.getLocalPosition(this.parent).y),this.getTouchEndPosition(b)}.bind(this)):(this.cookieMatrix[b].mousedown=this.cookieMatrix[b].touchstart=function(a){a.stopPropagation(),this.getTouchStartPosition(b)}.bind(this),this.cookieMatrix[b].mouseupoutside=this.cookieMatrix[b].touchendoutside=function(a){a.stopPropagation(),this.getTouchEndPosition(b)}.bind(this)),this.gameBG.addChild(this.cookieMatrix[b]),48==b&&(this.playGame=!0,this.canClick=!0,void 0==this.lastEventTime&&(this.lastEventTime=Date.now()),void 0==this.sethint&&(this.sethint=setInterval(this.setHint.bind(this),33.333)),void 0==this.bum&&(this.bum=setInterval(this.bump.bind(this),33.333)),this.setItemEffect(),this.setFeverText(),this.stopItemAccentEffect(),this.playItemAccentEffect())},gc.GameScene.prototype.setHint=function(){var a=Date.now();this.pauseMode?0==this.pauseTime&&(this.pauseTime=a):(0!=this.pauseTime&&(this.lastEventTime+=Math.abs(a-this.pauseTime),this.pauseTime=0),Math.abs(this.lastEventTime-a)/1e3>=5&&!this.giveHint&&this.playGame&&this.showHint())},gc.GameScene.prototype.findHint=function(){var a=void 0,b=void 0,c=void 0,d=void 0;this.hint=[];for(var e=0;e<6;e++)for(var f=0;f<7;f++)b=e+7*f,a=this.cookieNumMatrix[b],this.cookieNumMatrix[b]=this.cookieNumMatrix[b+1],this.cookieNumMatrix[b+1]=a,c=this.checkMatching1(),this.cookieNumMatrix[b+1]=this.cookieNumMatrix[b],this.cookieNumMatrix[b]=a,c&&this.hint.push([b,b+1]);for(var e=0;e<7;e++)for(var f=0;f<6;f++)b=e+7*f,a=this.cookieNumMatrix[b],this.cookieNumMatrix[b]=this.cookieNumMatrix[b+7],this.cookieNumMatrix[b+7]=a,d=this.checkMatching1(),this.cookieNumMatrix[b+7]=this.cookieNumMatrix[b],this.cookieNumMatrix[b]=a,d&&this.hint.push([b,b+7]);if(0==this.hint.length){for(var e=0;e<this.cookieMatrix.length;e++)this.cookieNumMatrix[e]<7&&this.gameBG.removeChild(this.cookieMatrix[e]);this.setCookies()}},gc.GameScene.prototype.showHint=function(){this.giveHint=!0;var a,b,c=parseInt(Math.random()*this.hint.length),d=this.cookieNumMatrix[this.hint[c][0]],e=this.cookieNumMatrix[this.hint[c][1]];this.cookieNumMatrix[this.hint[c][0]]<7&&(a="cookie_"+d+"_00"),this.cookieNumMatrix[this.hint[c][1]]<7&&(b="cookie_"+e+"_00"),this.removeChild(this.hintMc1),this.removeChild(this.hintMc2),void 0!=this.real1&&(this.real1.alpha=1),void 0!=this.real2&&(this.real2.alpha=1),this.cookieNumMatrix[this.hint[c][0]]<7&&(this.hintMc1=new gc.MovieClip(a,1,8,.2),this.hintMc1.anchor.set(.5),this.hintMc1.scale.x=.85,this.hintMc1.scale.y=.85,this.hintMc1.position.x=this.cookieMatrixPos[this.hint[c][0]][0],this.hintMc1.position.y=this.cookieMatrixPos[this.hint[c][0]][1]-12,this.addChild(this.hintMc1),this.real1=this.cookieMatrix[this.hint[c][0]],this.real1.alpha=0),this.cookieNumMatrix[this.hint[c][1]]<7&&(this.hintMc2=new gc.MovieClip(b,1,8,.2),this.hintMc2.anchor.set(.5),this.hintMc2.scale.x=.85,this.hintMc2.scale.y=.85,this.hintMc2.position.x=this.cookieMatrixPos[this.hint[c][1]][0],this.hintMc2.position.y=this.cookieMatrixPos[this.hint[c][1]][1]-12,this.addChild(this.hintMc2),this.real2=this.cookieMatrix[this.hint[c][1]],this.real2.alpha=0)},gc.GameScene.prototype.getTouchStartPosition=function(a){if(!gc.IS_MOBILE){var b=window.event;this.previousX=b.clientX,this.previousY=b.clientY}this.canClick&&this.playGame&&this.scanCookieNum(a)},gc.GameScene.prototype.getTouchEndPosition=function(a){if(!gc.IS_MOBILE){var b=window.event;this.currentX=b.clientX,this.currentY=b.clientY}this.canClick&&this.playGame&&this.swap(a)},gc.GameScene.prototype.scanCookieNum=function(a){this.cookieNumMatrix[a]>6?(this.scanIndex=a,this.chance>0&&(this.chance--,this.rangeChance()),this.useItem=!0,this.lastEventTime=Date.now(),this.giveHint=!1,this.removeChild(this.hintMc1),this.removeChild(this.hintMc2),void 0!=this.real1&&(this.real1.alpha=1),void 0!=this.real2&&(this.real2.alpha=1),10==this.cookieNumMatrix[a]?this.canClick&&this.actBomb(a):9==this.cookieNumMatrix[a]?this.canClick&&this.actEqual(a):8==this.cookieNumMatrix[a]&&(this.crossIndex=a,this.canClick&&this.actCross(a)),this.combo++,this.totalCombo++,this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal",this.lastTime=Date.now(),this.restComboTime=3,this.canClick=!1):this.useItem=!1},gc.GameScene.prototype.swap=function(a){var b=this.currentX-this.previousX,c=this.currentY-this.previousY;return this.removeChild(this.hintMc1),this.removeChild(this.hintMc2),void 0!=this.real1&&(this.real1.alpha=1),void 0!=this.real2&&(this.real2.alpha=1),b<0&&Math.abs(b)>Math.abs(c)&&a%7!=0?(this.lastEventTime=Date.now(),this.canClick=!1,void this.swapLeft(a)):b>0&&Math.abs(b)>Math.abs(c)&&(a%7!=6||0==a)?(this.lastEventTime=Date.now(),this.canClick=!1,void this.swapRight(a)):c<0&&Math.abs(b)<Math.abs(c)&&a>6?(this.lastEventTime=Date.now(),this.canClick=!1,void this.swapUp(a)):void(c>0&&Math.abs(b)<Math.abs(c)&&a<42&&(this.lastEventTime=Date.now(),this.canClick=!1,this.swapDown(a)))},gc.GameScene.prototype.swapLeft=function(a){var b,c,d;b=this.cookieMatrix[a].texture,c=this.cookieMatrix[a-1].texture;var e=this.cookieNumMatrix[a];this.cookieNumMatrix[a]=this.cookieNumMatrix[a-1],this.cookieNumMatrix[a-1]=e,this.checkMatching2(a),this.fixArr1=this.memories,this.itemIndex1=this.itemIndex,this.checkMatching2(a-1),this.fixArr2=this.memories,this.itemIndex2=this.itemIndex,0==this.fixArr1.length&&0==this.fixArr2.length?(e=this.cookieNumMatrix[a],this.cookieNumMatrix[a]=this.cookieNumMatrix[a-1],this.cookieNumMatrix[a-1]=e,this.cookieMatrix[a].texture=c,this.cookieMatrix[a-1].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a-1][0],onComplete:function(){this.cookieMatrix[a].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a-1][0]})}.bind(this)}),TweenMax.from(this.cookieMatrix[a-1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){this.cookieMatrix[a-1].texture=c,TweenMax.from(this.cookieMatrix[a-1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){this.canClick=!0}.bind(this)})}.bind(this)}),this.lastEventTime=Date.now(),this.giveHint=!1):(this.chance--,0!=this.fixArr1.length&&(this.combo++,this.totalCombo++),0!=this.fixArr2.length&&(this.combo++,this.totalCombo++),this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal",this.lastTime=Date.now(),this.restComboTime=3,this.rangeChance(),this.cookieMatrix[a].texture=c,this.cookieMatrix[a-1].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a-1][0],onComplete:function(){for(var a=0;a<this.fixArr1.length;a++)this.cookieMatrix[this.fixArr1[a]].alpha=0}.bind(this)}),TweenMax.from(this.cookieMatrix[a-1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){for(var a=0;a<this.fixArr2.length;a++)this.cookieMatrix[this.fixArr2[a]].alpha=0}.bind(this)}),d=this.cookieMatrix[a].remember,this.cookieMatrix[a].remember=this.cookieMatrix[a-1].remember,this.cookieMatrix[a-1].remember=d,TweenMax.from(this.cookieMatrix[a],.1,{onComplete:function(){this.explode()}.bind(this)}))},gc.GameScene.prototype.swapRight=function(a){var b,c,d;b=this.cookieMatrix[a].texture,c=this.cookieMatrix[a+1].texture;var e=this.cookieNumMatrix[a];this.cookieNumMatrix[a]=this.cookieNumMatrix[a+1],this.cookieNumMatrix[a+1]=e,this.checkMatching2(a),this.fixArr1=this.memories,this.itemIndex1=this.itemIndex,this.checkMatching2(a+1),this.fixArr2=this.memories,this.itemIndex2=this.itemIndex,0==this.fixArr1.length&&0==this.fixArr2.length?(e=this.cookieNumMatrix[a],this.cookieNumMatrix[a]=this.cookieNumMatrix[a+1],this.cookieNumMatrix[a+1]=e,this.cookieMatrix[a].texture=c,this.cookieMatrix[a+1].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a+1][0],onComplete:function(){this.cookieMatrix[a].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a+1][0]})}.bind(this)}),TweenMax.from(this.cookieMatrix[a+1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){this.cookieMatrix[a+1].texture=c,TweenMax.from(this.cookieMatrix[a+1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){this.canClick=!0}.bind(this)})}.bind(this)}),this.lastEventTime=Date.now(),this.giveHint=!1):(this.chance--,0!=this.fixArr1.length&&(this.combo++,this.totalCombo++),0!=this.fixArr2.length&&(this.combo++,this.totalCombo++),this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal",this.lastTime=Date.now(),this.restComboTime=3,this.rangeChance(),this.cookieMatrix[a].texture=c,this.cookieMatrix[a+1].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{x:this.cookieMatrixPos[a+1][0],onComplete:function(){for(var a=0;a<this.fixArr1.length;a++)this.cookieMatrix[this.fixArr1[a]].alpha=0}.bind(this)}),TweenMax.from(this.cookieMatrix[a+1],.1,{x:this.cookieMatrixPos[a][0],onComplete:function(){for(var a=0;a<this.fixArr2.length;a++)this.cookieMatrix[this.fixArr2[a]].alpha=0}.bind(this)}),d=this.cookieMatrix[a].remember,this.cookieMatrix[a].remember=this.cookieMatrix[a+1].remember,this.cookieMatrix[a+1].remember=d,TweenMax.from(this.cookieMatrix[a],.1,{onComplete:function(){this.explode()}.bind(this)}))},gc.GameScene.prototype.swapUp=function(a){var b,c,d;b=this.cookieMatrix[a].texture,c=this.cookieMatrix[a-7].texture;var e=this.cookieNumMatrix[a];this.cookieNumMatrix[a]=this.cookieNumMatrix[a-7],this.cookieNumMatrix[a-7]=e,this.checkMatching2(a),this.fixArr1=this.memories,this.itemIndex1=this.itemIndex,this.checkMatching2(a-7),this.fixArr2=this.memories,this.itemIndex2=this.itemIndex,0==this.fixArr1.length&&0==this.fixArr2.length?(e=this.cookieNumMatrix[a],this.cookieNumMatrix[a]=this.cookieNumMatrix[a-7],this.cookieNumMatrix[a-7]=e,this.cookieMatrix[a].texture=c,this.cookieMatrix[a-7].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a-7][1],onComplete:function(){this.cookieMatrix[a].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a-7][1]})}.bind(this)}),TweenMax.from(this.cookieMatrix[a-7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){this.cookieMatrix[a-7].texture=c,TweenMax.from(this.cookieMatrix[a-7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){this.canClick=!0}.bind(this)})}.bind(this)}),this.lastEventTime=Date.now(),this.giveHint=!1):(this.chance--,0!=this.fixArr1.length&&(this.combo++,this.totalCombo++),0!=this.fixArr2.length&&(this.combo++,this.totalCombo++),this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal",this.lastTime=Date.now(),this.restComboTime=3,this.rangeChance(),this.cookieMatrix[a].texture=c,this.cookieMatrix[a-7].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a-7][1],onComplete:function(){for(var a=0;a<this.fixArr1.length;a++)this.cookieMatrix[this.fixArr1[a]].alpha=0}.bind(this)}),TweenMax.from(this.cookieMatrix[a-7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){for(var a=0;a<this.fixArr2.length;a++)this.cookieMatrix[this.fixArr2[a]].alpha=0}.bind(this)}),d=this.cookieMatrix[a].remember,this.cookieMatrix[a].remember=this.cookieMatrix[a-7].remember,this.cookieMatrix[a-7].remember=d,TweenMax.from(this.cookieMatrix[a],.1,{onComplete:function(){this.explode()}.bind(this)}))},gc.GameScene.prototype.swapDown=function(a){var b,c,d;b=this.cookieMatrix[a].texture,c=this.cookieMatrix[a+7].texture;var e=this.cookieNumMatrix[a];this.cookieNumMatrix[a]=this.cookieNumMatrix[a+7],this.cookieNumMatrix[a+7]=e,this.checkMatching2(a),this.fixArr1=this.memories,this.itemIndex1=this.itemIndex,this.checkMatching2(a+7),this.fixArr2=this.memories,this.itemIndex2=this.itemIndex,0==this.fixArr1.length&&0==this.fixArr2.length?(e=this.cookieNumMatrix[a],this.cookieNumMatrix[a]=this.cookieNumMatrix[a+7],this.cookieNumMatrix[a+7]=e,this.cookieMatrix[a].texture=c,this.cookieMatrix[a+7].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a+7][1],onComplete:function(){this.cookieMatrix[a].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a+7][1]})}.bind(this)}),TweenMax.from(this.cookieMatrix[a+7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){this.cookieMatrix[a+7].texture=c,TweenMax.from(this.cookieMatrix[a+7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){this.canClick=!0}.bind(this)})}.bind(this)}),this.lastEventTime=Date.now(),this.giveHint=!1):(this.chance--,0!=this.fixArr1.length&&(this.combo++,this.totalCombo++),0!=this.fixArr2.length&&(this.combo++,this.totalCombo++),this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal",this.lastTime=Date.now(),this.restComboTime=3,this.rangeChance(),this.cookieMatrix[a].texture=c,this.cookieMatrix[a+7].texture=b,TweenMax.from(this.cookieMatrix[a],.1,{y:this.cookieMatrixPos[a+7][1],onComplete:function(){for(var a=0;a<this.fixArr1.length;a++)this.cookieMatrix[this.fixArr1[a]].alpha=0}.bind(this)}),TweenMax.from(this.cookieMatrix[a+7],.1,{y:this.cookieMatrixPos[a][1],onComplete:function(){for(var a=0;a<this.fixArr2.length;a++)this.cookieMatrix[this.fixArr2[a]].alpha=0}.bind(this)}),d=this.cookieMatrix[a].remember,this.cookieMatrix[a].remember=this.cookieMatrix[a+7].remember,this.cookieMatrix[a+7].remember=d,TweenMax.from(this.cookieMatrix[a],.1,{onComplete:function(){this.explode()}.bind(this)}))},gc.GameScene.prototype.explode=function(){var a=!1,b=!1,c=!1;if(this.explodetime=.3,void 0!=this.scanIndex&&(9==this.cookieNumMatrix[this.scanIndex]&&(b=!0),10==this.cookieNumMatrix[this.scanIndex]&&(c=!0)),void 0!=this.crossIndex){this.crossEffect1.anchor.set(.5),this.crossEffect1.position.x=this.cookieMatrixPos[this.crossIndex][0],this.crossEffect1.position.y=this.cookieMatrixPos[21][1],this.crossEffect1.height=720,this.crossEffect2.anchor.set(.5),this.crossEffect2.position.x=this.cookieMatrixPos[3][0],this.crossEffect2.position.y=this.cookieMatrixPos[this.crossIndex][1],this.crossEffect2.height=720,this.crossEffect2.transform.rotation=Math.PI/2;var d=new gc.MovieClip("eraser_effect_00",1,7,.3);d.anchor.set(.5),d.position.x=this.cookieMatrixPos[this.crossIndex][0],d.position.y=this.cookieMatrixPos[this.crossIndex][1],d.loop=!1,this.explodeContainer.addChild(this.crossEffect1),this.explodeContainer.addChild(this.crossEffect2),this.explodeContainer.addChild(d),d.onComplete=function(){gc.game.explodeContainer.removeChild(d)},TweenMax.to(this.crossEffect1.scale,this.explodetime,{x:1,y:.6,alpha:1}),TweenMax.to(this.crossEffect2.scale,this.explodetime,{x:1,y:.6,alpha:1})}if(c){var e=new gc.MovieClip("bomb_effect_00",1,9,.3);e.anchor.set(.5),e.position.x=this.cookieMatrixPos[this.scanIndex][0],e.position.y=this.cookieMatrixPos[this.scanIndex][1],e.loop=!1,this.explodeContainer.addChild(e)}for(var f=0;f<this.cookieMatrix.length;f++)if(0==this.cookieMatrix[f].flag){this.bombAnerge++,this.bombAnerge>=this.bombfull&&(a=!0,this.setBombItem(),this.bombAnerge-=this.bombfull);var g=new gc.MovieClip("clear_effect_00",1,9,.4);g.anchor.set(.5),g.position.x=this.cookieMatrixPos[f][0],g.position.y=this.cookieMatrixPos[f][1],g.alpha=1,g.loop=!1,b?this.explodeContainer2.addChild(g):this.explodeContainer.addChild(g)}this.scanIndex=void 0;var h=this.bombgauge.height/this.bombfull;void 0==this.thing&&(this.thing=new PIXI.Graphics,this.thing.position.x=0,this.thing.position.y=0,this.bombgauge.addChild(this.thing),this.bombgauge.mask=this.thing,this.thing.lineStyle(0),this.thing.clear(),this.thing.beginFill(16777215,1),this.maskRect=this.thing.drawRect(-14,-this.bombgauge.height+h*(this.bombfull-this.bombAnerge),this.bombgauge.width,this.bombgauge.height,10),this.thing.endFill());for(var f=0;f<this.cookieMatrix.length;f++)0==this.cookieMatrix[f].flag&&this.addScore(f);if(b||this.test||this.manageSound(),this.settingItem(),this.test||DataManager.point("point",this.addPoint,Date.now().toString()),this.score+=this.addPoint,this.addPoint=0,this.scoreTxt.setValue(this.score),this.explodetime=.3,void 0!=this.crossIndex&&(this.crossIndex=void 0),b&&(this.explodetime=.15*(this.remembers.length+2)),a){this.cookieMatrix[this.randBombIndex].alpha=0;var i=new PIXI.Sprite.fromFrame("bomb_0002.png");i.anchor.set(.5),i.x=this.bomb.x,i.y=this.bomb.y,this.addChild(i),this.restComboTime=3,TweenMax.to(i.scale,.3,{x:1.3,y:1.3,onComplete:function(){TweenMax.to(i.scale,.2,{x:1,y:1,onComplete:function(){TweenMax.to(i,1,{rotation:90,x:this.cookieMatrixPos[this.randBombIndex][0],y:this.cookieMatrixPos[this.randBombIndex][1],onComplete:function(){this.removeChild(i),this.cookieMatrix[this.randBombIndex].alpha=1,this.explodeOver()}.bind(this)},0)}.bind(this)})}.bind(this)}),this.bomb.texture=PIXI.Texture.fromFrame("bomb_0002.png"),TweenMax.to(this.maskRect,.1,{y:-this.bombgauge.height,onComplete:function(){TweenMax.to(this.maskRect,.1,{y:-this.bombgauge.height+h*this.bombfull,onComplete:function(){TweenMax.to(this.maskRect,.1,{y:-this.bombgauge.height+h*(this.bombfull-this.bombAnerge),onComplete:function(){this.bomb.texture=PIXI.Texture.fromFrame("bomb_0001.png")}.bind(this)})}.bind(this)})}.bind(this)})}else TweenMax.to(this.maskRect,.1,{y:-this.bombgauge.height+h*(this.bombfull-this.bombAnerge)}),this.explodeOver();TweenMax.to(this.cookieMatrix[0],this.explodetime,{onComplete:function(){this.explodeContainer.removeChildren(),void 0!=this.explodeContainer2&&this.explodeContainer2.removeChildren()}.bind(this)}),this.manageMedal()},gc.GameScene.prototype.explodeOver=function(){TweenMax.to(this.cookieMatrix[0],this.explodetime,{onComplete:function(){this.dropCookie()}.bind(this)})},gc.GameScene.prototype.manageSound=function(){this.prestageMode==this.stageMode?(this.exceptSound=!1,this.basicSound()):"superfever"==this.stageMode||"fever"==this.stageMode?this.exceptSound?GD.soundPlay("sound_match_fever"):this.exceptSound=!0:"momotime"==this.stageMode?this.momoSound():this.basicSound()},gc.GameScene.prototype.basicSound=function(){return this.useItem?(GD.soundPlay("sound_use"),void(this.useItem=!1)):void("normal"==this.stageMode?1==this.combo?GD.soundPlay("sound_match_1"):3==this.combo?GD.soundPlay("sound_match_2"):GD.soundPlay("sound_match_3"):GD.soundPlay("sound_match_fever"))},gc.GameScene.prototype.momoSound=function(){return this.useItem?(GD.soundPlay("sound_use"),void(this.useItem=!1)):void("normal"==this.prestageMode?1==this.combo?GD.soundPlay("sound_match_1"):3==this.combo?GD.soundPlay("sound_match_2"):GD.soundPlay("sound_match_3"):GD.soundPlay("sound_match_fever"))},gc.GameScene.prototype.addScore=function(a){"normal"==this.stageMode?this.normalPoint(a):"fever"==this.stageMode?this.feverPoint(a):"superfever"==this.stageMode?this.superfeverPoint(a):"normal"==this.prestageMode?this.normalPoint(a):"fever"==this.prestageMode?this.feverPoint(a):"superfever"==this.prestageMode&&this.superfeverPoint(a)},gc.GameScene.prototype.normalPoint=function(a){this.cookieNumMatrix[a]<7?this.addPoint+=100:(10==this.cookieNumMatrix[a]&&(this.addPoint+=450),9==this.cookieNumMatrix[a]&&(this.addPoint+=350),8==this.cookieNumMatrix[a]&&(this.addPoint+=250))},gc.GameScene.prototype.feverPoint=function(a){this.cookieNumMatrix[a]<7?this.addPoint+=200:(10==this.cookieNumMatrix[a]&&(this.addPoint+=600),9==this.cookieNumMatrix[a]&&(this.addPoint+=550),8==this.cookieNumMatrix[a]&&(this.addPoint+=350))},gc.GameScene.prototype.superfeverPoint=function(a){this.cookieNumMatrix[a]<7?this.addPoint+=300:(10==this.cookieNumMatrix[a]&&(this.addPoint+=900),9==this.cookieNumMatrix[a]&&(this.addPoint+=700),8==this.cookieNumMatrix[a]&&(this.addPoint+=500))},gc.GameScene.prototype.settingItem=function(){void 0!=this.itemIndex1&&(this.fixArr1.length>=5?this.setEqualItem("origin"):this.fixArr1.length>=4&&this.setCrossItem("origin"),this.cookieMatrix[this.itemIndex1].alpha=1,this.cookieMatrix[this.itemIndex1].flag=1,this.itemIndex1=void 0),void 0!=this.itemIndex2&&(this.fixArr2.length>=5?this.setEqualItem("other"):this.fixArr2.length>=4&&this.setCrossItem("other"),this.cookieMatrix[this.itemIndex2].alpha=1,this.cookieMatrix[this.itemIndex2].flag=1,this.itemIndex2=void 0)},gc.GameScene.prototype.setBombItem=function(){
    this.randBombIndex=parseInt(14*Math.random()),0!=this.cookieMatrix[this.randBombIndex].flag&&this.cookieNumMatrix[this.randBombIndex]<7?(this.cookieMatrix[this.randBombIndex].texture=PIXI.Texture.fromFrame("bomb_item_0001.png"),this.cookieNumMatrix[this.randBombIndex]=10,this.matchItemSize(this.randBombIndex)):this.setBombItem()},gc.GameScene.prototype.setEqualItem=function(a){var c,b="cookie2_000";switch(a){case"origin":this.cookieMatrix[this.itemIndex1].remember=this.cookieNumMatrix[this.itemIndex1],c=b+this.cookieMatrix[this.itemIndex1].remember+".png",this.cookieMatrix[this.itemIndex1].texture=PIXI.Texture.fromFrame(c),this.cookieNumMatrix[this.itemIndex1]=9,this.matchItemSize(this.itemIndex1);break;case"other":this.cookieMatrix[this.itemIndex2].remember=this.cookieNumMatrix[this.itemIndex2],c=b+this.cookieMatrix[this.itemIndex2].remember+".png",this.cookieMatrix[this.itemIndex2].texture=PIXI.Texture.fromFrame(c),this.cookieNumMatrix[this.itemIndex2]=9,this.matchItemSize(this.itemIndex2)}},gc.GameScene.prototype.setCrossItem=function(a){switch(a){case"origin":this.cookieMatrix[this.itemIndex1].texture=PIXI.Texture.fromFrame("eraser_0001.png"),this.cookieNumMatrix[this.itemIndex1]=8,this.matchItemSize(this.itemIndex1);break;case"other":this.cookieMatrix[this.itemIndex2].texture=PIXI.Texture.fromFrame("eraser_0001.png"),this.cookieNumMatrix[this.itemIndex2]=8,this.matchItemSize(this.itemIndex2)}},gc.GameScene.prototype.matchItemSize=function(a){for(var b=2,c=0,d=0;d<this.cookieMatrix.length;d++)this.cookieMatrix[d].scale.x<b&&(b=this.cookieMatrix[d].scale.x);if(.85==b)for(var d=0;d<this.cookieMatrix.length;d++)this.cookieMatrix[d].scale.x>c&&(c=this.cookieMatrix[d].scale.x);.85!=b?(this.cookieMatrix[a].scale.x=b,this.cookieMatrix[a].scale.y=b):(this.cookieMatrix[a].scale.x=c,this.cookieMatrix[a].scale.y=c),this.getItemIndex()},gc.GameScene.prototype.bump=function(){this.itemIndexes.length>0&&((this.cookieMatrix[this.itemIndexes[0]].scale.x>=1||this.cookieMatrix[this.itemIndexes[0]].scale.x<=.85)&&(this.cookieMatrix[this.itemIndexes[0]].scale.x>1&&(this.cookieMatrix[this.itemIndexes[0]].scale.x=1),this.cookieMatrix[this.itemIndexes[0]].scale.x<.85&&(this.cookieMatrix[this.itemIndexes[0]].scale.x=.85),this.bumpscale*=-1),this.cookieMatrix[this.itemIndexes[0]].scale.x+=this.bumpscale,this.cookieMatrix[this.itemIndexes[0]].scale.y+=this.bumpscale);for(var a=0;a<this.itemIndexes.length;a++)this.cookieMatrix[this.itemIndexes[a]].scale.x=this.cookieMatrix[this.itemIndexes[0]].scale.x,this.cookieMatrix[this.itemIndexes[a]].scale.y=this.cookieMatrix[this.itemIndexes[0]].scale.x},gc.GameScene.prototype.getItemIndex=function(){this.itemIndexes=[];for(var a=0;a<this.cookieNumMatrix.length;a++)this.cookieNumMatrix[a]>6&&this.itemIndexes.push(a)},gc.GameScene.prototype.actBomb=function(a){this.bombCombo++,this.cookieMatrix[a].flag=0,this.cookieMatrix[a].remember=0,this.cookieMatrix[a].alpha=0,a%7!=0&&(a-7-1>=0&&this.cookieNumMatrix[a-7-1]<7&&(this.cookieMatrix[a-7-1].flag=0,this.cookieMatrix[a-7-1].alpha=0,this.cookieMatrix[a-7-1].remember=0),a+7-1<=48&&this.cookieNumMatrix[a+7-1]<7&&(this.cookieMatrix[a+7-1].flag=0,this.cookieMatrix[a+7-1].alpha=0,this.cookieMatrix[a+7-1].remember=0),a-1>=0&&this.cookieNumMatrix[a-1]<7&&(this.cookieMatrix[a-1].flag=0,this.cookieMatrix[a-1].alpha=0,this.cookieMatrix[a-1].remember=0)),a-7>=0&&this.cookieNumMatrix[a-7]<7&&(this.cookieMatrix[a-7].flag=0,this.cookieMatrix[a-7].alpha=0,this.cookieMatrix[a-7].remember=0),a+7<=48&&this.cookieNumMatrix[a+7]<7&&(this.cookieMatrix[a+7].flag=0,this.cookieMatrix[a+7].alpha=0,this.cookieMatrix[a+7].remember=0),a%7!=6&&(a-7+1>=0&&this.cookieNumMatrix[a-7+1]<7&&(this.cookieMatrix[a-7+1].flag=0,this.cookieMatrix[a-7+1].alpha=0,this.cookieMatrix[a-7+1].remember=0),a+7+1<=48&&this.cookieNumMatrix[a+7+1]<7&&(this.cookieMatrix[a+7+1].flag=0,this.cookieMatrix[a+7+1].alpha=0,this.cookieMatrix[a+7+1].remember=0),a+1<=48&&this.cookieNumMatrix[a+1]<7&&(this.cookieMatrix[a+1].flag=0,this.cookieMatrix[a+1].alpha=0,this.cookieMatrix[a+1].remember=0)),this.stopItemAccentEffect(),this.playItemAccentEffect(),this.explode()},gc.GameScene.prototype.explodeEqual=function(){var a=new gc.MovieClip("clear_effect_00",1,9,.4);a.onComplete=function(){gc.game.explodeContainer2.removeChild(a)},a.anchor.set(.5),a.position.x=this.cookieMatrixPos[this.remembers[0]][0],a.position.y=this.cookieMatrixPos[this.remembers[0]][1],a.alpha=1,a.scale.x=1.3,a.scale.y=1.3,a.loop=!1,this.explodeContainer2.addChild(a)},gc.GameScene.prototype.rise=function(){var a=new PIXI.Sprite.fromFrame("cookie_1_0001.png");a.texture=this.cookieMatrix[this.remembers[0]].texture,a.anchor.set(.5),a.position.x=this.cookieMatrixPos[this.remembers[0]][0],a.position.y=this.cookieMatrixPos[this.remembers[0]][1],this.explodeContainer2.addChild(a),this.manageSound(),this.cookieMatrix[this.remembers[0]].alpha=0,this.cookieMatrix[this.remembers[0]].flag=0,this.cookieMatrix[this.remembers[0]].remember=0,TweenMax.to(a.scale,.1,{x:1.15,y:1.15,onComplete:function(){this.explodeEqual(),this.remembers.splice(0,1),this.remembers.length>0?setTimeout(this.rise.bind(this),100):(this.explodeContainer2.removeChildren(),this.explode(),this.shadow.alpha=0)}.bind(this)})},gc.GameScene.prototype.actEqual=function(a){this.remembers=[],this.tempRemembers=[],this.cookieMatrix[a].flag=0,this.remembers.push(a);for(var b=0;b<this.cookieNumMatrix.length;b++)this.cookieNumMatrix[b]==this.cookieMatrix[a].remember&&(this.cookieMatrix[b].flag=0,this.remembers.push(b),this.tempRemembers.push(b));this.shadow.alpha=1,this.stopItemAccentEffect(),this.playItemAccentEffect(),this.rise()},gc.GameScene.prototype.actCross=function(a){this.champagneCombo++,this.cookieMatrix[a].flag=0,this.cookieMatrix[a].remember=0,this.cookieMatrix[a].alpha=0;for(var b=a%7,c=0;c<7;c++)0!=this.cookieMatrix[7*c+b].flag&&this.cookieNumMatrix[7*c+b]<7&&(this.cookieMatrix[7*c+b].flag=0,this.cookieMatrix[7*c+b].alpha=0,this.cookieMatrix[7*c+b].remember=0);for(var d=Math.floor(a/7),c=0;c<7;c++)0!=this.cookieMatrix[7*d+c].flag&&this.cookieNumMatrix[7*d+c]<7&&(this.cookieMatrix[7*d+c].flag=0,this.cookieMatrix[7*d+c].alpha=0,this.cookieMatrix[7*d+c].remember=0);this.stopItemAccentEffect(),this.playItemAccentEffect(),this.explode()},gc.GameScene.prototype.dropCookie=function(){for(var a,b=0,c=0,d=0,e=[],f=0;f<7;f++){b=0;for(var g=6;g>=0;g--)a=7*g+f,0==this.cookieMatrix[a].flag?(b++,this.cookieMatrix[a].alpha=1,this.cookieMatrix[a].flag=1):b>0&&(d++,e.push(a+7*b),this.cookieMatrix[a+7*b].texture=this.cookieMatrix[a].texture,this.cookieMatrix[a+7*b].remember=this.cookieMatrix[a].remember,this.cookieMatrix[a].remember=0,this.cookieNumMatrix[a+7*b]=this.cookieNumMatrix[a],this.cookieNumMatrix[a]=0,this.cookieNumMatrix[a+7*b]>7?this.matchItemSize(a+7*b):(this.cookieMatrix[a+7*b].scale.x=.85,this.cookieMatrix[a+7*b].scale.y=.85),TweenMax.from(this.cookieMatrix[a+7*b],.3,{y:this.cookieMatrixPos[a][1],onComplete:function(){c++,c!=d||this.canClick?this.lastEventTime=Date.now():("momotime"!=this.stageMode&&(this.prestageMode=this.stageMode),this.checkAgain())}.bind(this)}));for(var g=b-1;g>=0;g--)a=7*g+f,d++,this.cookieNumMatrix[a]=parseInt(6*Math.random()+1),this.cookieMatrix[a].texture=PIXI.Texture.fromFrame("cookie_000"+this.cookieNumMatrix[a]+".png"),this.cookieMatrix[a].scale.x=.85,this.cookieMatrix[a].scale.y=.85,this.cookieMatrix[a].remember=0,this.cookieMatrix[a].alpha=1,this.cookieMatrix[a].flag=1,TweenMax.from(this.cookieMatrix[a],.3,{y:this.gameTable.position.y+this.cookieMatrix[a].height/2,onComplete:function(){c++,c!=d||this.canClick?this.lastEventTime=Date.now():("momotime"!=this.stageMode&&(this.prestageMode=this.stageMode),this.checkAgain())}.bind(this)})}this.stopItemAccentEffect(),this.playItemAccentEffect(),this.getItemIndex(),TweenMax.from(this.cookieMatrix[0],.3,{onComplete:function(){this.restComboTime=3,this.giveHint=!1,!this.checkMatching1()&&this.playGame&&(this.checkAgain(),this.findHint())}.bind(this)})},gc.GameScene.prototype.checkAgain=function(){for(var a=0;a<this.cookieMatrixPos.length;a++)this.cookieMatrix[a].position.x=this.cookieMatrixPos[a][0],this.cookieMatrix[a].position.y=this.cookieMatrixPos[a][1];this.checkMatching3()},gc.GameScene.prototype.playItemAccentEffect=function(){for(var a=0;a<this.cookieNumMatrix.length;a++)this.cookieNumMatrix[a]>7&&1==this.cookieMatrix[a].flag&&(this.itemEffectMc[a].alpha=1,this.itemEffectMc[a].play())},gc.GameScene.prototype.stopItemAccentEffect=function(){for(var a=0;a<this.itemEffectMc.length;a++)this.itemEffectMc[a].stop(),this.itemEffectMc[a].alpha=0},gc.GameScene.prototype.checkMatching1=function(){for(var a=void 0,b=void 0,c=0,d=0,e=void 0,f=void 0,g=0;g<7;g++){a=this.cookieNumMatrix[7*g],c=0;for(var h=0;h<7;h++)if(e=h+7*g,a<7&&this.cookieNumMatrix[e]==a?c++:(a=this.cookieNumMatrix[e],c=1),c>=3)return!0}for(var g=0;g<7;g++){d=0,b=this.cookieNumMatrix[g];for(var h=0;h<7;h++)if(f=7*h+g,b<7&&this.cookieNumMatrix[f]==b?d++:(b=this.cookieNumMatrix[f],d=1),d>=3)return!0}return!1},gc.GameScene.prototype.checkMatching2=function(a){if(this.l_c=0,this.r_c=0,this.u_c=0,this.d_c=0,this.itemIndex=void 0,this.memories=[],this.cookieNumMatrix[a]<7){for(var b=a;b>=7*Math.floor(a/7)&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b--)this.l_c++;for(var b=a;b<=7*Math.floor(a/7+1)-1&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b++)this.r_c++;for(var b=a;b>=0&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b-=7)this.u_c++;for(var b=a;b<this.cookieMatrix.length&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b+=7)this.d_c++}if(this.l_c+this.r_c-1>=3){this.l_c+this.r_c-1>=4&&(this.itemIndex=a);for(var b=a-this.l_c+1;b<=a+this.r_c-1;b++)this.cookieMatrix[b].flag=0,this.memories.push(b);if(this.u_c+this.d_c-1>=3){for(var b=a-7*(this.u_c-1);b<=a+7*(this.d_c-1);b+=7)b!=a&&(this.cookieMatrix[b].flag=0,this.memories.push(b));this.itemIndex=a}return!0}if(this.l_c+this.r_c-1<3&&this.u_c+this.d_c-1>=3){for(var b=a-7*(this.u_c-1);b<=a+7*(this.d_c-1);b+=7)this.cookieMatrix[b].flag=0,this.memories.push(b);return this.memories.length>=4&&(this.itemIndex=a),!0}return!1},gc.GameScene.prototype.checkMatching3=function(){this.bundle=[];for(var a=0;a<this.cookieMatrix.length;a++){if(this.l_c=0,this.r_c=0,this.u_c=0,this.d_c=0,this.itemIndex=void 0,this.memories=[],0!=this.cookieMatrix[a].flag&&this.cookieNumMatrix[a]<7){for(var b=a;b>=7*Math.floor(a/7)&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b--)this.l_c++;for(var b=a;b<=7*Math.floor(a/7+1)-1&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b++)this.r_c++;for(var b=a;b>=0&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b-=7)this.u_c++;for(var b=a;b<this.cookieMatrix.length&&this.cookieNumMatrix[b]==this.cookieNumMatrix[a];b+=7)this.d_c++;if(this.l_c+this.r_c-1>=3){for(var b=a-this.l_c+1;b<=a+this.r_c-1;b++)this.memories.push(b);if(this.u_c+this.d_c-1>=3)for(var b=a-7*(this.u_c-1);b<=a+7*(this.d_c-1);b+=7)b!=a&&this.memories.push(b)}else if(this.l_c+this.r_c-1<3&&this.u_c+this.d_c-1>=3)for(var b=a-7*(this.u_c-1);b<=a+7*(this.d_c-1);b+=7)this.memories.push(b)}this.bundle[a]=this.memories}for(var c=0,b=0;b<this.bundle.length;b++)0==this.bundle[b].length&&c++;if(c!=this.bundle.length)this.searchingMaxLength();else{this.haveEmpty=!1;for(var b=0;b<this.cookieMatrix.length;b++)0==this.cookieMatrix[b].flag&&(this.haveEmpty=!0);this.haveEmpty?this.explode():(this.playGame?this.canClick=!0:this.itemOver?this.PlayOver():this.lastPang(),this.playGame&&this.chance<=0&&!this.haveEmpty&&this.setGameOver())}},gc.GameScene.prototype.PlayOver=function(){this.gameoverImg.anchor.set(.5),this.gameoverImg.x=GD.width/2,this.gameoverImg.y=GD.height/2,this.addChild(this.gameoverImg),TweenMax.to(this.gameoverImg.scale,.5,{x:1,y:1,onComplete:function(){TweenMax.to(this.gameoverImg.scale,.3,{x:1.2,y:1.2})}.bind(this)}),TweenMax.from(this.gameoverImg,.5,{y:GD.height+this.gameoverImg.height}),this.giveHint=!0,this.canClick=!1,this.normalmomo.stop(),this.fevermomo.stop(),this.normalshushu.stop(),this.fevershushu.stop(),this.fevereffect1.stop(),this.fevereffect2.stop(),GD.soundPlay("sound_gameover"),setTimeout(this.onResult.bind(this),1e3)},gc.GameScene.prototype.onResult=function(){GD.bgmStop(),gc.game=null,GD.commonOption.finish(this.score)},gc.GameScene.prototype.searchingMaxLength=function(){for(var a=0,b=void 0,c=0;c<this.bundle.length;c++)this.bundle[c].length>a&&(a=this.bundle[c].length,b=c);for(var c=0;c<this.bundle[b].length;c++)this.cookieMatrix[this.bundle[b][c]].flag=0,this.cookieMatrix[this.bundle[b][c]].alpha=0,this.cookieMatrix[this.bundle[b][c]].remember=0;if(this.bundle[b].length>=4){if(this.bundle[b].length>=5){this.cookieMatrix[b].remember=this.cookieNumMatrix[b];var d="cookie2_000",e=d+this.cookieMatrix[b].remember+".png";this.cookieMatrix[b].texture=PIXI.Texture.fromFrame(e),this.cookieNumMatrix[b]=9}else this.bundle[b].length>=4&&(this.cookieMatrix[b].texture=PIXI.Texture.fromFrame("eraser_0001.png"),this.cookieNumMatrix[b]=8);this.cookieMatrix[b].flag=1,this.cookieMatrix[b].alpha=1}this.combo++,this.totalCombo++,"momotime"!=this.stageMode&&(this.combo>=15?this.stageMode="superfever":this.combo>=5?(this.stageMode="fever",this.callfevercnt=0):this.stageMode="normal"),this.lastTime=Date.now(),this.restComboTime=3,this.checkMatching3()},gc.GameScene.prototype.setFeverText=function(){this.superfeverText.anchor.set(.5),this.superfeverText.position.x=gc.width/2,this.superfeverText.position.y=this.gameTable.position.y,this.superfeverText.scale.x=0,this.superfeverText.scale.y=0,this.addChild(this.superfeverText),this.feverText.anchor.set(.5),this.feverText.position.x=gc.width/2,this.feverText.position.y=this.gameTable.position.y,this.feverText.scale.x=0,this.feverText.scale.y=0,this.addChild(this.feverText)},gc.GameScene.prototype.setFever=function(){if(this.pauseMode)this.lastTime=Date.now();else{var a=Date.now();void 0==this.lastTime&&(this.lastTime=a),this.playGame&&(this.restComboTime>0?this.restComboTime-=(a-this.lastTime)/1e3:(this.combo=0,this.restComboTime=0,this.lastTime=void 0,"normal"!=this.stageMode&&(this.prestageMode=this.stageMode),this.stageMode="normal",this.callfevercnt=0),this.prestageMode!=this.stageMode&&0==this.callfevercnt&&this.actFever(),this.lastTime=a)}},gc.GameScene.prototype.actFever=function(){this.callfevercnt++,"normal"==this.stageMode?(this.normalMode(),this.gameBG.texture=GD.loader.resources.game_bg.texture,this.fevereffect1.alpha=0,this.fevereffect2.alpha=0):(this.otherMode(),this.actfeverEffect())},gc.GameScene.prototype.actfeverEffect=function(){this.test?(this.fevereffect1.y=-200,this.fevereffect2.y=-200):(this.gameBG.texture=GD.loader.resources.game_bg_fever.texture,this.fevereffect1.y=465,this.fevereffect2.y=345),this.fevereffect1.alpha=1,this.fevereffect2.alpha=1,this.fevereffect2.scale.y=1.5,this.test||"momotime"!=this.stageMode&&GD.soundPlay("sound_fever"),"superfever"==this.stageMode?(this.superfeverText.alpha=1,TweenMax.to(this.superfeverText.scale,.5,{x:1,y:1,alpha:1,onComplete:function(){TweenMax.to(this.superfeverText,.7,{onComplete:function(){this.superfeverText.scale.x=0,this.superfeverText.scale.y=0,this.superfeverText.alpha=0}.bind(this)})}.bind(this)})):"fever"==this.stageMode&&(this.feverText.alpha=1,TweenMax.to(this.feverText.scale,.5,{x:1,y:1,alpha:1,onComplete:function(){TweenMax.to(this.feverText,.7,{onComplete:function(){this.feverText.scale.x=0,this.feverText.scale.y=0,this.feverText.alpha=0,this.test&&(this.test=!1,this.stageMode="normal")}.bind(this)})}.bind(this)}))},gc.GameScene.prototype.pause=function(){this.pauseMode=!0,this.setInteractive(!1)},gc.GameScene.prototype.resume=function(){this.pauseMode=!1,this.setInteractive(!0)},gc.GameScene.prototype.setInteractive=function(a){for(var b=0;b<this.cookieMatrix.length;b++)this.cookieMatrix[b].interactive=a;this.pauseMode?(this.fevereffect1.stop(),this.fevereffect2.stop(),this.normalmomo.stop(),this.fevermomo.stop(),this.normalshushu.stop(),this.fevershushu.stop(),this.giveHint&&(this.hintMc1.stop(),this.hintMc2.stop())):(this.fevereffect1.play(),this.fevereffect2.play(),"normal"==this.stageMode?this.normalMode():this.otherMode(),this.giveHint&&(this.hintMc1.play(),this.hintMc2.play()))},gc.GameScene.prototype.manageMedal=function(){this.totalCombo>=100&&!this.getMedal4?(DataManager.addMedal(4),this.getMedal4=!0):this.totalCombo>=3&&!this.getMedal1?(DataManager.addMedal(1),this.getMedal1=!0):this.champagneCombo>=10&&!this.getMedal2?(DataManager.addMedal(2),this.getMedal2=!0):this.bombCombo>=10&&!this.getMedal3&&(DataManager.addMedal(3),this.getMedal3=!0)},gc.GameScene.getInstance=function(){return gc.game||(gc.game=new gc.GameScene),gc.game};