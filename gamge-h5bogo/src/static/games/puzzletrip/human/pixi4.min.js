!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.PIXI=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";"use restrict";function e(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var d=32;c.INT_BITS=d,c.INT_MAX=2147483647,c.INT_MIN=-1<<d-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>d-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=e,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>e(a)+1}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var d,c=a;do if(d=!1,c.steiner||!w(c,c.next)&&0!==v(c.prev,c,c.next))c=c.next;else{if(D(c),c=b=c.prev,c===c.next)return null;d=!0}while(d||c!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var o,q,n=a;a.prev!==a.next;)if(o=a.prev,q=a.next,l?i(a,d,e,l):h(a))b.push(o.i/c),b.push(a.i/c),b.push(q.i/c),D(a),a=q.next,n=q.next;else if(a=q,a===n){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var h,i,j,k,l,g=[];for(h=0,i=b.length;h<i;h++)j=b[h]*d,k=h<i-1?b[h+1]*d:a.length,l=e(a,j,k,d,!1),l===l.next&&(l.steiner=!0),g.push(s(l));for(g.sort(m),h=0;h<g.length;h++)n(g[h],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var g,c=b,d=a.x,e=a.y,f=-(1/0);do{if(e<=c.y&&e>=c.next.y){var h=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=d&&h>f){if(f=h,h===d){if(e===c.y)return c;if(e===c.next.y)return c.next}g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!g)return null;if(d===f)return g.prev;var m,i=g,j=g.x,k=g.y,l=1/0;for(c=g.next;c!==i;)d>=c.x&&c.x>=j&&t(e<k?d:f,e,j,k,e<k?f:d,e,c.x,c.y)&&(m=Math.abs(e-c.y)/(d-c.x),(m<l||m===l&&c.x>g.x)&&z(c,a)&&(g=c,l=m)),c=c.next;return g}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],3:[function(a,b,c){"use strict";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(){this._events=new f,this._eventsCount=0}var d=Object.prototype.hasOwnProperty,e="~";Object.create&&(f.prototype=Object.create(null),(new f).__proto__||(e=!1)),h.prototype.eventNames=function(){var c,f,b=[];if(0===this._eventsCount)return b;for(f in c=this._events)d.call(c,f)&&b.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(c)):b},h.prototype.listeners=function(b,c){var d=e?e+b:b,f=this._events[d];if(c)return!!f;if(!f)return[];if(f.fn)return[f.fn];for(var g=0,h=f.length,i=new Array(h);g<h;g++)i[g]=f[g].fn;return i},h.prototype.emit=function(b,c,d,f,g,h){var i=e?e+b:b;if(!this._events[i])return!1;var l,m,j=this._events[i],k=arguments.length;if(j.fn){switch(j.once&&this.removeListener(b,j.fn,void 0,!0),k){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,c),!0;case 3:return j.fn.call(j.context,c,d),!0;case 4:return j.fn.call(j.context,c,d,f),!0;case 5:return j.fn.call(j.context,c,d,f,g),!0;case 6:return j.fn.call(j.context,c,d,f,g,h),!0}for(m=1,l=new Array(k-1);m<k;m++)l[m-1]=arguments[m];j.fn.apply(j.context,l)}else{var o,n=j.length;for(m=0;m<n;m++)switch(j[m].once&&this.removeListener(b,j[m].fn,void 0,!0),k){case 1:j[m].fn.call(j[m].context);break;case 2:j[m].fn.call(j[m].context,c);break;case 3:j[m].fn.call(j[m].context,c,d);break;case 4:j[m].fn.call(j[m].context,c,d,f);break;default:if(!l)for(o=1,l=new Array(k-1);o<k;o++)l[o-1]=arguments[o];j[m].fn.apply(j[m].context,l)}}return!0},h.prototype.on=function(b,c,d){var f=new g(c,d||this),h=e?e+b:b;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],f]:this._events[h].push(f):(this._events[h]=f,this._eventsCount++),this},h.prototype.once=function(b,c,d){var f=new g(c,d||this,!0),h=e?e+b:b;return this._events[h]?this._events[h].fn?this._events[h]=[this._events[h],f]:this._events[h].push(f):(this._events[h]=f,this._eventsCount++),this},h.prototype.removeListener=function(b,c,d,g){var h=e?e+b:b;if(!this._events[h])return this;if(!c)return 0===--this._eventsCount?this._events=new f:delete this._events[h],this;var i=this._events[h];if(i.fn)i.fn!==c||g&&!i.once||d&&i.context!==d||(0===--this._eventsCount?this._events=new f:delete this._events[h]);else{for(var j=0,k=[],l=i.length;j<l;j++)(i[j].fn!==c||g&&!i[j].once||d&&i[j].context!==d)&&k.push(i[j]);k.length?this._events[h]=1===k.length?k[0]:k:0===--this._eventsCount?this._events=new f:delete this._events[h]}return this},h.prototype.removeAllListeners=function(b){var c;return b?(c=e?e+b:b,this._events[c]&&(0===--this._eventsCount?this._events=new f:delete this._events[c])):(this._events=new f,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=e,h.EventEmitter=h,"undefined"!=typeof b&&(b.exports=h)},{}],4:[function(b,c,d){!function(b){var d=/iPhone/i,e=/iPod/i,f=/iPad/i,g=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,i=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,j=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,k=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,n=/BB10/i,o=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,q=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,r=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),s=function(a,b){return a.test(b)},t=function(a){var b=a||navigator.userAgent,c=b.split("[FBAN");if("undefined"!=typeof c[1]&&(b=c[0]),c=b.split("Twitter"),"undefined"!=typeof c[1]&&(b=c[0]),this.apple={phone:s(d,b),ipod:s(e,b),tablet:!s(d,b)&&s(f,b),device:s(d,b)||s(e,b)||s(f,b)},this.amazon={phone:s(i,b),tablet:!s(i,b)&&s(j,b),device:s(i,b)||s(j,b)},this.android={phone:s(i,b)||s(g,b),tablet:!s(i,b)&&!s(g,b)&&(s(j,b)||s(h,b)),device:s(i,b)||s(j,b)||s(g,b)||s(h,b)},this.windows={phone:s(k,b),tablet:s(l,b),device:s(k,b)||s(l,b)},this.other={blackberry:s(m,b),blackberry10:s(n,b),opera:s(o,b),firefox:s(q,b),chrome:s(p,b),device:s(m,b)||s(n,b)||s(o,b)||s(q,b)||s(p,b)},this.seven_inch=s(r,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},u=function(){var a=new t;return a.Class=t,a};"undefined"!=typeof c&&c.exports&&"undefined"==typeof window?c.exports=t:"undefined"!=typeof c&&c.exports&&"undefined"!=typeof window?c.exports=u():"function"==typeof a&&a.amd?a("isMobile",[],b.isMobile=u()):b.isMobile=u()}(this)},{}],5:[function(a,b,c){"use strict";function f(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function g(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;var d=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if("0123456789"!==d.join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(a){return!1}}var d=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;b.exports=g()?Object.assign:function(a,b){for(var c,h,g=f(a),i=1;i<arguments.length;i++){c=Object(arguments[i]);for(var j in c)d.call(c,j)&&(g[j]=c[j]);if(Object.getOwnPropertySymbols){h=Object.getOwnPropertySymbols(c);for(var k=0;k<h.length;k++)e.call(c,h[k])&&(g[h[k]]=c[h[k]])}}return g}},{}],6:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c)};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){var a=this.gl;a.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,c,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],7:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT)},e.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c,f){var g=d.fromData(a,null,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},e.createFloat32=function(a,b,c,f){var g=new d.fromData(a,f,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},b.exports=e},{"./GLTexture":9}],8:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),f=a("./shader/extractUniforms"),g=a("./shader/generateUniformAccessObject"),h=function(a,b,c){this.gl=a,this.program=d(a,b,c),this.attributes=e(a,this.program);var h=f(a,this.program);this.uniforms=g(a,h)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){},b.exports=h},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(a,b,c){var d=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||-1,this.height=c||-1,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,d=a.videoHeight||a.height;d!==this.height||c!==this.width?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=c,this.height=d};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var d=this.gl;if(a instanceof Float32Array){if(!e){var f=d.getExtension("OES_texture_float");if(!f)throw new Error("floating point textures not available");e=!0}this.type=d.FLOAT}else this.type=d.UNSIGNED_BYTE;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b!==this.width||c!==this.height?d.texImage2D(d.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,a||null):d.texSubImage2D(d.TEXTURE_2D,0,0,0,b,c,this.format,this.type,a||null),this.width=b,this.height=c},d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},d.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},d.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},d.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},d.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.texture)},d.fromSource=function(a,b,c){var e=new d(a);return e.premultiplyAlpha=c||!1,e.upload(b),e},d.fromData=function(a,b,c,e){var f=new d(a);return f.uploadData(b,c,e),f},b.exports=d},{}],10:[function(a,b,c){function e(a,b){if(this.nativeVaoExtension=null,e.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(c),attribState:new Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var d=a("./setVertexAttribArrays");e.prototype.constructor=e,b.exports=e,e.FORCE_NATIVE=!1,e.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},e.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},e.prototype.activate=function(){for(var a=this.gl,b=null,c=0;c<this.attributes.length;c++){var e=this.attributes[c];b!==e.buffer&&(e.buffer.bind(),b=e.buffer),a.vertexAttribPointer(e.attribute.location,e.attribute.size,e.type||a.FLOAT,e.normalized||!1,e.stride||0,e.start||0)}return d(a,this.attributes,this.nativeState),this.indexBuffer.bind(),this},e.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},e.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},e.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},e.prototype.draw=function(a,b,c){var d=this.gl;return d.drawElements(a,b,d.UNSIGNED_SHORT,c||0),this},e.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(a,b,c){var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw new Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],12:[function(a,b,c){var d={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};"undefined"!=typeof b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=d)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,b,c){var d=function(a,b,c){var d;if(c){var e=c.tempAttribState,f=c.attribState;for(d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++){var g=b[d];a.enableVertexAttribArray(g.attribute.location)}};b.exports=d},{}],14:[function(a,b,c){var d=function(a,b,c){var d=e(a,a.VERTEX_SHADER,b),f=e(a,a.FRAGMENT_SHADER,c),g=a.createProgram();return a.attachShader(g,d),a.attachShader(g,f),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(g,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(g)),a.deleteProgram(g),g=null),a.deleteShader(d),a.deleteShader(f),g},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],15:[function(a,b,c){var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){for(var b=new Array(a),c=0;c<b.length;c++)b[c]=!1;return b};b.exports=d},{}],16:[function(a,b,c){var d=a("./mapType"),e=a("./mapSize"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),h=0;h<f;h++){var i=a.getActiveAttrib(b,h),j=d(a,i.type);c[i.name]={type:j,size:e(j),location:a.getAttribLocation(b,i.name),pointer:g}}return c},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{"./mapSize":20,"./mapType":21}],17:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),g=0;g<f;g++){var h=a.getActiveUniform(b,g),i=h.name.replace(/\[.*?\]/,""),j=d(a,h.type);c[i]={type:j,size:h.size,location:a.getUniformLocation(b,i),value:e(j,h.size)}}return c};b.exports=f},{"./defaultValue":15,"./mapType":21}],18:[function(a,b,c){var d=function(a,b){var c={data:{}};c.gl=a;for(var d=Object.keys(b),h=0;h<d.length;h++){var i=d[h],j=i.split("."),k=j[j.length-1],l=g(j,c),m=b[i];l.data[k]=m,l.gl=a,Object.defineProperty(l,k,{get:e(k),set:f(k,m)})}return c},e=function(a){var b=h.replace("%%",a);return new Function(b)},f=function(a,b){var d,c=i.replace(/%%/g,a);return d=1===b.size?j[b.type]:k[b.type],d&&(c+="\nthis.gl."+d+";"),new Function("value",c)},g=function(a,b){for(var c=b,d=0;d<a.length-1;d++){var e=c[a[d]]||{data:{}};c[a[d]]=e,c=e}return c},h=["return this.data.%%.value;"].join("\n"),i=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),j={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],19:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(a,b,c){var d=function(a){return e[a]},e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],21:[function(a,b,c){var d=function(a,b){if(!e){var c=Object.keys(f);e={};for(var d=0;d<c.length;++d){var g=c[d];e[a[g]]=f[g]}}return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],22:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function f(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,e=function(a){return d.exec(a).slice(1)};c.resolve=function(){for(var c="",d=!1,e=arguments.length-1;e>=-1&&!d;e--){var g=e>=0?arguments[e]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,d="/"===g.charAt(0))}return c=b(f(c.split("/"),function(a){return!!a}),!d).join("/"),(d?"/":"")+c||"."},c.normalize=function(a){var d=c.isAbsolute(a),e="/"===g(a,-1);return a=b(f(a.split("/"),function(a){return!!a}),!d).join("/"),a||d||(a="."),a&&e&&(a+="/"),(d?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(f(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=e(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=e(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return e(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:23}],23:[function(a,b,c){function g(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function i(a){if(e===setTimeout)return setTimeout(a,0);if((e===g||!e)&&setTimeout)return e=setTimeout,setTimeout(a,0);try{return e(a,0)}catch(b){try{return e.call(null,a,0)}catch(b){return e.call(this,a,0)}}}function j(a){if(f===clearTimeout)return clearTimeout(a);if((f===h||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(a);try{return f(a)}catch(b){try{return f.call(null,a)}catch(b){return f.call(this,a)}}}function o(){l&&m&&(l=!1,m.length?k=m.concat(k):n=-1,k.length&&p())}function p(){if(!l){var a=i(o);l=!0;for(var b=k.length;b;){for(m=k,k=[];++n<b;)m&&m[n].run();n=-1,b=k.length}m=null,l=!1,j(a)}}function q(a,b){this.fun=a,this.array=b}function r(){}var e,f,d=b.exports={};!function(){try{e="function"==typeof setTimeout?setTimeout:g}catch(a){e=g}try{f="function"==typeof clearTimeout?clearTimeout:h;
}catch(a){f=h}}();var m,k=[],l=!1,n=-1;d.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];k.push(new q(a,b)),1!==k.length||l||i(p)},q.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=r,d.addListener=r,d.once=r,d.off=r,d.removeListener=r,d.removeAllListeners=r,d.emit=r,d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],24:[function(b,c,d){(function(b){!function(e){function A(a){throw new RangeError(v[a])}function B(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function C(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(u,".");var e=a.split("."),f=B(e,b).join(".");return d+f}function D(a){for(var e,f,b=[],c=0,d=a.length;c<d;)e=a.charCodeAt(c++),e>=55296&&e<=56319&&c<d?(f=a.charCodeAt(c++),56320==(64512&f)?b.push(((1023&e)<<10)+(1023&f)+65536):(b.push(e),c--)):b.push(e);return b}function E(a){return B(a,function(a){var b="";return a>65535&&(a-=65536,b+=y(a>>>10&1023|55296),a=56320|1023&a),b+=y(a)}).join("")}function F(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:k}function G(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function H(a,b,c){var d=0;for(a=c?x(a/o):a>>1,a+=x(a/b);a>w*m>>1;d+=k)a=x(a/w);return x(d+(w+1)*a/(a+n))}function I(a){var d,h,i,n,o,s,t,u,v,w,b=[],c=a.length,e=0,f=q,g=p;for(h=a.lastIndexOf(r),h<0&&(h=0),i=0;i<h;++i)a.charCodeAt(i)>=128&&A("not-basic"),b.push(a.charCodeAt(i));for(n=h>0?h+1:0;n<c;){for(o=e,s=1,t=k;n>=c&&A("invalid-input"),u=F(a.charCodeAt(n++)),(u>=k||u>x((j-e)/s))&&A("overflow"),e+=u*s,v=t<=g?l:t>=g+m?m:t-g,!(u<v);t+=k)w=k-v,s>x(j/w)&&A("overflow"),s*=w;d=b.length+1,g=H(e-o,d,0==o),x(e/d)>j-f&&A("overflow"),f+=x(e/d),e%=d,b.splice(e++,0,f)}return E(b)}function J(a){var b,c,d,e,f,g,h,i,n,o,s,u,v,w,z,t=[];for(a=D(a),u=a.length,b=q,c=0,f=p,g=0;g<u;++g)s=a[g],s<128&&t.push(y(s));for(d=e=t.length,e&&t.push(r);d<u;){for(h=j,g=0;g<u;++g)s=a[g],s>=b&&s<h&&(h=s);for(v=d+1,h-b>x((j-c)/v)&&A("overflow"),c+=(h-b)*v,b=h,g=0;g<u;++g)if(s=a[g],s<b&&++c>j&&A("overflow"),s==b){for(i=c,n=k;o=n<=f?l:n>=f+m?m:n-f,!(i<o);n+=k)z=i-o,w=k-o,t.push(y(G(o+z%w,0))),i=x(z/w);t.push(y(G(i,0))),f=H(c,v,d==e),c=0,++d}++c,++b}return t.join("")}function K(a){return C(a,function(a){return s.test(a)?I(a.slice(4).toLowerCase()):a})}function L(a){return C(a,function(a){return t.test(a)?"xn--"+J(a):a})}var f="object"==typeof d&&d&&!d.nodeType&&d,g="object"==typeof c&&c&&!c.nodeType&&c,h="object"==typeof b&&b;h.global!==h&&h.window!==h&&h.self!==h||(e=h);var i,z,j=2147483647,k=36,l=1,m=26,n=38,o=700,p=72,q=128,r="-",s=/^xn--/,t=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=k-l,x=Math.floor,y=String.fromCharCode;if(i={version:"1.4.1",ucs2:{decode:D,encode:E},decode:I,encode:J,toASCII:L,toUnicode:K},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return i});else if(f&&g)if(c.exports==f)g.exports=i;else for(z in i)i.hasOwnProperty(z)&&(f[z]=i[z]);else e.punycode=i}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var n,o,p,q,l=a[k].replace(h,"%20"),m=l.indexOf(c);m>=0?(n=l.substr(0,m),o=l.substr(m+1)):(n=l,o=""),p=decodeURIComponent(n),q=decodeURIComponent(o),d(g,p)?e(g[p])?g[p].push(q):g[p]=[g[p],q]:g[p]=q}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],26:[function(a,b,c){"use strict";function f(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?f(g(a),function(g){var h=encodeURIComponent(d(g))+c;return e(a[g])?f(a[g],function(a){return h+encodeURIComponent(d(a))}).join(b):h+encodeURIComponent(d(a[g]))}).join(b):h?encodeURIComponent(d(h))+c+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],27:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":25,"./encode":26}],28:[function(a,b,c){"use strict";function f(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function v(a,b,c){if(a&&e.isObject(a)&&a instanceof f)return a;var d=new f;return d.parse(a,b,c),d}function w(a){return e.isString(a)&&(a=v(a)),a instanceof f?a.format():f.prototype.format.call(a)}function x(a,b){return v(a,!1,!0).resolve(b)}function y(a,b){return a?v(a,!1,!0).resolveObject(b):b}var d=a("punycode"),e=a("./util");c.parse=v,c.resolve=x,c.resolveObject=y,c.format=w,c.Url=f;var g=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,j=["<",">",'"',"`"," ","\r","\n","\t"],k=["{","}","|","\\","^","`"].concat(j),l=["'"].concat(k),m=["%","/","?",";","#"].concat(l),n=["/","?","#"],o=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,q=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,r={javascript:!0,"javascript:":!0},s={javascript:!0,"javascript:":!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},u=a("querystring");f.prototype.parse=function(a,b,c){if(!e.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var f=a.indexOf("?"),h=f!==-1&&f<a.indexOf("#")?"?":"#",j=a.split(h),k=/\\/g;j[0]=j[0].replace(k,"/"),a=j.join(h);var v=a;if(v=v.trim(),!c&&1===a.split("#").length){var w=i.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],b?this.query=u.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var x=g.exec(v);if(x){x=x[0];var y=x.toLowerCase();this.protocol=y,v=v.substr(x.length)}if(c||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===v.substr(0,2);!z||x&&s[x]||(v=v.substr(2),this.slashes=!0)}if(!s[x]&&(z||x&&!t[x])){for(var A=-1,B=0;B<n.length;B++){var C=v.indexOf(n[B]);C!==-1&&(A===-1||C<A)&&(A=C)}var D,E;E=A===-1?v.lastIndexOf("@"):v.lastIndexOf("@",A),E!==-1&&(D=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<m.length;B++){var C=v.indexOf(m[B]);C!==-1&&(A===-1||C<A)&&(A=C)}A===-1&&(A=v.length),this.host=v.slice(0,A),v=v.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(p)){for(var J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(p)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(q);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(v="/"+N.join(".")+v),this.hostname=M.join(".");break}}}this.hostname.length>o?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=d.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!r[y])for(var B=0,H=l.length;B<H;B++){var R=l[B];if(v.indexOf(R)!==-1){var S=encodeURIComponent(R);S===R&&(S=escape(R)),v=v.split(R).join(S)}}var T=v.indexOf("#");T!==-1&&(this.hash=v.substr(T),v=v.slice(0,T));var U=v.indexOf("?");if(U!==-1?(this.search=v.substr(U),this.query=v.substr(U+1),b&&(this.query=u.parse(this.query)),v=v.slice(0,U)):b&&(this.search="",this.query={}),v&&(this.pathname=v),t[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},f.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",f=!1,g="";this.host?f=a+this.host:this.hostname&&(f=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port)),this.query&&e.isObject(this.query)&&Object.keys(this.query).length&&(g=u.stringify(this.query));var h=this.search||g&&"?"+g||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||t[b])&&f!==!1?(f="//"+(f||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):f||(f=""),d&&"#"!==d.charAt(0)&&(d="#"+d),h&&"?"!==h.charAt(0)&&(h="?"+h),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),h=h.replace("#","%23"),b+f+c+h+d},f.prototype.resolve=function(a){return this.resolveObject(v(a,!1,!0)).format()},f.prototype.resolveObject=function(a){if(e.isString(a)){var b=new f;b.parse(a,!1,!0),a=b}for(var c=new f,d=Object.keys(this),g=0;g<d.length;g++){var h=d[g];c[h]=this[h]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var i=Object.keys(a),j=0;j<i.length;j++){var k=i[j];"protocol"!==k&&(c[k]=a[k])}return t[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!t[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||s[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),u=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=u||r||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!t[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),u)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!e.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,e.isNull(c.pathname)&&e.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!v&&!w)for(;C--;C)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return v=v||c.host&&x.length,v&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),e.isNull(c.pathname)&&e.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},f.prototype.parseHost=function(){var a=this.host,b=h.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":29,punycode:24,querystring:27}],29:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],30:[function(a,b,c){arguments[4][3][0].apply(c,arguments)},{dup:3}],31:[function(a,b,c){"use strict";b.exports=function(b,c){c=c||{};for(var d={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e=d.parser[c.strictMode?"strict":"loose"].exec(b),f={},g=14;g--;)f[d.key[g]]=e[g]||"";return f[d.q.name]={},f[d.key[12]].replace(d.q.parser,function(a,b,c){b&&(f[d.q.name][b]=c)}),f}},{}],32:[function(a,b,c){"use strict";function j(a,b){g.call(this),b=b||h,this.baseUrl=a||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=e.queue(this._boundLoadResource,b),this.resources={}}var d=a("parse-uri"),e=a("./async"),f=a("./Resource"),g=a("eventemitter3"),h=10,i=100;j.prototype=Object.create(g.prototype),j.prototype.constructor=j,b.exports=j,j.prototype.add=j.prototype.enqueue=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"==typeof a&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw new Error("No url passed to add resource to loader.");if("function"==typeof c&&(d=c,c=null),this.resources[a])throw new Error('Resource with name "'+a+'" already exists.');return b=this._prepareUrl(b),this.resources[a]=new f(a,b,c),"function"==typeof d&&this.resources[a].once("afterMiddleware",d),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(i-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=i/this._buffer.length),this},j.prototype.before=j.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},j.prototype.after=j.prototype.use=function(a){return this._afterMiddleware.push(a),this},j.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var a in this.resources){var b=this.resources[a];b.off("complete",this._onLoad,this),b.isLoading&&b.abort()}return this.resources={},this},j.prototype.load=function(a){if("function"==typeof a&&this.once("complete",a),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var b=0;b<this._buffer.length;++b)this._queue.push(this._buffer[b]);return this._buffer.length=0,this},j.prototype._prepareUrl=function(a){var b=d(a,{strictMode:!0});return b.protocol||!b.path||0===b.path.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a},j.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,e.eachSeries(this._beforeMiddleware,function(b,d){try{a.url=a.url+"?ver="+IMG_VERSION}catch(a){}b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a.once("complete",c._onLoad,c),a.load())})},j.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},j.prototype._onLoad=function(a){var b=this;e.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.emit("afterMiddleware",a),b._numToLoad--,b.progress+=b._progressChunk,b.emit("progress",b,a),a.error?b.emit("error",a.error,b,a):b.emit("load",b,a),0===b._numToLoad&&(b.progress=100,b._onComplete())}),a._dequeue()},j.LOAD_TYPE=f.LOAD_TYPE,j.XHR_RESPONSE_TYPE=f.XHR_RESPONSE_TYPE},{"./Resource":33,"./async":34,eventemitter3:30,"parse-uri":31}],33:[function(a,b,c){"use strict";function k(a,b,c){if(d.call(this),c=c||{},"string"!=typeof a||"string"!=typeof b)throw new Error("Both name and url are required for constructing a resource.");this.name=a,this.url=b,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=c.crossOrigin===!0?"anonymous":c.crossOrigin,this.loadType=c.loadType||this._determineLoadType(),this.xhrType=c.xhrType,this.metadata=c.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function l(a){return a.toString().replace("object ","")}function m(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}var d=a("eventemitter3"),e=a("parse-uri"),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),g=null,h=0,i=200,j=204;k.prototype=Object.create(d.prototype),k.prototype.constructor=k,b.exports=k,k.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},k.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},k.prototype.load=function(a){if(!this.isLoading)if(this.isComplete){if(a){var b=this;setTimeout(function(){a(b)},1)}}else switch(a&&this.once("complete",a),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case k.LOAD_TYPE.IMAGE:this._loadElement("image");break;case k.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case k.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case k.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}},k.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var b="is"+a[0].toUpperCase()+a.substring(1);this[b]===!1&&(this[b]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},k.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element "+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},k.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0),this.xhrType===k.XHR_RESPONSE_TYPE.JSON||this.xhrType===k.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=k.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},k.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXdrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){a.send()},0)},k.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=b,d.type=c,d},k.prototype._onError=function(a){this.abort("Failed to load element using "+a.target.nodeName)},k.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)},k.prototype._xhrOnError=function(){var a=this.xhr;this.abort(l(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},k.prototype._xhrOnAbort=function(){this.abort(l(this.xhr)+" Request was aborted by the user.")},k.prototype._xdrOnTimeout=function(){this.abort(l(this.xhr)+" Request timed out.")},k.prototype._xhrOnLoad=function(){var a=this.xhr,b="undefined"==typeof a.status?a.status:i;if(!(b===i||b===j||b===h&&a.responseText.length>0))return void this.abort("["+a.status+"]"+a.statusText+":"+a.responseURL);if(this.xhrType===k.XHR_RESPONSE_TYPE.TEXT)this.data=a.responseText;else if(this.xhrType===k.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(a.responseText),this.isJson=!0}catch(a){return void this.abort("Error trying to parse loaded json:",a)}else if(this.xhrType===k.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var c=new DOMParser;this.data=c.parseFromString(a.responseText,"text/xml")}else{var d=document.createElement("div");d.innerHTML=a.responseText,this.data=d}this.isXml=!0}catch(a){return void this.abort("Error trying to parse loaded xml:",a)}else this.data=a.response||a.responseText;this.complete()},k.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,g||(g=document.createElement("a")),g.href=a,a=e(g.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,d=a.protocol?a.protocol+":":"";return a.host===b.hostname&&c&&d===b.protocol?"":"anonymous"},k.prototype._determineXhrType=function(){return k._xhrTypeMap[this._getExtension()]||k.XHR_RESPONSE_TYPE.TEXT},k.prototype._determineLoadType=function(){return k._loadTypeMap[this._getExtension()]||k.LOAD_TYPE.XHR},k.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?");d!==-1&&(a=a.substring(0,d)),b=a.substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},k.prototype._getMimeFromXhrType=function(a){switch(a){case k.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case k.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case k.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case k.XHR_RESPONSE_TYPE.JSON:return"application/json";case k.XHR_RESPONSE_TYPE.DEFAULT:case k.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},k.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},k.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},k._loadTypeMap={gif:k.LOAD_TYPE.IMAGE,png:k.LOAD_TYPE.IMAGE,bmp:k.LOAD_TYPE.IMAGE,jpg:k.LOAD_TYPE.IMAGE,jpeg:k.LOAD_TYPE.IMAGE,tif:k.LOAD_TYPE.IMAGE,tiff:k.LOAD_TYPE.IMAGE,webp:k.LOAD_TYPE.IMAGE,tga:k.LOAD_TYPE.IMAGE,"svg+xml":k.LOAD_TYPE.IMAGE},k._xhrTypeMap={xhtml:k.XHR_RESPONSE_TYPE.DOCUMENT,html:k.XHR_RESPONSE_TYPE.DOCUMENT,htm:k.XHR_RESPONSE_TYPE.DOCUMENT,xml:k.XHR_RESPONSE_TYPE.DOCUMENT,tmx:k.XHR_RESPONSE_TYPE.DOCUMENT,tsx:k.XHR_RESPONSE_TYPE.DOCUMENT,svg:k.XHR_RESPONSE_TYPE.DOCUMENT,gif:k.XHR_RESPONSE_TYPE.BLOB,png:k.XHR_RESPONSE_TYPE.BLOB,bmp:k.XHR_RESPONSE_TYPE.BLOB,jpg:k.XHR_RESPONSE_TYPE.BLOB,jpeg:k.XHR_RESPONSE_TYPE.BLOB,tif:k.XHR_RESPONSE_TYPE.BLOB,tiff:k.XHR_RESPONSE_TYPE.BLOB,webp:k.XHR_RESPONSE_TYPE.BLOB,tga:k.XHR_RESPONSE_TYPE.BLOB,json:k.XHR_RESPONSE_TYPE.JSON,text:k.XHR_RESPONSE_TYPE.TEXT,txt:k.XHR_RESPONSE_TYPE.TEXT},k.setExtensionLoadType=function(a,b){m(k._loadTypeMap,a,b)},k.setExtensionXhrType=function(a,b){m(k._xhrTypeMap,a,b)}},{eventemitter3:30,"parse-uri":31}],34:[function(a,b,c){"use strict";function d(){}function e(a,b,c){var d=0,e=a.length;!function f(g){return g||d===e?void(c&&c(g)):void b(a[d++],f)}()}function f(a){return function(){if(null===a)throw new Error("Callback was already called.");var c=a;a=null,c.apply(this,arguments)}}function g(a,b){function g(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(e.started=!0,null==a&&e.idle())return void setTimeout(function(){e.drain()},1);var f={data:a,callback:"function"==typeof c?c:d};b?e._tasks.unshift(f):e._tasks.push(f),setTimeout(function(){e.process()},1)}function h(a){return function(){c-=1,a.callback.apply(a,arguments),null!=arguments[0]&&e.error(arguments[0],a.data),c<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var c=0,e={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){g(a,!1,b)},kill:function(){e.drain=d,e._tasks=[]},unshift:function(a,b){g(a,!0,b)},process:function(){for(;!e.paused&&c<e.concurrency&&e._tasks.length;){var b=e._tasks.shift();0===e._tasks.length&&e.empty(),c+=1,c===e.concurrency&&e.saturated(),a(b.data,f(h(b)))}},length:function(){return e._tasks.length},running:function(){return c},idle:function(){return e._tasks.length+c===0},pause:function(){e.paused!==!0&&(e.paused=!0)},resume:function(){if(e.paused!==!1){e.paused=!1;for(var a=1;a<=e.concurrency;a++)e.process()}}};return e}b.exports={eachSeries:e,queue:g}},{}],35:[function(a,b,c){"use strict";b.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(a){for(var c,b="",d=new Array(4),e=0,f=0,g=0;e<a.length;){for(c=new Array(3),f=0;f<c.length;f++)e<a.length?c[f]=255&a.charCodeAt(e++):c[f]=0;switch(d[0]=c[0]>>2,d[1]=(3&c[0])<<4|c[1]>>4,d[2]=(15&c[1])<<2|c[2]>>6,d[3]=63&c[2],g=e-(a.length-1)){case 2:d[3]=64,d[2]=64;break;case 1:d[3]=64}for(f=0;f<d.length;f++)b+=this._keyStr.charAt(d[f])}return b}}},{}],36:[function(a,b,c){"use strict";b.exports=a("./Loader"),b.exports.Resource=a("./Resource"),b.exports.middleware={caching:{memory:a("./middlewares/caching/memory")},parsing:{blob:a("./middlewares/parsing/blob")}},b.exports.async=a("./async")},{"./Loader":32,"./Resource":33,"./async":34,"./middlewares/caching/memory":37,"./middlewares/parsing/blob":38}],37:[function(a,b,c){"use strict";var d={};b.exports=function(){return function(a,b){d[a.url]?(a.data=d[a.url],a.complete()):a.once("complete",function(){d[this.url]=this.data}),b()}}},{}],38:[function(a,b,c){"use strict";var d=a("../../Resource"),e=a("../../b64"),f=window.URL||window.webkitURL;b.exports=function(){return function(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===d.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var g=f.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=g,a.isImage=!0,void(a.data.onload=function(){f.revokeObjectURL(g),a.data.onload=null,b()})}}else{var c=a.xhr.getResponseHeader("content-type");if(c&&0===c.indexOf("image"))return a.data=new Image,a.data.src="data:"+c+";base64,"+e.encodeBinary(a.xhr.responseText),a.isImage=!0,void(a.data.onload=function(){a.data.onload=null,b()})}b()}}},{"../../Resource":33,"../../b64":35}],39:[function(a,b,c){"use strict";function j(a){return a&&a.__esModule?a:{default:a}}function k(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../core"),e=k(d),f=a("ismobilejs"),g=j(f),h=a("./accessibleTarget"),i=j(h);Object.assign(e.DisplayObject.prototype,i.default);var m=9,n=100,o=0,p=0,q=2,r=1,s=-1e3,t=-1e3,u=2,v=function(){function a(b){l(this,a),!g.default.tablet&&!g.default.phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width=n+"px",c.style.height=n+"px",c.style.position="absolute",c.style.top=o+"px",c.style.left=p+"px",c.style.zIndex=q,this.div=c,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=b,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return a.prototype.createTouchHook=function(){var b=this,c=document.createElement("button");c.style.width=r+"px",c.style.height=r+"px",c.style.position="absolute",c.style.top=s+"px",c.style.left=t+"px",c.style.zIndex=u,c.style.backgroundColor="#FF0000",c.title="HOOK DIV",c.addEventListener("focus",function(){b.isMobileAccessabillity=!0,b.activate(),document.body.removeChild(c)}),document.body.appendChild(c)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(b){if(b.visible){b.accessible&&b.interactive&&(b._accessibleActive||this.addChild(b),b.renderId=this.renderId);for(var c=b.children,d=c.length-1;d>=0;d--)this.updateAccessibleObjects(c[d])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);
    var b=this.renderer.view.getBoundingClientRect(),c=b.width/this.renderer.width,d=b.height/this.renderer.height,f=this.div;f.style.left=b.left+"px",f.style.top=b.top+"px",f.style.width=this.renderer.width+"px",f.style.height=this.renderer.height+"px";for(var g=0;g<this.children.length;g++){var h=this.children[g];if(h.renderId!==this.renderId)h._accessibleActive=!1,e.utils.removeItems(this.children,g,1),this.div.removeChild(h._accessibleDiv),this.pool.push(h._accessibleDiv),h._accessibleDiv=null,g--,0===this.children.length&&this.deactivate();else{f=h._accessibleDiv;var i=h.hitArea,j=h.worldTransform;h.hitArea?(f.style.left=(j.tx+i.x*j.a)*c+"px",f.style.top=(j.ty+i.y*j.d)*d+"px",f.style.width=i.width*j.a*c+"px",f.style.height=i.height*j.d*d+"px"):(i=h.getBounds(),this.capHitArea(i),f.style.left=i.x*c+"px",f.style.top=i.y*d+"px",f.style.width=i.width*c+"px",f.style.height=i.height*d+"px")}}this.renderId++}},a.prototype.capHitArea=function(b){b.x<0&&(b.width+=b.x,b.x=0),b.y<0&&(b.height+=b.y,b.y=0),b.x+b.width>this.renderer.width&&(b.width=this.renderer.width-b.x),b.y+b.height>this.renderer.height&&(b.height=this.renderer.height-b.y)},a.prototype.addChild=function(b){var c=this.pool.pop();c||(c=document.createElement("button"),c.style.width=n+"px",c.style.height=n+"px",c.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",c.style.position="absolute",c.style.zIndex=q,c.style.borderStyle="none",c.addEventListener("click",this._onClick.bind(this)),c.addEventListener("focus",this._onFocus.bind(this)),c.addEventListener("focusout",this._onFocusOut.bind(this))),b.accessibleTitle?c.title=b.accessibleTitle:b.accessibleTitle||b.accessibleHint||(c.title="displayObject "+this.tabIndex),b.accessibleHint&&c.setAttribute("aria-label",b.accessibleHint),b._accessibleActive=!0,b._accessibleDiv=c,c.displayObject=b,this.children.push(b),this.div.appendChild(b._accessibleDiv),b._accessibleDiv.tabIndex=b.tabIndex},a.prototype._onClick=function(b){var c=this.renderer.plugins.interaction;c.dispatchEvent(b.target.displayObject,"click",c.eventData)},a.prototype._onFocus=function(b){var c=this.renderer.plugins.interaction;c.dispatchEvent(b.target.displayObject,"mouseover",c.eventData)},a.prototype._onFocusOut=function(b){var c=this.renderer.plugins.interaction;c.dispatchEvent(b.target.displayObject,"mouseout",c.eventData)},a.prototype._onKeyDown=function(b){b.keyCode===m&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var b=0;b<this.children.length;b++)this.children[b].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a}();c.default=v,e.WebGLRenderer.registerPlugin("accessibility",v),e.CanvasRenderer.registerPlugin("accessibility",v)},{"../core":62,"./accessibleTarget":40,ismobilejs:4}],40:[function(a,b,c){"use strict";c.__esModule=!0,c.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],41:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./accessibleTarget");Object.defineProperty(c,"accessibleTarget",{enumerable:!0,get:function(){return f(d).default}});var e=a("./AccessibilityManager");Object.defineProperty(c,"AccessibilityManager",{enumerable:!0,get:function(){return f(e).default}})},{"./AccessibilityManager":39,"./accessibleTarget":40}],42:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function l(a){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);return b.unshift("precision "+k+" float;"),b}}else if("precision"!==a.substring(0,9))return"precision "+k+" float;\n"+a;return a}c.__esModule=!0;var d=a("pixi-gl-core"),e=a("./settings"),f=g(e),k=f.default.PRECISION,m=function(a){function b(c,d,e){return h(this,b),i(this,a.call(this,c,l(d),l(e)))}return j(b,a),b}(d.GLShader);c.default=m},{"./settings":98,"pixi-gl-core":12}],43:[function(a,b,c){"use strict";c.__esModule=!0;c.VERSION="4.2.2",c.PI_2=2*Math.PI,c.RAD_TO_DEG=180/Math.PI,c.DEG_TO_RAD=Math.PI/180,c.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},c.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},c.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c.SCALE_MODES={LINEAR:0,NEAREST:1},c.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},c.GC_MODES={AUTO:0,MANUAL:1},c.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,c.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,c.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,c.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},c.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},c.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},c.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],44:[function(a,b,c){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../math"),f=function(){function a(){e(this,a),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},a.prototype.getRectangle=function(b){return this.minX>this.maxX||this.minY>this.maxY?d.Rectangle.EMPTY:(b=b||new d.Rectangle(0,0,1,1),b.x=this.minX,b.y=this.minY,b.width=this.maxX-this.minX,b.height=this.maxY-this.minY,b)},a.prototype.addPoint=function(b){this.minX=Math.min(this.minX,b.x),this.maxX=Math.max(this.maxX,b.x),this.minY=Math.min(this.minY,b.y),this.maxY=Math.max(this.maxY,b.y)},a.prototype.addQuad=function(b){var c=this.minX,d=this.minY,e=this.maxX,f=this.maxY,g=b[0],h=b[1];c=g<c?g:c,d=h<d?h:d,e=g>e?g:e,f=h>f?h:f,g=b[2],h=b[3],c=g<c?g:c,d=h<d?h:d,e=g>e?g:e,f=h>f?h:f,g=b[4],h=b[5],c=g<c?g:c,d=h<d?h:d,e=g>e?g:e,f=h>f?h:f,g=b[6],h=b[7],c=g<c?g:c,d=h<d?h:d,e=g>e?g:e,f=h>f?h:f,this.minX=c,this.minY=d,this.maxX=e,this.maxY=f},a.prototype.addFrame=function(b,c,d,e,f){var g=b.worldTransform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=this.minX,o=this.minY,p=this.maxX,q=this.maxY,r=h*c+j*d+l,s=i*c+k*d+m;n=r<n?r:n,o=s<o?s:o,p=r>p?r:p,q=s>q?s:q,r=h*e+j*d+l,s=i*e+k*d+m,n=r<n?r:n,o=s<o?s:o,p=r>p?r:p,q=s>q?s:q,r=h*c+j*f+l,s=i*c+k*f+m,n=r<n?r:n,o=s<o?s:o,p=r>p?r:p,q=s>q?s:q,r=h*e+j*f+l,s=i*e+k*f+m,n=r<n?r:n,o=s<o?s:o,p=r>p?r:p,q=s>q?s:q,this.minX=n,this.minY=o,this.maxX=p,this.maxY=q},a.prototype.addVertices=function(b,c,d,e){for(var f=b.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=d;q<e;q+=2){var r=c[q],s=c[q+1],t=g*r+i*s+k,u=j*s+h*r+l;m=t<m?t:m,n=u<n?u:n,o=t>o?t:o,p=u>p?u:p}this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},a.prototype.addBounds=function(b){var c=this.minX,d=this.minY,e=this.maxX,f=this.maxY;this.minX=b.minX<c?b.minX:c,this.minY=b.minY<d?b.minY:d,this.maxX=b.maxX>e?b.maxX:e,this.maxY=b.maxY>f?b.maxY:f},a.prototype.addBoundsMask=function(b,c){var d=b.minX>c.minX?b.minX:c.minX,e=b.minY>c.minY?b.minY:c.minY,f=b.maxX<c.maxX?b.maxX:c.maxX,g=b.maxY<c.maxY?b.maxY:c.maxY;if(d<=f&&e<=g){var h=this.minX,i=this.minY,j=this.maxX,k=this.maxY;this.minX=d<h?d:h,this.minY=e<i?e:i,this.maxX=f>j?f:j,this.maxY=g>k?g:k}},a.prototype.addBoundsArea=function(b,c){var d=b.minX>c.x?b.minX:c.x,e=b.minY>c.y?b.minY:c.y,f=b.maxX<c.x+c.width?b.maxX:c.x+c.width,g=b.maxY<c.y+c.height?b.maxY:c.y+c.height;if(d<=f&&e<=g){var h=this.minX,i=this.minY,j=this.maxX,k=this.maxY;this.minX=d<h?d:h,this.minY=e<i?e:i,this.maxX=f>j?f:j,this.maxY=g>k?g:k}},a}();c.default=f},{"../math":67}],45:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../utils"),f=a("./DisplayObject"),g=h(f),l=function(a){function b(){i(this,b);var c=j(this,a.call(this));return c.children=[],c}return k(b,a),b.prototype.onChildrenChange=function(){},b.prototype.addChild=function(b){var c=arguments.length;if(c>1)for(var d=0;d<c;d++)this.addChild(arguments[d]);else b.parent&&b.parent.removeChild(b),b.parent=this,this.transform._parentID=-1,this._boundsID++,this.children.push(b),this.onChildrenChange(this.children.length-1),b.emit("added",this);return b},b.prototype.addChildAt=function(b,c){if(c<0||c>this.children.length)throw new Error(b+"addChildAt: The index "+c+" supplied is out of bounds "+this.children.length);return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.splice(c,0,b),this.onChildrenChange(c),b.emit("added",this),b},b.prototype.swapChildren=function(b,c){if(b!==c){var d=this.getChildIndex(b),e=this.getChildIndex(c);this.children[d]=c,this.children[e]=b,this.onChildrenChange(d<e?d:e)}},b.prototype.getChildIndex=function(b){var c=this.children.indexOf(b);if(c===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return c},b.prototype.setChildIndex=function(b,c){if(c<0||c>=this.children.length)throw new Error("The supplied index is out of bounds");var d=this.getChildIndex(b);(0,e.removeItems)(this.children,d,1),this.children.splice(c,0,b),this.onChildrenChange(c)},b.prototype.getChildAt=function(b){if(b<0||b>=this.children.length)throw new Error("getChildAt: Index ("+b+") does not exist.");return this.children[b]},b.prototype.removeChild=function(b){var c=arguments.length;if(c>1)for(var d=0;d<c;d++)this.removeChild(arguments[d]);else{var f=this.children.indexOf(b);if(f===-1)return null;b.parent=null,(0,e.removeItems)(this.children,f,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(f),b.emit("removed",this)}return b},b.prototype.removeChildAt=function(b){var c=this.getChildAt(b);return c.parent=null,(0,e.removeItems)(this.children,b,1),this.onChildrenChange(b),c.emit("removed",this),c},b.prototype.removeChildren=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments[1],d=b,e="number"==typeof c?c:this.children.length,f=e-d,g=void 0;if(f>0&&f<=e){g=this.children.splice(d,f);for(var h=0;h<g.length;++h)g[h].parent=null;this.onChildrenChange(b);for(var i=0;i<g.length;++i)g[i].emit("removed",this);return g}if(0===f&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},b.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var b=0,c=this.children.length;b<c;++b){var d=this.children[b];d.visible&&d.updateTransform()}},b.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var b=0;b<this.children.length;b++){var c=this.children[b];c.visible&&c.renderable&&(c.calculateBounds(),c._mask?(c._mask.calculateBounds(),this._bounds.addBoundsMask(c._bounds,c._mask._bounds)):c.filterArea?this._bounds.addBoundsArea(c._bounds,c.filterArea):this._bounds.addBounds(c._bounds))}this._lastBoundsID=this._boundsID},b.prototype._calculateBounds=function(){},b.prototype.renderWebGL=function(b){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(b);else{this._renderWebGL(b);for(var c=0,d=this.children.length;c<d;++c)this.children[c].renderWebGL(b)}},b.prototype.renderAdvancedWebGL=function(b){b.flush();var c=this._filters,d=this._mask;if(c){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var e=0;e<c.length;e++)c[e].enabled&&this._enabledFilters.push(c[e]);this._enabledFilters.length&&b.filterManager.pushFilter(this,this._enabledFilters)}d&&b.maskManager.pushMask(this,this._mask),this._renderWebGL(b);for(var f=0,g=this.children.length;f<g;f++)this.children[f].renderWebGL(b);b.flush(),d&&b.maskManager.popMask(this,this._mask),c&&this._enabledFilters&&this._enabledFilters.length&&b.filterManager.popFilter()},b.prototype._renderWebGL=function(b){},b.prototype._renderCanvas=function(b){},b.prototype.renderCanvas=function(b){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&b.maskManager.pushMask(this._mask),this._renderCanvas(b);for(var c=0,d=this.children.length;c<d;++c)this.children[c].renderCanvas(b);this._mask&&b.maskManager.popMask(b)}},b.prototype.destroy=function(c){a.prototype.destroy.call(this);var d="boolean"==typeof c?c:c&&c.children,e=this.removeChildren(0,this.children.length);if(d)for(var f=0;f<e.length;++f)e[f].destroy(c)},d(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(b){var c=this.getLocalBounds().width;0!==c?this.scale.x=b/c:this.scale.x=1,this._width=b}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(b){var c=this.getLocalBounds().height;0!==c?this.scale.y=b/c:this.scale.y=1,this._height=b}}]),b}(g.default);c.default=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},{"../utils":118,"./DisplayObject":46}],46:[function(a,b,c){"use strict";function q(a){return a&&a.__esModule?a:{default:a}}function r(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function s(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function t(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("eventemitter3"),f=q(e),g=a("../const"),h=a("../settings"),i=q(h),j=a("./TransformStatic"),k=q(j),l=a("./Transform"),m=q(l),n=a("./Bounds"),o=q(n),p=a("../math"),u=function(a){function b(){r(this,b);var c=s(this,a.call(this)),d=i.default.TRANSFORM_MODE===g.TRANSFORM_MODE.STATIC?k.default:m.default;return c.tempDisplayObjectParent=null,c.transform=new d,c.alpha=1,c.visible=!0,c.renderable=!0,c.parent=null,c.worldAlpha=1,c.filterArea=null,c._filters=null,c._enabledFilters=null,c._bounds=new o.default,c._boundsID=0,c._lastBoundsID=-1,c._boundsRect=null,c._localBoundsRect=null,c._mask=null,c}return t(b,a),b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.getBounds=function(b,c){return b||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),c||(this._boundsRect||(this._boundsRect=new p.Rectangle),c=this._boundsRect),this._bounds.getRectangle(c)},b.prototype.getLocalBounds=function(b){var c=this.transform,d=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,b||(this._localBoundsRect||(this._localBoundsRect=new p.Rectangle),b=this._localBoundsRect);var e=this.getBounds(!1,b);return this.parent=d,this.transform=c,e},b.prototype.toGlobal=function(b,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(b,c)},b.prototype.toLocal=function(b,c,d,e){return c&&(b=c.toGlobal(b,d,e)),e||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(b,d)},b.prototype.renderWebGL=function(b){},b.prototype.renderCanvas=function(b){},b.prototype.setParent=function(b){if(!b||!b.addChild)throw new Error("setParent: Argument must be a Container");return b.addChild(this),b},b.prototype.setTransform=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,j=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=b,this.position.y=c,this.scale.x=d?d:1,this.scale.y=e?e:1,this.rotation=f,this.skew.x=g,this.skew.y=h,this.pivot.x=i,this.pivot.y=j,this},b.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},d(b,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(b){this.transform.position.x=b}},{key:"y",get:function(){return this.position.y},set:function(b){this.transform.position.y=b}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(b){this.transform.position.copy(b)}},{key:"scale",get:function(){return this.transform.scale},set:function(b){this.transform.scale.copy(b)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(b){this.transform.pivot.copy(b)}},{key:"skew",get:function(){return this.transform.skew},set:function(b){this.transform.skew.copy(b)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(b){this.transform.rotation=b}},{key:"worldVisible",get:function(){var b=this;do{if(!b.visible)return!1;b=b.parent}while(b);return!0}},{key:"mask",get:function(){return this._mask},set:function(b){this._mask&&(this._mask.renderable=!0),this._mask=b,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(b){this._filters=b&&b.slice()}}]),b}(f.default);c.default=u,u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform},{"../const":43,"../math":67,"../settings":98,"./Bounds":44,"./Transform":47,"./TransformStatic":49,eventemitter3:3}],47:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../math"),f=a("./TransformBase"),g=h(f),l=function(a){function b(){i(this,b);var c=j(this,a.call(this));return c.position=new e.Point(0,0),c.scale=new e.Point(1,1),c.skew=new e.ObservablePoint(c.updateSkew,c,0,0),c.pivot=new e.Point(0,0),c._rotation=0,c._sr=Math.sin(0),c._cr=Math.cos(0),c._cy=Math.cos(0),c._sy=Math.sin(0),c._nsx=Math.sin(0),c._cx=Math.cos(0),c}return k(b,a),b.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x)},b.prototype.updateLocalTransform=function(){var b=this.localTransform,c=this._cr*this.scale.x,d=this._sr*this.scale.x,e=-this._sr*this.scale.y,f=this._cr*this.scale.y;b.a=this._cy*c+this._sy*e,b.b=this._cy*d+this._sy*f,b.c=this._nsx*c+this._cx*e,b.d=this._nsx*d+this._cx*f},b.prototype.updateTransform=function(b){var c=b.worldTransform,d=this.worldTransform,e=this.localTransform,f=this._cr*this.scale.x,g=this._sr*this.scale.x,h=-this._sr*this.scale.y,i=this._cr*this.scale.y;e.a=this._cy*f+this._sy*h,e.b=this._cy*g+this._sy*i,e.c=this._nsx*f+this._cx*h,e.d=this._nsx*g+this._cx*i,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),d.a=e.a*c.a+e.b*c.c,d.b=e.a*c.b+e.b*c.d,d.c=e.c*c.a+e.d*c.c,d.d=e.c*c.b+e.d*c.d,d.tx=e.tx*c.a+e.ty*c.c+c.tx,d.ty=e.tx*c.b+e.ty*c.d+c.ty,this._worldID++},b.prototype.setFromMatrix=function(b){b.decompose(this)},d(b,[{key:"rotation",get:function(){return this._rotation},set:function(b){this._rotation=b,this._sr=Math.sin(b),this._cr=Math.cos(b)}}]),b}(g.default);c.default=l},{"../math":67,"./TransformBase":48}],48:[function(a,b,c){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../math"),f=function(){function a(){e(this,a),this.worldTransform=new d.Matrix,this.localTransform=new d.Matrix,this._worldID=0,this._parentID=0}return a.prototype.updateLocalTransform=function(){},a.prototype.updateTransform=function(b){var c=b.worldTransform,d=this.worldTransform,e=this.localTransform;d.a=e.a*c.a+e.b*c.c,d.b=e.a*c.b+e.b*c.d,d.c=e.c*c.a+e.d*c.c,d.d=e.c*c.b+e.d*c.d,d.tx=e.tx*c.a+e.ty*c.c+c.tx,d.ty=e.tx*c.b+e.ty*c.d+c.ty,this._worldID++},a}();c.default=f,f.prototype.updateWorldTransform=f.prototype.updateTransform,f.IDENTITY=new f},{"../math":67}],49:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../math"),f=a("./TransformBase"),g=h(f),l=function(a){function b(){i(this,b);var c=j(this,a.call(this));return c.position=new e.ObservablePoint(c.onChange,c,0,0),c.scale=new e.ObservablePoint(c.onChange,c,1,1),c.pivot=new e.ObservablePoint(c.onChange,c,0,0),c.skew=new e.ObservablePoint(c.updateSkew,c,0,0),c._rotation=0,c._sr=Math.sin(0),c._cr=Math.cos(0),c._cy=Math.cos(0),c._sy=Math.sin(0),c._nsx=Math.sin(0),c._cx=Math.cos(0),c._localID=0,c._currentLocalID=0,c}return k(b,a),b.prototype.onChange=function(){this._localID++},b.prototype.updateSkew=function(){this._cy=Math.cos(this.skew._y),this._sy=Math.sin(this.skew._y),this._nsx=Math.sin(this.skew._x),this._cx=Math.cos(this.skew._x),this._localID++},b.prototype.updateLocalTransform=function(){var b=this.localTransform;if(this._localID!==this._currentLocalID){var c=this._cr*this.scale._x,d=this._sr*this.scale._x,e=-this._sr*this.scale._y,f=this._cr*this.scale._y;b.a=this._cy*c+this._sy*e,b.b=this._cy*d+this._sy*f,b.c=this._nsx*c+this._cx*e,b.d=this._nsx*d+this._cx*f,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1}},b.prototype.updateTransform=function(b){var c=b.worldTransform,d=this.worldTransform,e=this.localTransform;if(this._localID!==this._currentLocalID){var f=this._cr*this.scale._x,g=this._sr*this.scale._x,h=-this._sr*this.scale._y,i=this._cr*this.scale._y;e.a=this._cy*f+this._sy*h,e.b=this._cy*g+this._sy*i,e.c=this._nsx*f+this._cx*h,e.d=this._nsx*g+this._cx*i,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1}this._parentID!==b._worldID&&(d.a=e.a*c.a+e.b*c.c,d.b=e.a*c.b+e.b*c.d,d.c=e.c*c.a+e.d*c.c,d.d=e.c*c.b+e.d*c.d,d.tx=e.tx*c.a+e.ty*c.c+c.tx,d.ty=e.tx*c.b+e.ty*c.d+c.ty,this._parentID=b._worldID,this._worldID++)},b.prototype.setFromMatrix=function(b){b.decompose(this),this._localID++},d(b,[{key:"rotation",get:function(){return this._rotation},set:function(b){this._rotation=b,this._sr=Math.sin(b),this._cr=Math.cos(b),this._localID++}}]),b}(g.default);c.default=l},{"../math":67,"./TransformBase":48}],50:[function(a,b,c){"use strict";function w(a){return a&&a.__esModule?a:{default:a}}function x(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function y(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function z(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../display/Container"),e=w(d),f=a("../textures/RenderTexture"),g=w(f),h=a("../textures/Texture"),i=w(h),j=a("./GraphicsData"),k=w(j),l=a("../sprites/Sprite"),m=w(l),n=a("../math"),o=a("../utils"),p=a("../const"),q=a("../display/Bounds"),r=w(q),s=a("./utils/bezierCurveTo"),t=w(s),u=a("../renderers/canvas/CanvasRenderer"),v=w(u),A=void 0,B=new n.Matrix,C=new n.Point,D=new Float32Array(4),E=new Float32Array(4),F=function(a){function b(){x(this,b);var c=y(this,a.call(this));return c.fillAlpha=1,c.lineWidth=0,c.lineColor=0,c.graphicsData=[],c.tint=16777215,c._prevTint=16777215,c.blendMode=p.BLEND_MODES.NORMAL,c.currentPath=null,c._webGL={},c.isMask=!1,c.boundsPadding=0,c._localBounds=new r.default,c.dirty=0,c.fastRectDirty=-1,c.clearDirty=0,c.boundsDirty=-1,c.cachedSpriteDirty=!1,c._spriteRect=null,c._fastRect=!1,c}return z(b,a),b.prototype.clone=function a(){var a=new b;a.renderable=this.renderable,a.fillAlpha=this.fillAlpha,a.lineWidth=this.lineWidth,a.lineColor=this.lineColor,a.tint=this.tint,a.blendMode=this.blendMode,a.isMask=this.isMask,a.boundsPadding=this.boundsPadding,a.dirty=0,a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());return a.currentPath=a.graphicsData[a.graphicsData.length-1],a.updateLocalBounds(),a},b.prototype.lineStyle=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=b,this.lineColor=c,this.lineAlpha=d,this.currentPath)if(this.currentPath.shape.points.length){var e=new n.Polygon(this.currentPath.shape.points.slice(-2));e.closed=!1,this.drawShape(e)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},b.prototype.moveTo=function(b,c){var d=new n.Polygon([b,c]);return d.closed=!1,this.drawShape(d),this},b.prototype.lineTo=function(b,c){return this.currentPath.shape.points.push(b,c),this.dirty++,this},b.prototype.quadraticCurveTo=function(b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var f=20,g=this.currentPath.shape.points,h=0,i=0;0===g.length&&this.moveTo(0,0);for(var j=g[g.length-2],k=g[g.length-1],l=1;l<=f;++l){var m=l/f;h=j+(b-j)*m,i=k+(c-k)*m,g.push(h+(b+(d-b)*m-h)*m,i+(c+(e-c)*m-i)*m)}return this.dirty++,this},b.prototype.bezierCurveTo=function(b,c,d,e,f,g){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var h=this.currentPath.shape.points,i=h[h.length-2],j=h[h.length-1];return h.length-=2,(0,t.default)(i,j,b,c,d,e,f,g,h),this.dirty++,this},b.prototype.arcTo=function(b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(b,c):this.moveTo(b,c);var g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1],j=i-c,k=h-b,l=e-c,m=d-b,n=Math.abs(j*m-k*l);if(n<1e-8||0===f)g[g.length-2]===b&&g[g.length-1]===c||g.push(b,c);else{var o=j*j+k*k,p=l*l+m*m,q=j*l+k*m,r=f*Math.sqrt(o)/n,s=f*Math.sqrt(p)/n,t=r*q/o,u=s*q/p,v=r*m+s*k,w=r*l+s*j,x=k*(s+t),y=j*(s+t),z=m*(r+u),A=l*(r+u),B=Math.atan2(y-w,x-v),C=Math.atan2(A-w,z-v);this.arc(v+b,w+c,f,B,C,k*l>m*j)}return this.dirty++,this},b.prototype.arc=function(b,c,d,e,f){var g=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e===f)return this;!g&&f<=e?f+=2*Math.PI:g&&e<=f&&(e+=2*Math.PI);var h=f-e,i=40*Math.ceil(Math.abs(h)/(2*Math.PI));if(0===h)return this;var j=b+Math.cos(e)*d,k=c+Math.sin(e)*d,l=this.currentPath.shape.points;this.currentPath?l[l.length-2]===j&&l[l.length-1]===k||l.push(j,k):this.moveTo(j,k);for(var m=h/(2*i),n=2*m,o=Math.cos(m),p=Math.sin(m),q=i-1,r=q%1/q,s=0;s<=q;++s){var t=s+r*s,u=m+e+n*t,v=Math.cos(u),w=-Math.sin(u);l.push((o*v+p*w)*d+b,(o*-w+p*v)*d+c)}return this.dirty++,this},b.prototype.beginFill=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=b,this.fillAlpha=c,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,
    this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(b,c,d,e){return this.drawShape(new n.Rectangle(b,c,d,e)),this},b.prototype.drawRoundedRect=function(b,c,d,e,f){return this.drawShape(new n.RoundedRectangle(b,c,d,e,f)),this},b.prototype.drawCircle=function(b,c,d){return this.drawShape(new n.Circle(b,c,d)),this},b.prototype.drawEllipse=function(b,c,d,e){return this.drawShape(new n.Ellipse(b,c,d,e)),this},b.prototype.drawPolygon=function(b){var c=b,d=!0;if(c instanceof n.Polygon&&(d=c.closed,c=c.points),!Array.isArray(c)){c=new Array(arguments.length);for(var e=0;e<c.length;++e)c[e]=arguments[e]}var f=new n.Polygon(c);return f.closed=d,this.drawShape(f),this},b.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===p.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(b){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(b):(b.setObjectRenderer(b.plugins.graphics),b.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(c){var d=this.graphicsData[0].shape;if(!this._spriteRect){if(!b._SPRITE_TEXTURE){b._SPRITE_TEXTURE=g.default.create(10,10);var e=document.createElement("canvas");e.width=10,e.height=10;var f=e.getContext("2d");f.fillStyle="white",f.fillRect(0,0,10,10),b._SPRITE_TEXTURE=i.default.fromCanvas(e)}this._spriteRect=new m.default(b._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var h=D,j=E;(0,o.hex2rgb)(this.graphicsData[0].fillColor,h),(0,o.hex2rgb)(this.tint,j),h[0]*=j[0],h[1]*=j[1],h[2]*=j[2],this._spriteRect.tint=(0,o.rgb2hex)(h)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,b._SPRITE_TEXTURE._frame.width=d.width,b._SPRITE_TEXTURE._frame.height=d.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-d.x/d.width,-d.y/d.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(c)},b.prototype._renderCanvas=function(b){this.isMask!==!0&&b.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.dirty++,this.cachedSpriteDirty=!0);var b=this._localBounds;this._bounds.addFrame(this.transform,b.minX,b.minY,b.maxX,b.maxY)},b.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,C);for(var c=this.graphicsData,d=0;d<c.length;++d){var e=c[d];if(e.fill&&e.shape&&e.shape.contains(C.x,C.y))return!0}return!1},b.prototype.updateLocalBounds=function(){var b=1/0,c=-(1/0),d=1/0,e=-(1/0);if(this.graphicsData.length)for(var f=0,g=0,h=0,i=0,j=0,k=0;k<this.graphicsData.length;k++){var l=this.graphicsData[k],m=l.type,n=l.lineWidth;if(f=l.shape,m===p.SHAPES.RECT||m===p.SHAPES.RREC)g=f.x-n/2,h=f.y-n/2,i=f.width+n,j=f.height+n,b=g<b?g:b,c=g+i>c?g+i:c,d=h<d?h:d,e=h+j>e?h+j:e;else if(m===p.SHAPES.CIRC)g=f.x,h=f.y,i=f.radius+n/2,j=f.radius+n/2,b=g-i<b?g-i:b,c=g+i>c?g+i:c,d=h-j<d?h-j:d,e=h+j>e?h+j:e;else if(m===p.SHAPES.ELIP)g=f.x,h=f.y,i=f.width+n/2,j=f.height+n/2,b=g-i<b?g-i:b,c=g+i>c?g+i:c,d=h-j<d?h-j:d,e=h+j>e?h+j:e;else for(var o=f.points,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0;y+2<o.length;y+=2)g=o[y],h=o[y+1],q=o[y+2],r=o[y+3],s=Math.abs(q-g),t=Math.abs(r-h),j=n,i=Math.sqrt(s*s+t*t),i<1e-9||(u=(j/i*t+s)/2,v=(j/i*s+t)/2,w=(q+g)/2,x=(r+h)/2,b=w-u<b?w-u:b,c=w+u>c?w+u:c,d=x-v<d?x-v:d,e=x+v>e?x+v:e)}else b=0,c=0,d=0,e=0;var z=this.boundsPadding;this._localBounds.minX=b-z,this._localBounds.maxX=c+2*z,this._localBounds.minY=d-z,this._localBounds.maxY=e+2*z},b.prototype.drawShape=function(b){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var c=new k.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,b);return this.graphicsData.push(c),c.type===p.SHAPES.POLY&&(c.shape.closed=c.shape.closed||this.filling,this.currentPath=c),this.dirty++,c},b.prototype.generateCanvasTexture=function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,d=this.getLocalBounds(),e=g.default.create(d.width,d.height,b,c);A||(A=new v.default),B.tx=-d.x,B.ty=-d.y,A.render(this,e,!1,B);var f=i.default.fromCanvas(e.baseTexture._canvasRenderTarget.canvas,b);return f.baseTexture.resolution=c,f.baseTexture.update(),f},b.prototype.closePath=function(){var b=this.currentPath;return b&&b.shape&&b.shape.close(),this},b.prototype.addHole=function(){var b=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(b.shape),this.currentPath=null,this},b.prototype.destroy=function(c){a.prototype.destroy.call(this,c);for(var d=0;d<this.graphicsData.length;++d)this.graphicsData[d].destroy();for(var e in this._webgl)for(var f=0;f<this._webgl[e].data.length;++f)this._webgl[e].data[f].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},b}(e.default);c.default=F,F._SPRITE_TEXTURE=null},{"../const":43,"../display/Bounds":44,"../display/Container":45,"../math":67,"../renderers/canvas/CanvasRenderer":74,"../sprites/Sprite":99,"../textures/RenderTexture":109,"../textures/Texture":110,"../utils":118,"./GraphicsData":51,"./utils/bezierCurveTo":53}],51:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b,c,e,f,g,h,i){d(this,a),this.lineWidth=b,this.lineColor=c,this.lineAlpha=e,this._lineTint=c,this.fillColor=f,this.fillAlpha=g,this._fillTint=f,this.fill=h,this.holes=[],this.shape=i,this.type=i.type}return a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},a.prototype.addHole=function(b){this.holes.push(b)},a.prototype.destroy=function(){this.shape=null,this.holes=null},a}();c.default=e},{}],52:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../renderers/canvas/CanvasRenderer"),e=g(d),f=a("../../const"),i=function(){function a(b){h(this,a),this.renderer=b}return a.prototype.render=function(b){var c=this.renderer,d=c.context,e=b.worldAlpha,g=b.transform.worldTransform,h=c.resolution;this._prevTint!==this.tint&&(this.dirty=!0),d.setTransform(g.a*h,g.b*h,g.c*h,g.d*h,g.tx*h,g.ty*h),b.dirty&&(this.updateGraphicsTint(b),b.dirty=!1),c.setBlendMode(b.blendMode);for(var i=0;i<b.graphicsData.length;i++){var j=b.graphicsData[i],k=j.shape,l=j._fillTint,m=j._lineTint;if(d.lineWidth=j.lineWidth,j.type===f.SHAPES.POLY){d.beginPath(),this.renderPolygon(k.points,k.closed,d);for(var n=0;n<j.holes.length;n++)this.renderPolygon(j.holes[n].points,!0,d);j.fill&&(d.globalAlpha=j.fillAlpha*e,d.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),d.fill()),j.lineWidth&&(d.globalAlpha=j.lineAlpha*e,d.strokeStyle="#"+("00000"+(0|m).toString(16)).substr(-6),d.stroke())}else if(j.type===f.SHAPES.RECT)(j.fillColor||0===j.fillColor)&&(d.globalAlpha=j.fillAlpha*e,d.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),d.fillRect(k.x,k.y,k.width,k.height)),j.lineWidth&&(d.globalAlpha=j.lineAlpha*e,d.strokeStyle="#"+("00000"+(0|m).toString(16)).substr(-6),d.strokeRect(k.x,k.y,k.width,k.height));else if(j.type===f.SHAPES.CIRC)d.beginPath(),d.arc(k.x,k.y,k.radius,0,2*Math.PI),d.closePath(),j.fill&&(d.globalAlpha=j.fillAlpha*e,d.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),d.fill()),j.lineWidth&&(d.globalAlpha=j.lineAlpha*e,d.strokeStyle="#"+("00000"+(0|m).toString(16)).substr(-6),d.stroke());else if(j.type===f.SHAPES.ELIP){var o=2*k.width,p=2*k.height,q=k.x-o/2,r=k.y-p/2;d.beginPath();var s=.5522848,t=o/2*s,u=p/2*s,v=q+o,w=r+p,x=q+o/2,y=r+p/2;d.moveTo(q,y),d.bezierCurveTo(q,y-u,x-t,r,x,r),d.bezierCurveTo(x+t,r,v,y-u,v,y),d.bezierCurveTo(v,y+u,x+t,w,x,w),d.bezierCurveTo(x-t,w,q,y+u,q,y),d.closePath(),j.fill&&(d.globalAlpha=j.fillAlpha*e,d.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),d.fill()),j.lineWidth&&(d.globalAlpha=j.lineAlpha*e,d.strokeStyle="#"+("00000"+(0|m).toString(16)).substr(-6),d.stroke())}else if(j.type===f.SHAPES.RREC){var z=k.x,A=k.y,B=k.width,C=k.height,D=k.radius,E=Math.min(B,C)/2|0;D=D>E?E:D,d.beginPath(),d.moveTo(z,A+D),d.lineTo(z,A+C-D),d.quadraticCurveTo(z,A+C,z+D,A+C),d.lineTo(z+B-D,A+C),d.quadraticCurveTo(z+B,A+C,z+B,A+C-D),d.lineTo(z+B,A+D),d.quadraticCurveTo(z+B,A,z+B-D,A),d.lineTo(z+D,A),d.quadraticCurveTo(z,A,z,A+D),d.closePath(),(j.fillColor||0===j.fillColor)&&(d.globalAlpha=j.fillAlpha*e,d.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),d.fill()),j.lineWidth&&(d.globalAlpha=j.lineAlpha*e,d.strokeStyle="#"+("00000"+(0|m).toString(16)).substr(-6),d.stroke())}}},a.prototype.updateGraphicsTint=function(b){b._prevTint=b.tint;for(var c=(b.tint>>16&255)/255,d=(b.tint>>8&255)/255,e=(255&b.tint)/255,f=0;f<b.graphicsData.length;++f){var g=b.graphicsData[f],h=0|g.fillColor,i=0|g.lineColor;g._fillTint=((h>>16&255)/255*c*255<<16)+((h>>8&255)/255*d*255<<8)+(255&h)/255*e*255,g._lineTint=((i>>16&255)/255*c*255<<16)+((i>>8&255)/255*d*255<<8)+(255&i)/255*e*255}},a.prototype.renderPolygon=function(b,c,d){d.moveTo(b[0],b[1]);for(var e=1;e<b.length/2;++e)d.lineTo(b[2*e],b[2*e+1]);c&&d.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=i,e.default.registerPlugin("graphics",i)},{"../../const":43,"../../renderers/canvas/CanvasRenderer":74}],53:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],j=20,k=0,l=0,m=0,n=0,o=0;i.push(a,b);for(var p=1,q=0;p<=j;++p)q=p/j,k=1-q,l=k*k,m=l*k,n=q*q,o=n*q,i.push(m*a+3*l*q*c+3*k*n*e+o*g,m*b+3*l*q*d+3*k*n*f+o*h);return i}c.__esModule=!0,c.default=d},{}],54:[function(a,b,c){"use strict";function v(a){return a&&a.__esModule?a:{default:a}}function w(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function x(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function y(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../utils"),e=a("../../const"),f=a("../../renderers/webgl/utils/ObjectRenderer"),g=v(f),h=a("../../renderers/webgl/WebGLRenderer"),i=v(h),j=a("./WebGLGraphicsData"),k=v(j),l=a("./shaders/PrimitiveShader"),m=v(l),n=a("./utils/buildPoly"),o=v(n),p=a("./utils/buildRectangle"),q=v(p),r=a("./utils/buildRoundedRectangle"),s=v(r),t=a("./utils/buildCircle"),u=v(t),z=function(a){function b(c){w(this,b);var d=x(this,a.call(this,c));return d.graphicsDataPool=[],d.primitiveShader=null,d.gl=c.gl,d.CONTEXT_UID=0,d}return y(b,a),b.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new m.default(this.gl)},b.prototype.destroy=function(){g.default.prototype.destroy.call(this);for(var b=0;b<this.graphicsDataPool.length;++b)this.graphicsDataPool[b].destroy();this.graphicsDataPool=null},b.prototype.render=function(b){var c=this.renderer,e=c.gl,f=void 0,g=b._webGL[this.CONTEXT_UID];g&&b.dirty===g.dirty||(this.updateGraphics(b),g=b._webGL[this.CONTEXT_UID]);var h=this.primitiveShader;c.bindShader(h),c.state.setBlendMode(b.blendMode);for(var i=0,j=g.data.length;i<j;i++){f=g.data[i];var k=f.shader;c.bindShader(k),k.uniforms.translationMatrix=b.transform.worldTransform.toArray(!0),k.uniforms.tint=(0,d.hex2rgb)(b.tint),k.uniforms.alpha=b.worldAlpha,c.bindVao(f.vao),f.vao.draw(e.TRIANGLE_STRIP,f.indices.length)}},b.prototype.updateGraphics=function(b){var c=this.renderer.gl,d=b._webGL[this.CONTEXT_UID];if(d||(d=b._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:c,clearDirty:-1,dirty:-1}),d.dirty=b.dirty,b.clearDirty!==d.clearDirty){d.clearDirty=b.clearDirty;for(var f=0;f<d.data.length;f++)this.graphicsDataPool.push(d.data[f]);d.data.length=0,d.lastIndex=0}for(var g=void 0,h=d.lastIndex;h<b.graphicsData.length;h++){var i=b.graphicsData[h];g=this.getWebGLData(d,0),i.type===e.SHAPES.POLY&&(0,o.default)(i,g),i.type===e.SHAPES.RECT?(0,q.default)(i,g):i.type===e.SHAPES.CIRC||i.type===e.SHAPES.ELIP?(0,u.default)(i,g):i.type===e.SHAPES.RREC&&(0,s.default)(i,g),d.lastIndex++}this.renderer.bindVao(null);for(var j=0;j<d.data.length;j++)g=d.data[j],g.dirty&&g.upload()},b.prototype.getWebGLData=function(b,c){var d=b.data[b.data.length-1];return(!d||d.points.length>32e4)&&(d=this.graphicsDataPool.pop()||new k.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),d.reset(c),b.data.push(d)),d.dirty=!0,d},b}(g.default);c.default=z,i.default.registerPlugin("graphics",z)},{"../../const":43,"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../utils":118,"./WebGLGraphicsData":55,"./shaders/PrimitiveShader":56,"./utils/buildCircle":57,"./utils/buildPoly":59,"./utils/buildRectangle":60,"./utils/buildRoundedRectangle":61}],55:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("pixi-gl-core"),e=f(d),h=function(){function a(b,c,d){g(this,a),this.gl=b,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.default.GLBuffer.createVertexBuffer(b),this.indexBuffer=e.default.GLBuffer.createIndexBuffer(b),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=c,this.vao=new e.default.VertexArrayObject(b,d).addIndex(this.indexBuffer).addAttribute(this.buffer,c.attributes.aVertexPosition,b.FLOAT,!1,24,0).addAttribute(this.buffer,c.attributes.aColor,b.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();c.default=h},{"pixi-gl-core":12}],56:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../../Shader"),e=f(d),j=function(a){function b(c){return g(this,b),h(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return i(b,a),b}(e.default);c.default=j},{"../../../Shader":42}],57:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){var c=a.shape,d=c.x,h=c.y,i=void 0,j=void 0;a.type===f.SHAPES.CIRC?(i=c.radius,j=c.radius):(i=c.width,j=c.height);var k=Math.floor(30*Math.sqrt(c.radius))||Math.floor(15*Math.sqrt(c.width+c.height)),l=2*Math.PI/k;if(a.fill){var m=(0,g.hex2rgb)(a.fillColor),n=a.fillAlpha,o=m[0]*n,p=m[1]*n,q=m[2]*n,r=b.points,s=b.indices,t=r.length/6;s.push(t);for(var u=0;u<k+1;u++)r.push(d,h,o,p,q,n),r.push(d+Math.sin(l*u)*i,h+Math.cos(l*u)*j,o,p,q,n),s.push(t++,t++);s.push(t-1)}if(a.lineWidth){var v=a.points;a.points=[];for(var w=0;w<k+1;w++)a.points.push(d+Math.sin(l*w)*i,h+Math.cos(l*w)*j);(0,e.default)(a,b),a.points=v}}c.__esModule=!0,c.default=i;var d=a("./buildLine"),e=h(d),f=a("../../../const"),g=a("../../../utils")},{"../../../const":43,"../../../utils":118,"./buildLine":58}],58:[function(a,b,c){"use strict";function f(a,b){var c=a.points;if(0!==c.length){var f=new d.Point(c[0],c[1]),g=new d.Point(c[c.length-2],c[c.length-1]);if(f.x===g.x&&f.y===g.y){c=c.slice(),c.pop(),c.pop(),g=new d.Point(c[c.length-2],c[c.length-1]);var h=g.x+.5*(f.x-g.x),i=g.y+.5*(f.y-g.y);c.unshift(h,i),c.push(h,i)}var j=b.points,k=b.indices,l=c.length/2,m=c.length,n=j.length/6,o=a.lineWidth/2,p=(0,e.hex2rgb)(a.lineColor),q=a.lineAlpha,r=p[0]*q,s=p[1]*q,t=p[2]*q,u=c[0],v=c[1],w=c[2],x=c[3],y=0,z=0,A=-(v-x),B=u-w,C=0,D=0,E=0,F=0,G=Math.sqrt(A*A+B*B);A/=G,B/=G,A*=o,B*=o,j.push(u-A,v-B,r,s,t,q),j.push(u+A,v+B,r,s,t,q);for(var H=1;H<l-1;++H){u=c[2*(H-1)],v=c[2*(H-1)+1],w=c[2*H],x=c[2*H+1],y=c[2*(H+1)],z=c[2*(H+1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,C=-(x-z),D=w-y,G=Math.sqrt(C*C+D*D),C/=G,D/=G,C*=o,D*=o;var I=-B+v-(-B+x),J=-A+w-(-A+u),K=(-A+u)*(-B+x)-(-A+w)*(-B+v),L=-D+z-(-D+x),M=-C+w-(-C+y),N=(-C+y)*(-D+x)-(-C+w)*(-D+z),O=I*M-L*J;if(Math.abs(O)<.1)O+=10.1,j.push(w-A,x-B,r,s,t,q),j.push(w+A,x+B,r,s,t,q);else{var P=(J*N-M*K)/O,Q=(L*K-I*N)/O,R=(P-w)*(P-w)+(Q-x)*(Q-x);R>196*o*o?(E=A-C,F=B-D,G=Math.sqrt(E*E+F*F),E/=G,F/=G,E*=o,F*=o,j.push(w-E,x-F),j.push(r,s,t,q),j.push(w+E,x+F),j.push(r,s,t,q),j.push(w-E,x-F),j.push(r,s,t,q),m++):(j.push(P,Q),j.push(r,s,t,q),j.push(w-(P-w),x-(Q-x)),j.push(r,s,t,q))}}u=c[2*(l-2)],v=c[2*(l-2)+1],w=c[2*(l-1)],x=c[2*(l-1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,j.push(w-A,x-B),j.push(r,s,t,q),j.push(w+A,x+B),j.push(r,s,t,q),k.push(n);for(var S=0;S<m;++S)k.push(n++);k.push(n-1)}}c.__esModule=!0,c.default=f;var d=a("../../../math"),e=a("../../../utils")},{"../../../math":67,"../../../utils":118}],59:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){a.points=a.shape.points.slice();var c=a.points;if(a.fill&&c.length>=6){for(var d=[],g=a.holes,i=0;i<g.length;i++){var j=g[i];d.push(c.length/2),c=c.concat(j.points)}var k=b.points,l=b.indices,m=c.length/2,n=(0,f.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=(0,h.default)(c,d,2);if(!s)return;for(var t=k.length/6,u=0;u<s.length;u+=3)l.push(s[u]+t),l.push(s[u]+t),l.push(s[u+1]+t),l.push(s[u+2]+t),l.push(s[u+2]+t);for(var v=0;v<m;v++)k.push(c[2*v],c[2*v+1],p,q,r,o)}a.lineWidth>0&&(0,e.default)(a,b)}c.__esModule=!0,c.default=j;var d=a("./buildLine"),e=i(d),f=a("../../../utils"),g=a("earcut"),h=i(g)},{"../../../utils":118,"./buildLine":58,earcut:2}],60:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){var c=a.shape,d=c.x,g=c.y,h=c.width,i=c.height;if(a.fill){var j=(0,f.hex2rgb)(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6;o.push(d,g),o.push(l,m,n,k),o.push(d+h,g),o.push(l,m,n,k),o.push(d,g+i),o.push(l,m,n,k),o.push(d+h,g+i),o.push(l,m,n,k),p.push(q,q,q+1,q+2,q+3,q+3)}if(a.lineWidth){var r=a.points;a.points=[d,g,d+h,g,d+h,g+i,d,g+i,d,g],(0,e.default)(a,b),a.points=r}}c.__esModule=!0,c.default=h;var d=a("./buildLine"),e=g(d),f=a("../../../utils")},{"../../../utils":118,"./buildLine":58}],61:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){var c=a.shape,d=c.x,f=c.y,i=c.width,j=c.height,l=c.radius,m=[];if(m.push(d,f+l),k(d,f+j-l,d,f+j,d+l,f+j,m),k(d+i-l,f+j,d+i,f+j,d+i,f+j-l,m),k(d+i,f+l,d+i,f,d+i-l,f,m),k(d+l,f,d,f,d,f+l+1e-10,m),a.fill){for(var n=(0,h.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6,v=(0,e.default)(m,null,2),w=0,x=v.length;w<x;w+=3)t.push(v[w]+u),t.push(v[w]+u),t.push(v[w+1]+u),t.push(v[w+2]+u),t.push(v[w+2]+u);for(var y=0,z=m.length;y<z;y++)s.push(m[y],m[++y],p,q,r,o)}if(a.lineWidth){var A=a.points;a.points=m,(0,g.default)(a,b),a.points=A}}function k(a,b,c,d,e,f){function p(a,b,c){var d=b-a;return a+d*c}for(var g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=20,i=g,j=0,k=0,l=0,m=0,n=0,o=0,q=0,r=0;q<=h;++q)r=q/h,j=p(a,c,r),k=p(b,d,r),l=p(c,e,r),m=p(d,f,r),n=p(j,l,r),o=p(k,m,r),i.push(n,o);return i}c.__esModule=!0,c.default=j;var d=a("earcut"),e=i(d),f=a("./buildLine"),g=i(f),h=a("../../../utils")},{"../../../utils":118,"./buildLine":58,earcut:2}],62:[function(a,b,c){"use strict";function T(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function U(a){return a&&a.__esModule?a:{default:a}}function V(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,c=arguments[2],d=arguments[3];return!d&&K.isWebGLSupported()?new S.default(a,b,c):new Q.default(a,b,c)}c.__esModule=!0,c.Filter=c.SpriteMaskFilter=c.Quad=c.RenderTarget=c.ObjectRenderer=c.WebGLManager=c.Shader=c.CanvasRenderTarget=c.TextureUvs=c.VideoBaseTexture=c.BaseRenderTexture=c.RenderTexture=c.BaseTexture=c.Texture=c.CanvasGraphicsRenderer=c.GraphicsRenderer=c.GraphicsData=c.Graphics=c.TextStyle=c.Text=c.SpriteRenderer=c.CanvasTinter=c.CanvasSpriteRenderer=c.Sprite=c.TransformBase=c.TransformStatic=c.Transform=c.Container=c.DisplayObject=c.glCore=c.WebGLRenderer=c.CanvasRenderer=c.ticker=c.utils=c.settings=void 0;var d=a("./const");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return d[a]}})});var e=a("./math");Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return e[a]}})});var f=a("pixi-gl-core");Object.defineProperty(c,"glCore",{enumerable:!0,get:function(){return U(f).default}});var g=a("./display/DisplayObject");Object.defineProperty(c,"DisplayObject",{enumerable:!0,get:function(){return U(g).default}});var h=a("./display/Container");Object.defineProperty(c,"Container",{enumerable:!0,get:function(){return U(h).default}});var i=a("./display/Transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return U(i).default}});var j=a("./display/TransformStatic");Object.defineProperty(c,"TransformStatic",{enumerable:!0,get:function(){return U(j).default}});var k=a("./display/TransformBase");Object.defineProperty(c,"TransformBase",{enumerable:!0,get:function(){return U(k).default}});var l=a("./sprites/Sprite");Object.defineProperty(c,"Sprite",{enumerable:!0,get:function(){return U(l).default}});var m=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(c,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return U(m).default}});var n=a("./sprites/canvas/CanvasTinter");Object.defineProperty(c,"CanvasTinter",{enumerable:!0,get:function(){return U(n).default}});var o=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(c,"SpriteRenderer",{enumerable:!0,get:function(){return U(o).default}});var p=a("./text/Text");Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return U(p).default}});var q=a("./text/TextStyle");Object.defineProperty(c,"TextStyle",{enumerable:!0,get:function(){return U(q).default}});var r=a("./graphics/Graphics");Object.defineProperty(c,"Graphics",{enumerable:!0,get:function(){return U(r).default}});var s=a("./graphics/GraphicsData");Object.defineProperty(c,"GraphicsData",{enumerable:!0,get:function(){return U(s).default}});var t=a("./graphics/webgl/GraphicsRenderer");Object.defineProperty(c,"GraphicsRenderer",{enumerable:!0,get:function(){return U(t).default}});var u=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(c,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return U(u).default}});var v=a("./textures/Texture");Object.defineProperty(c,"Texture",{enumerable:!0,get:function(){return U(v).default}});var w=a("./textures/BaseTexture");Object.defineProperty(c,"BaseTexture",{enumerable:!0,get:function(){return U(w).default}});var x=a("./textures/RenderTexture");Object.defineProperty(c,"RenderTexture",{enumerable:!0,get:function(){return U(x).default}});var y=a("./textures/BaseRenderTexture");Object.defineProperty(c,"BaseRenderTexture",{enumerable:!0,get:function(){return U(y).default}});var z=a("./textures/VideoBaseTexture");Object.defineProperty(c,"VideoBaseTexture",{enumerable:!0,get:function(){return U(z).default}});var A=a("./textures/TextureUvs");Object.defineProperty(c,"TextureUvs",{enumerable:!0,get:function(){return U(A).default}});var B=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(c,"CanvasRenderTarget",{enumerable:!0,get:function(){return U(B).default}});var C=a("./Shader");Object.defineProperty(c,"Shader",{enumerable:!0,get:function(){return U(C).default}});var D=a("./renderers/webgl/managers/WebGLManager");Object.defineProperty(c,"WebGLManager",{enumerable:!0,get:function(){return U(D).default}});var E=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(c,"ObjectRenderer",{enumerable:!0,get:function(){return U(E).default}});var F=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(c,"RenderTarget",{enumerable:!0,get:function(){return U(F).default}});var G=a("./renderers/webgl/utils/Quad");Object.defineProperty(c,"Quad",{enumerable:!0,get:function(){return U(G).default}});var H=a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(c,"SpriteMaskFilter",{enumerable:!0,get:function(){return U(H).default}});var I=a("./renderers/webgl/filters/Filter");Object.defineProperty(c,"Filter",{enumerable:!0,get:function(){return U(I).default}}),c.autoDetectRenderer=V;var J=a("./utils"),K=T(J),L=a("./ticker"),M=T(L),N=a("./settings"),O=U(N),P=a("./renderers/canvas/CanvasRenderer"),Q=U(P),R=a("./renderers/webgl/WebGLRenderer"),S=U(R);c.settings=O.default,c.utils=K,c.ticker=M,c.CanvasRenderer=Q.default,c.WebGLRenderer=S.default},{"./Shader":42,"./const":43,"./display/Container":45,"./display/DisplayObject":46,"./display/Transform":47,"./display/TransformBase":48,"./display/TransformStatic":49,"./graphics/Graphics":50,"./graphics/GraphicsData":51,"./graphics/canvas/CanvasGraphicsRenderer":52,"./graphics/webgl/GraphicsRenderer":54,"./math":67,"./renderers/canvas/CanvasRenderer":74,"./renderers/canvas/utils/CanvasRenderTarget":76,"./renderers/webgl/WebGLRenderer":81,"./renderers/webgl/filters/Filter":83,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":86,"./renderers/webgl/managers/WebGLManager":90,"./renderers/webgl/utils/ObjectRenderer":91,"./renderers/webgl/utils/Quad":92,"./renderers/webgl/utils/RenderTarget":93,"./settings":98,"./sprites/Sprite":99,"./sprites/canvas/CanvasSpriteRenderer":100,"./sprites/canvas/CanvasTinter":101,"./sprites/webgl/SpriteRenderer":103,"./text/Text":105,"./text/TextStyle":106,"./textures/BaseRenderTexture":107,"./textures/BaseTexture":108,"./textures/RenderTexture":109,"./textures/Texture":110,"./textures/TextureUvs":111,"./textures/VideoBaseTexture":112,"./ticker":114,"./utils":118,"pixi-gl-core":12}],63:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function m(a){return a<0?-1:a>0?1:0}function n(){for(var a=0;a<16;a++){var b=[];l.push(b);for(var c=0;c<16;c++)for(var d=m(g[a]*g[c]+i[a]*h[c]),f=m(h[a]*g[c]+j[a]*h[c]),n=m(g[a]*i[c]+i[a]*j[c]),o=m(h[a]*i[c]+j[a]*j[c]),p=0;p<16;p++)if(g[p]===d&&h[p]===f&&i[p]===n&&j[p]===o){b.push(p);break}}for(var q=0;q<16;q++){var r=new e.default;r.set(g[q],h[q],i[q],j[q],0,0),k.push(r)}}c.__esModule=!0;var d=a("./Matrix"),e=f(d),g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],j=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k=[],l=[];n();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(b){return g[b]},uY:function(b){return h[b]},vX:function(b){return i[b]},vY:function(b){return j[b]},inv:function(b){return 8&b?15&b:7&-b},add:function(b,c){return l[b][c]},sub:function(b,c){return l[b][o.inv(c)]},rotate180:function(b){return 4^b},isSwapWidthHeight:function(b){return 2===(3&b)},byDirection:function(b,c){return 2*Math.abs(b)<=Math.abs(c)?c>=0?o.S:o.N:2*Math.abs(c)<=Math.abs(b)?b>0?o.E:o.W:c>0?b>0?o.SE:o.SW:b>0?o.NE:o.NW},matrixAppendRotationInv:function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=k[o.inv(c)];f.tx=d,f.ty=e,b.append(f)}};c.default=o},{"./Matrix":64}],64:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./Point"),f=g(e),i=function(){function a(){h(this,a),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}return a.prototype.fromArray=function(b){this.a=b[0],this.b=b[1],this.c=b[3],this.d=b[4],this.tx=b[2],this.ty=b[5]},a.prototype.set=function(b,c,d,e,f,g){return this.a=b,this.b=c,this.c=d,this.d=e,this.tx=f,this.ty=g,this},a.prototype.toArray=function(b,c){this.array||(this.array=new Float32Array(9));var d=c||this.array;return b?(d[0]=this.a,d[1]=this.b,d[2]=0,d[3]=this.c,d[4]=this.d,d[5]=0,d[6]=this.tx,d[7]=this.ty,d[8]=1):(d[0]=this.a,d[1]=this.c,d[2]=this.tx,d[3]=this.b,d[4]=this.d,d[5]=this.ty,d[6]=0,d[7]=0,d[8]=1),d},a.prototype.apply=function(b,c){c=c||new f.default;var d=b.x,e=b.y;return c.x=this.a*d+this.c*e+this.tx,c.y=this.b*d+this.d*e+this.ty,c},a.prototype.applyInverse=function(b,c){c=c||new f.default;var d=1/(this.a*this.d+this.c*-this.b),e=b.x,g=b.y;return c.x=this.d*d*e+-this.c*d*g+(this.ty*this.c-this.tx*this.d)*d,c.y=this.a*d*g+-this.b*d*e+(-this.ty*this.a+this.tx*this.b)*d,c},a.prototype.translate=function(b,c){return this.tx+=b,this.ty+=c,this},a.prototype.scale=function(b,c){return this.a*=b,this.d*=c,this.c*=b,this.b*=c,this.tx*=b,this.ty*=c,this},a.prototype.rotate=function(b){var c=Math.cos(b),d=Math.sin(b),e=this.a,f=this.c,g=this.tx;return this.a=e*c-this.b*d,this.b=e*d+this.b*c,this.c=f*c-this.d*d,this.d=f*d+this.d*c,this.tx=g*c-this.ty*d,this.ty=g*d+this.ty*c,this},a.prototype.append=function(b){var c=this.a,d=this.b,e=this.c,f=this.d;return this.a=b.a*c+b.b*e,this.b=b.a*d+b.b*f,this.c=b.c*c+b.d*e,this.d=b.c*d+b.d*f,this.tx=b.tx*c+b.ty*e+this.tx,this.ty=b.tx*d+b.ty*f+this.ty,this},a.prototype.setTransform=function(b,c,d,e,f,g,h,i,j){var k=Math.sin(h),l=Math.cos(h),m=Math.cos(j),n=Math.sin(j),o=-Math.sin(i),p=Math.cos(i),q=l*f,r=k*f,s=-k*g,t=l*g;return this.a=m*q+n*s,this.b=m*r+n*t,this.c=o*q+p*s,this.d=o*r+p*t,this.tx=b+(d*q+e*s),this.ty=c+(d*r+e*t),this},a.prototype.prepend=function(b){var c=this.tx;if(1!==b.a||0!==b.b||0!==b.c||1!==b.d){
    var d=this.a,e=this.c;this.a=d*b.a+this.b*b.c,this.b=d*b.b+this.b*b.d,this.c=e*b.a+this.d*b.c,this.d=e*b.b+this.d*b.d}return this.tx=c*b.a+this.ty*b.c+b.tx,this.ty=c*b.b+this.ty*b.d+b.ty,this},a.prototype.decompose=function(b){var c=this.a,d=this.b,e=this.c,f=this.d,g=Math.atan2(-e,f),h=Math.atan2(d,c),i=Math.abs(1-g/h);return i<1e-5?(b.rotation=h,c<0&&f>=0&&(b.rotation+=b.rotation<=0?Math.PI:-Math.PI),b.skew.x=b.skew.y=0):(b.skew.x=g,b.skew.y=h),b.scale.x=Math.sqrt(c*c+d*d),b.scale.y=Math.sqrt(e*e+f*f),b.position.x=this.tx,b.position.y=this.ty,b},a.prototype.invert=function(){var b=this.a,c=this.b,d=this.c,e=this.d,f=this.tx,g=b*e-c*d;return this.a=e/g,this.b=-c/g,this.c=-d/g,this.d=b/g,this.tx=(d*this.ty-e*f)/g,this.ty=-(b*this.ty-c*f)/g,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var c=new a;return c.a=this.a,c.b=this.b,c.c=this.c,c.d=this.d,c.tx=this.tx,c.ty=this.ty,c},a.prototype.copy=function(b){return b.a=this.a,b.b=this.b,b.c=this.c,b.d=this.d,b.tx=this.tx,b.ty=this.ty,b},d(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();c.default=i},{"./Point":66}],65:[function(a,b,c){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,a),this._x=d,this._y=f,this.cb=b,this.scope=c}return a.prototype.set=function(b,c){var d=b||0,e=c||(0!==c?d:0);this._x===d&&this._y===e||(this._x=d,this._y=e,this.cb.call(this.scope))},a.prototype.copy=function(b){this._x===b.x&&this._y===b.y||(this._x=b.x,this._y=b.y,this.cb.call(this.scope))},d(a,[{key:"x",get:function(){return this._x},set:function(b){this._x!==b&&(this._x=b,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(b){this._y!==b&&(this._y=b,this.cb.call(this.scope))}}]),a}();c.default=f},{}],66:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this.x=b,this.y=c}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copy=function(b){this.set(b.x,b.y)},a.prototype.equals=function(b){return b.x===this.x&&b.y===this.y},a.prototype.set=function(b,c){this.x=b||0,this.y=c||(0!==c?this.x:0)},a}();c.default=e},{}],67:[function(a,b,c){"use strict";function m(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./Point");Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return m(d).default}});var e=a("./ObservablePoint");Object.defineProperty(c,"ObservablePoint",{enumerable:!0,get:function(){return m(e).default}});var f=a("./Matrix");Object.defineProperty(c,"Matrix",{enumerable:!0,get:function(){return m(f).default}});var g=a("./GroupD8");Object.defineProperty(c,"GroupD8",{enumerable:!0,get:function(){return m(g).default}});var h=a("./shapes/Circle");Object.defineProperty(c,"Circle",{enumerable:!0,get:function(){return m(h).default}});var i=a("./shapes/Ellipse");Object.defineProperty(c,"Ellipse",{enumerable:!0,get:function(){return m(i).default}});var j=a("./shapes/Polygon");Object.defineProperty(c,"Polygon",{enumerable:!0,get:function(){return m(j).default}});var k=a("./shapes/Rectangle");Object.defineProperty(c,"Rectangle",{enumerable:!0,get:function(){return m(k).default}});var l=a("./shapes/RoundedRectangle");Object.defineProperty(c,"RoundedRectangle",{enumerable:!0,get:function(){return m(l).default}})},{"./GroupD8":63,"./Matrix":64,"./ObservablePoint":65,"./Point":66,"./shapes/Circle":68,"./shapes/Ellipse":69,"./shapes/Polygon":70,"./shapes/Rectangle":71,"./shapes/RoundedRectangle":72}],68:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("./Rectangle"),e=g(d),f=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h(this,a),this.x=b,this.y=c,this.radius=d,this.type=f.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(b,c){if(this.radius<=0)return!1;var d=this.radius*this.radius,e=this.x-b,f=this.y-c;return e*=e,f*=f,e+f<=d},a.prototype.getBounds=function(){return new e.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();c.default=i},{"../../const":43,"./Rectangle":71}],69:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("./Rectangle"),e=g(d),f=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h(this,a),this.x=b,this.y=c,this.width=d,this.height=e,this.type=f.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(b,c){if(this.width<=0||this.height<=0)return!1;var d=(b-this.x)/this.width,e=(c-this.y)/this.height;return d*=d,e*=e,d+e<=1},a.prototype.getBounds=function(){return new e.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();c.default=i},{"../../const":43,"./Rectangle":71}],70:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../Point"),e=g(d),f=a("../../const"),i=function(){function a(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];if(h(this,a),Array.isArray(c[0])&&(c=c[0]),c[0]instanceof e.default){for(var g=[],i=0,j=c.length;i<j;i++)g.push(c[i].x,c[i].y);c=g}this.closed=!0,this.points=c,this.type=f.SHAPES.POLY}return a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var b=this.points;b[0]===b[b.length-2]&&b[1]===b[b.length-1]||b.push(b[0],b[1])},a.prototype.contains=function(b,c){for(var d=!1,e=this.points.length/2,f=0,g=e-1;f<e;g=f++){var h=this.points[2*f],i=this.points[2*f+1],j=this.points[2*g],k=this.points[2*g+1],l=i>c!=k>c&&b<(j-h)*((c-i)/(k-i))+h;l&&(d=!d)}return d},a}();c.default=i},{"../../const":43,"../Point":66}],71:[function(a,b,c){"use strict";function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../const"),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;f(this,a),this.x=b,this.y=c,this.width=d,this.height=g,this.type=e.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(b){return this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height,this},a.prototype.contains=function(b,c){return!(this.width<=0||this.height<=0)&&(b>=this.x&&b<this.x+this.width&&c>=this.y&&c<this.y+this.height)},a.prototype.pad=function(b,c){b=b||0,c=c||(0!==c?b:0),this.x-=b,this.y-=c,this.width+=2*b,this.height+=2*c},a.prototype.fit=function(b){this.x<b.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=b.x),this.y<b.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=b.y),this.x+this.width>b.x+b.width&&(this.width=b.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>b.y+b.height&&(this.height=b.height-this.y,this.height<0&&(this.height=0))},a.prototype.enlarge=function(c){if(c!==a.EMPTY){var d=Math.min(this.x,c.x),e=Math.max(this.x+this.width,c.x+c.width),f=Math.min(this.y,c.y),g=Math.max(this.y+this.height,c.y+c.height);this.x=d,this.width=e-d,this.y=f,this.height=g-f}},d(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();c.default=g},{"../../const":43}],72:[function(a,b,c){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../const"),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;e(this,a),this.x=b,this.y=c,this.width=f,this.height=g,this.radius=h,this.type=d.SHAPES.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(b,c){if(this.width<=0||this.height<=0)return!1;if(b>=this.x&&b<=this.x+this.width&&c>=this.y&&c<=this.y+this.height){if(c>=this.y+this.radius&&c<=this.y+this.height-this.radius||b>=this.x+this.radius&&b<=this.x+this.width-this.radius)return!0;var d=b-(this.x+this.radius),e=c-(this.y+this.radius),f=this.radius*this.radius;if(d*d+e*e<=f)return!0;if(d=b-(this.x+this.width-this.radius),d*d+e*e<=f)return!0;if(e=c-(this.y+this.height-this.radius),d*d+e*e<=f)return!0;if(d=b-(this.x+this.radius),d*d+e*e<=f)return!0}return!1},a}();c.default=f},{"../../const":43}],73:[function(a,b,c){"use strict";function p(a){return a&&a.__esModule?a:{default:a}}function q(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function r(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function s(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../utils"),f=a("../math"),g=a("../const"),h=a("../settings"),i=p(h),j=a("../display/Container"),k=p(j),l=a("../textures/RenderTexture"),m=p(l),n=a("eventemitter3"),o=p(n),t=new f.Matrix,u=i.default.RESOLUTION,v=i.default.RENDER_OPTIONS,w=function(a){function b(c,d,f,h){q(this,b);var i=r(this,a.call(this));if((0,e.sayHello)(c),h)for(var j in v)"undefined"==typeof h[j]&&(h[j]=v[j]);else h=v;return i.type=g.RENDERER_TYPE.UNKNOWN,i.width=d||800,i.height=f||600,i.view=h.view||document.createElement("canvas"),i.resolution=h.resolution||u,i.transparent=h.transparent,i.autoResize=h.autoResize||!1,i.blendModes=null,i.preserveDrawingBuffer=h.preserveDrawingBuffer,i.clearBeforeRender=h.clearBeforeRender,i.roundPixels=h.roundPixels,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=h.backgroundColor||i._backgroundColor,i._tempDisplayObjectParent=new k.default,i._lastObjectRendered=i._tempDisplayObjectParent,i}return s(b,a),b.prototype.resize=function(b,c){this.width=b*this.resolution,this.height=c*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},b.prototype.generateTexture=function(b,c,d){var e=b.getLocalBounds(),f=m.default.create(0|e.width,0|e.height,c,d);return t.tx=-e.x,t.ty=-e.y,this.render(b,f,!1,t,!0),f},b.prototype.destroy=function(b){b&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=g.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},d(b,[{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(b){this._backgroundColor=b,this._backgroundColorString=(0,e.hex2string)(b),(0,e.hex2rgb)(b,this._backgroundColorRgba)}}]),b}(o.default);c.default=w},{"../const":43,"../display/Container":45,"../math":67,"../settings":98,"../textures/RenderTexture":109,"../utils":118,eventemitter3:3}],74:[function(a,b,c){"use strict";function p(a){return a&&a.__esModule?a:{default:a}}function q(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function r(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function s(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../SystemRenderer"),e=p(d),f=a("./utils/CanvasMaskManager"),g=p(f),h=a("./utils/CanvasRenderTarget"),i=p(h),j=a("./utils/mapCanvasBlendModesToPixi"),k=p(j),l=a("../../utils"),m=a("../../const"),n=a("../../settings"),o=p(n),t=function(a){function b(c,d){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};q(this,b);var f=r(this,a.call(this,"Canvas",c,d,e));return f.type=m.RENDERER_TYPE.CANVAS,f.rootContext=f.view.getContext("2d",{alpha:f.transparent}),f.refresh=!0,f.maskManager=new g.default(f),f.smoothProperty="imageSmoothingEnabled",f.rootContext.imageSmoothingEnabled||(f.rootContext.webkitImageSmoothingEnabled?f.smoothProperty="webkitImageSmoothingEnabled":f.rootContext.mozImageSmoothingEnabled?f.smoothProperty="mozImageSmoothingEnabled":f.rootContext.oImageSmoothingEnabled?f.smoothProperty="oImageSmoothingEnabled":f.rootContext.msImageSmoothingEnabled&&(f.smoothProperty="msImageSmoothingEnabled")),f.initPlugins(),f.blendModes=(0,k.default)(),f._activeBlendMode=null,f.context=null,f.renderingToScreen=!1,f.resize(c,d),f}return s(b,a),b.prototype.render=function(b,c,d,e,f){if(this.view){this.renderingToScreen=!c,this.emit("prerender"),c?(c=c.baseTexture||c,c._canvasRenderTarget||(c._canvasRenderTarget=new i.default(c.width,c.height,c.resolution),c.source=c._canvasRenderTarget.canvas,c.valid=!0),this.context=c._canvasRenderTarget.context,this.resolution=c._canvasRenderTarget.resolution):this.context=this.rootContext;var g=this.context;if(c||(this._lastObjectRendered=b),!f){var h=b.parent,j=this._tempDisplayObjectParent.transform.worldTransform;e?e.copy(j):j.identity(),b.parent=this._tempDisplayObjectParent,b.updateTransform(),b.parent=h}g.setTransform(1,0,0,1,0,0),g.globalAlpha=1,g.globalCompositeOperation=this.blendModes[m.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(g.fillStyle="black",g.clear()),(void 0!==d?d:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?g.clearRect(0,0,this.width,this.height):(g.fillStyle=this._backgroundColorString,g.fillRect(0,0,this.width,this.height)));var k=this.context;this.context=g,b.renderCanvas(this),this.context=k,this.emit("postrender")}},b.prototype.setBlendMode=function(b){this._activeBlendMode!==b&&(this._activeBlendMode=b,this.context.globalCompositeOperation=this.blendModes[b])},b.prototype.destroy=function(c){this.destroyPlugins(),a.prototype.destroy.call(this,c),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},b.prototype.resize=function(c,d){a.prototype.resize.call(this,c,d),this.smoothProperty&&(this.rootContext[this.smoothProperty]=o.default.SCALE_MODE===m.SCALE_MODES.LINEAR)},b}(e.default);c.default=t,l.pluginTarget.mixin(t)},{"../../const":43,"../../settings":98,"../../utils":118,"../SystemRenderer":73,"./utils/CanvasMaskManager":75,"./utils/CanvasRenderTarget":76,"./utils/mapCanvasBlendModesToPixi":78}],75:[function(a,b,c){"use strict";function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../../const"),f=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.pushMask=function(b){var c=this.renderer;c.context.save();var d=b.alpha,e=b.transform.worldTransform,f=c.resolution;c.context.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),b._texture||(this.renderGraphicsShape(b),c.context.clip()),b.worldAlpha=d},a.prototype.renderGraphicsShape=function(b){var c=this.renderer.context,e=b.graphicsData.length;if(0!==e){c.beginPath();for(var f=0;f<e;f++){var g=b.graphicsData[f],h=g.shape;if(g.type===d.SHAPES.POLY){var i=h.points;c.moveTo(i[0],i[1]);for(var j=1;j<i.length/2;j++)c.lineTo(i[2*j],i[2*j+1]);i[0]===i[i.length-2]&&i[1]===i[i.length-1]&&c.closePath()}else if(g.type===d.SHAPES.RECT)c.rect(h.x,h.y,h.width,h.height),c.closePath();else if(g.type===d.SHAPES.CIRC)c.arc(h.x,h.y,h.radius,0,2*Math.PI),c.closePath();else if(g.type===d.SHAPES.ELIP){var k=2*h.width,l=2*h.height,m=h.x-k/2,n=h.y-l/2,o=.5522848,p=k/2*o,q=l/2*o,r=m+k,s=n+l,t=m+k/2,u=n+l/2;c.moveTo(m,u),c.bezierCurveTo(m,u-q,t-p,n,t,n),c.bezierCurveTo(t+p,n,r,u-q,r,u),c.bezierCurveTo(r,u+q,t+p,s,t,s),c.bezierCurveTo(t-p,s,m,u+q,m,u),c.closePath()}else if(g.type===d.SHAPES.RREC){var v=h.x,w=h.y,x=h.width,y=h.height,z=h.radius,A=Math.min(x,y)/2|0;z=z>A?A:z,c.moveTo(v,w+z),c.lineTo(v,w+y-z),c.quadraticCurveTo(v,w+y,v+z,w+y),c.lineTo(v+x-z,w+y),c.quadraticCurveTo(v+x,w+y,v+x,w+y-z),c.lineTo(v+x,w+z),c.quadraticCurveTo(v+x,w,v+x-z,w),c.lineTo(v+z,w),c.quadraticCurveTo(v,w,v,w+z),c.closePath()}}}},a.prototype.popMask=function(b){b.context.restore()},a.prototype.destroy=function(){},a}();c.default=f},{"../../../const":43}],76:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../../settings"),f=g(e),i=f.default.RESOLUTION,j=function(){function a(b,c,d){h(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=d||i,this.resize(b,c)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(b,c){this.canvas.width=b*this.resolution,this.canvas.height=c*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},d(a,[{key:"width",get:function(){return this.canvas.width},set:function(b){this.canvas.width=b}},{key:"height",get:function(){return this.canvas.height},set:function(b){this.canvas.height=b}}]),a}();c.default=j},{"../../../settings":98}],77:[function(a,b,c){"use strict";function d(a){var b=document.createElement("canvas");b.width=6,b.height=1;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,6,1),b}function e(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6,c.height=1;var e=c.getContext("2d");e.globalCompositeOperation="multiply",e.drawImage(a,0,0),e.drawImage(b,2,0);var f=e.getImageData(2,0,1,1);if(!f)return!1;var g=f.data;return 255===g[0]&&0===g[1]&&0===g[2]}c.__esModule=!0,c.default=e},{}],78:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,f.default)()?(a[d.BLEND_MODES.NORMAL]="source-over",a[d.BLEND_MODES.ADD]="lighter",a[d.BLEND_MODES.MULTIPLY]="multiply",a[d.BLEND_MODES.SCREEN]="screen",a[d.BLEND_MODES.OVERLAY]="overlay",a[d.BLEND_MODES.DARKEN]="darken",a[d.BLEND_MODES.LIGHTEN]="lighten",a[d.BLEND_MODES.COLOR_DODGE]="color-dodge",a[d.BLEND_MODES.COLOR_BURN]="color-burn",a[d.BLEND_MODES.HARD_LIGHT]="hard-light",a[d.BLEND_MODES.SOFT_LIGHT]="soft-light",a[d.BLEND_MODES.DIFFERENCE]="difference",a[d.BLEND_MODES.EXCLUSION]="exclusion",a[d.BLEND_MODES.HUE]="hue",a[d.BLEND_MODES.SATURATION]="saturate",a[d.BLEND_MODES.COLOR]="color",a[d.BLEND_MODES.LUMINOSITY]="luminosity"):(a[d.BLEND_MODES.NORMAL]="source-over",a[d.BLEND_MODES.ADD]="lighter",a[d.BLEND_MODES.MULTIPLY]="source-over",a[d.BLEND_MODES.SCREEN]="source-over",a[d.BLEND_MODES.OVERLAY]="source-over",a[d.BLEND_MODES.DARKEN]="source-over",a[d.BLEND_MODES.LIGHTEN]="source-over",a[d.BLEND_MODES.COLOR_DODGE]="source-over",a[d.BLEND_MODES.COLOR_BURN]="source-over",a[d.BLEND_MODES.HARD_LIGHT]="source-over",a[d.BLEND_MODES.SOFT_LIGHT]="source-over",a[d.BLEND_MODES.DIFFERENCE]="source-over",a[d.BLEND_MODES.EXCLUSION]="source-over",a[d.BLEND_MODES.HUE]="source-over",a[d.BLEND_MODES.SATURATION]="source-over",a[d.BLEND_MODES.COLOR]="source-over",a[d.BLEND_MODES.LUMINOSITY]="source-over"),a}c.__esModule=!0,c.default=h;var d=a("../../../const"),e=a("./canUseNewCanvasBlendModes"),f=g(e)},{"../../../const":43,"./canUseNewCanvasBlendModes":77}],79:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../const"),e=a("../../settings"),f=g(e),i=f.default.GC_MODE,j=f.default.GC_MAX_IDLE,k=f.default.GC_MAX_CHECK_COUNT,l=function(){function a(b){h(this,a),this.renderer=b,this.count=0,this.checkCount=0,this.maxIdle=j,this.checkCountMax=k,this.mode=i}return a.prototype.update=function(){this.count++,this.mode!==d.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},a.prototype.run=function(){for(var b=this.renderer.textureManager,c=b._managedTextures,d=!1,e=0;e<c.length;e++){var f=c[e];!f._glRenderTargets&&this.count-f.touched>this.maxIdle&&(b.destroyTexture(f,!0),c[e]=null,d=!0)}if(d){for(var g=0,h=0;h<c.length;h++)null!==c[h]&&(c[g++]=c[h]);c.length=g}},a.prototype.unload=function(b){var c=this.renderer.textureManager;b._texture&&c.destroyTexture(b._texture,!0);for(var d=b.children.length-1;d>=0;d--)this.unload(b.children[d])},a}();c.default=l},{"../../const":43,"../../settings":98}],80:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("pixi-gl-core"),e=a("../../const"),f=a("./utils/RenderTarget"),g=i(f),h=a("../../utils"),k=function(){function a(b){j(this,a),this.renderer=b,this.gl=b.gl,this._managedTextures=[]}return a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(b,c){c=c||0;var f=this.gl,h=!!b._glRenderTargets;if(!b.hasLoaded)return null;f.activeTexture(f.TEXTURE0+c);var i=b._glTextures[this.renderer.CONTEXT_UID];if(i)h?b._glRenderTargets[this.renderer.CONTEXT_UID].resize(b.width,b.height):i.upload(b.source);else{if(h){var j=new g.default(this.gl,b.width,b.height,b.scaleMode,b.resolution);j.resize(b.width,b.height),b._glRenderTargets[this.renderer.CONTEXT_UID]=j,i=j.texture}else i=new d.GLTexture(this.gl,null,null,null,null),i.bind(c),i.premultiplyAlpha=!0,i.upload(b.source);b._glTextures[this.renderer.CONTEXT_UID]=i,b.on("update",this.updateTexture,this),b.on("dispose",this.destroyTexture,this),this._managedTextures.push(b),b.isPowerOfTwo?(b.mipmap&&i.enableMipmap(),b.wrapMode===e.WRAP_MODES.CLAMP?i.enableWrapClamp():b.wrapMode===e.WRAP_MODES.REPEAT?i.enableWrapRepeat():i.enableWrapMirrorRepeat()):i.enableWrapClamp(),b.scaleMode===e.SCALE_MODES.NEAREST?i.enableNearestScaling():i.enableLinearScaling()}return this.renderer.boundTextures[c]=b,i},a.prototype.destroyTexture=function(b,c){if(b=b.baseTexture||b,b.hasLoaded&&b._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(b),b._glTextures[this.renderer.CONTEXT_UID].destroy(),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this),delete b._glTextures[this.renderer.CONTEXT_UID],!c)){var d=this._managedTextures.indexOf(b);d!==-1&&(0,h.removeItems)(this._managedTextures,d,1)}},a.prototype.removeAll=function(){for(var b=0;b<this._managedTextures.length;++b){var c=this._managedTextures[b];c._glTextures[this.renderer.CONTEXT_UID]&&delete c._glTextures[this.renderer.CONTEXT_UID]}},a.prototype.destroy=function(){for(var b=0;b<this._managedTextures.length;++b){var c=this._managedTextures[b];this.destroyTexture(c,!0),c.off("update",this.updateTexture,this),c.off("dispose",this.destroyTexture,this)}this._managedTextures=null},a}();c.default=k},{"../../const":43,"../../utils":118,"./utils/RenderTarget":93,"pixi-gl-core":12}],81:[function(a,b,c){"use strict";function F(a){return a&&a.__esModule?a:{default:a}}function G(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function H(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function I(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../SystemRenderer"),e=F(d),f=a("./managers/MaskManager"),g=F(f),h=a("./managers/StencilManager"),i=F(h),j=a("./managers/FilterManager"),k=F(j),l=a("./utils/RenderTarget"),m=F(l),n=a("./utils/ObjectRenderer"),o=F(n),p=a("./TextureManager"),q=F(p),r=a("../../textures/BaseTexture"),s=F(r),t=a("./TextureGarbageCollector"),u=F(t),v=a("./WebGLState"),w=F(v),x=a("./utils/mapWebGLDrawModesToPixi"),y=F(x),z=a("./utils/validateContext"),A=F(z),B=a("../../utils"),C=a("pixi-gl-core"),D=F(C),E=a("../../const"),J=0,K=function(a){function b(c,d){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G(this,b);var f=H(this,a.call(this,"WebGL",c,d,e));return f.type=E.RENDERER_TYPE.WEBGL,f.handleContextLost=f.handleContextLost.bind(f),f.handleContextRestored=f.handleContextRestored.bind(f),f.view.addEventListener("webglcontextlost",f.handleContextLost,!1),f.view.addEventListener("webglcontextrestored",f.handleContextRestored,!1),f._contextOptions={alpha:f.transparent,antialias:e.antialias,premultipliedAlpha:f.transparent&&"notMultiplied"!==f.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer},f._backgroundColorRgba[3]=f.transparent?0:1,f.maskManager=new g.default(f),f.stencilManager=new i.default(f),f.emptyRenderer=new o.default(f),f.currentRenderer=f.emptyRenderer,f.initPlugins(),e.context&&(0,A.default)(e.context),f.gl=e.context||D.default.createContext(f.view,f._contextOptions),f.CONTEXT_UID=J++,f.state=new w.default(f.gl),f.renderingToScreen=!0,f.boundTextures=null,f._initContext(),f.filterManager=new k.default(f),f.drawModes=(0,y.default)(f.gl),f._activeShader=null,f._activeVao=null,f._activeRenderTarget=null,f._nextTextureLocation=0,f.setBlendMode(0),f}return I(b,a),b.prototype._initContext=function(){var b=this.gl;b.isContextLost()&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").restoreContext();var c=b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(c),this.emptyTextures=new Array(c),this.textureManager=new q.default(this),this.textureGC=new u.default(this),this.state.resetToDefault(),this.rootRenderTarget=new m.default(b,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var d=new D.default.GLTexture.fromData(b,null,1,1),e={_glTextures:{}};e._glTextures[this.CONTEXT_UID]={};for(var f=0;f<c;f++){var g=new s.default;g._glTextures[this.CONTEXT_UID]=d,this.boundTextures[f]=e,this.emptyTextures[f]=g,this.bindTexture(null,f)}this.emit("context",b),this.resize(this.width,this.height)},b.prototype.render=function(b,c,d,e,f){if(this.renderingToScreen=!c,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,c||(this._lastObjectRendered=b),!f){var g=b.parent;b.parent=this._tempDisplayObjectParent,b.updateTransform(),b.parent=g}this.bindRenderTexture(c,e),this.currentRenderer.start(),(void 0!==d?d:this.clearBeforeRender)&&this._activeRenderTarget.clear(),b.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},b.prototype.setObjectRenderer=function(b){this.currentRenderer!==b&&(this.currentRenderer.stop(),this.currentRenderer=b,this.currentRenderer.start())},b.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},b.prototype.resize=function(b,c){e.default.prototype.resize.call(this,b,c),this.rootRenderTarget.resize(b,c),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},b.prototype.setBlendMode=function(b){this.state.setBlendMode(b)},b.prototype.clear=function(b){this._activeRenderTarget.clear(b)},b.prototype.setTransform=function(b){this._activeRenderTarget.transform=b},b.prototype.bindRenderTexture=function(b,c){var d=void 0;if(b){var e=b.baseTexture;e._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(e,0),this.unbindTexture(e),d=e._glRenderTargets[this.CONTEXT_UID],d.setFrame(b.frame)}else d=this.rootRenderTarget;return d.transform=c,this.bindRenderTarget(d),this},b.prototype.bindRenderTarget=function(b){return b!==this._activeRenderTarget&&(this._activeRenderTarget=b,b.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=b.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(b.stencilMaskStack)),this},b.prototype.bindShader=function(b){return this._activeShader!==b&&(this._activeShader=b,b.bind(),b.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},b.prototype.bindTexture=function(b,c,d){if(b=b||this.emptyTextures[c],b=b.baseTexture||b,b.touched=this.textureGC.count,d)c=c||0;else{for(var e=0;e<this.boundTextures.length;e++)if(this.boundTextures[e]===b)return e;void 0===c&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,c=this.boundTextures.length-this._nextTextureLocation-1)}var f=this.gl,g=b._glTextures[this.CONTEXT_UID];return g?(this.boundTextures[c]=b,f.activeTexture(f.TEXTURE0+c),f.bindTexture(f.TEXTURE_2D,g.texture)):this.textureManager.updateTexture(b,c),c},
    b.prototype.unbindTexture=function(b){var c=this.gl;b=b.baseTexture||b;for(var d=0;d<this.boundTextures.length;d++)this.boundTextures[d]===b&&(this.boundTextures[d]=this.emptyTextures[d],c.activeTexture(c.TEXTURE0+d),c.bindTexture(c.TEXTURE_2D,this.emptyTextures[d]._glTextures[this.CONTEXT_UID].texture));return this},b.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},b.prototype.bindVao=function(b){return this._activeVao===b?this:(b?b.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=b,this)},b.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},b.prototype.handleContextLost=function(b){b.preventDefault()},b.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},b.prototype.destroy=function(c){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),a.prototype.destroy.call(this,c),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},b}(e.default);c.default=K,B.pluginTarget.mixin(K)},{"../../const":43,"../../textures/BaseTexture":108,"../../utils":118,"../SystemRenderer":73,"./TextureGarbageCollector":79,"./TextureManager":80,"./WebGLState":82,"./managers/FilterManager":87,"./managers/MaskManager":88,"./managers/StencilManager":89,"./utils/ObjectRenderer":91,"./utils/RenderTarget":93,"./utils/mapWebGLDrawModesToPixi":96,"./utils/validateContext":97,"pixi-gl-core":12}],82:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("./utils/mapWebGLBlendModesToPixi"),e=f(d),h=0,i=1,j=2,k=3,l=4,m=function(){function a(b){g(this,a),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=b,this.maxAttribs=b.getParameter(b.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,e.default)(b),this.nativeVaoExtension=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object")}return a.prototype.push=function(){var b=this.stack[++this.stackIndex];b||(b=this.stack[this.stackIndex]=new Uint8Array(16));for(var c=0;c<this.activeState.length;c++)this.activeState[c]=b[c]},a.prototype.pop=function(){var b=this.stack[--this.stackIndex];this.setState(b)},a.prototype.setState=function(b){this.setBlend(b[h]),this.setDepthTest(b[i]),this.setFrontFace(b[j]),this.setCullFace(b[k]),this.setBlendMode(b[l])},a.prototype.setBlend=function(b){b=b?1:0,this.activeState[h]!==b&&(this.activeState[h]=b,this.gl[b?"enable":"disable"](this.gl.BLEND))},a.prototype.setBlendMode=function(b){b!==this.activeState[l]&&(this.activeState[l]=b,this.gl.blendFunc(this.blendModes[b][0],this.blendModes[b][1]))},a.prototype.setDepthTest=function(b){b=b?1:0,this.activeState[i]!==b&&(this.activeState[i]=b,this.gl[b?"enable":"disable"](this.gl.DEPTH_TEST))},a.prototype.setCullFace=function(b){b=b?1:0,this.activeState[k]!==b&&(this.activeState[k]=b,this.gl[b?"enable":"disable"](this.gl.CULL_FACE))},a.prototype.setFrontFace=function(b){b=b?1:0,this.activeState[j]!==b&&(this.activeState[j]=b,this.gl.frontFace(this.gl[b?"CW":"CCW"]))},a.prototype.resetAttributes=function(){for(var b=0;b<this.attribState.tempAttribState.length;b++)this.attribState.tempAttribState[b]=0;for(var c=0;c<this.attribState.attribState.length;c++)this.attribState.attribState[c]=0;for(var d=1;d<this.maxAttribs;d++)this.gl.disableVertexAttribArray(d)},a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var b=0;b<this.activeState.length;++b)this.activeState[b]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},a}();c.default=m},{"./utils/mapWebGLBlendModesToPixi":95}],83:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./extractUniformsFromSrc"),f=i(e),g=a("../../../utils"),h=a("../../../const"),k={},l=function(){function a(b,c,d){j(this,a),this.vertexSrc=b||a.defaultVertexSrc,this.fragmentSrc=c||a.defaultFragmentSrc,this.blendMode=h.BLEND_MODES.NORMAL,this.uniformData=d||(0,f.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var e in this.uniformData)this.uniforms[e]=this.uniformData[e].value;this.glShaders={},k[this.vertexSrc+this.fragmentSrc]||(k[this.vertexSrc+this.fragmentSrc]=(0,g.uid)()),this.glShaderKey=k[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}return a.prototype.apply=function(b,c,d,e){b.applyFilter(this,c,d,e)},d(a,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),a}();c.default=l},{"../../../const":43,"../../../utils":118,"./extractUniformsFromSrc":84}],84:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function h(a,b,c){var d=i(a,c),e=i(b,c);return Object.assign(d,e)}function i(a){for(var b=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),c={},d=void 0,e=a.replace(/\s+/g," ").split(/\s*;\s*/),f=0;f<e.length;f++){var h=e[f].trim();if(h.indexOf("uniform")>-1){var i=h.split(" "),j=i[1],k=i[2],l=1;k.indexOf("[")>-1&&(d=k.split(/\[|]/),k=d[0],l*=Number(d[1])),k.match(b)||(c[k]={value:g(j,l),name:k,type:j})}}return c}c.__esModule=!0,c.default=h;var d=a("pixi-gl-core"),e=f(d),g=e.default.shader.defaultValue},{"pixi-gl-core":12}],85:[function(a,b,c){"use strict";function e(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d}function f(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d}function g(a,b,c,e){var f=e.worldTransform.copy(d.Matrix.TEMP_MATRIX),g=e._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/g.width,k=c.height/g.height;return f.tx/=g.width*j,f.ty/=g.width*j,f.invert(),h.prepend(f),h.scale(1,1/i),h.scale(j,k),h.translate(e.anchor.x,e.anchor.y),h}c.__esModule=!0,c.calculateScreenSpaceMatrix=e,c.calculateNormalizedScreenSpaceMatrix=f,c.calculateSpriteMatrix=g;var d=a("../../../math")},{"../../../math":67}],86:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../Filter"),e=h(d),f=a("../../../../math"),l=(a("path"),function(a){function b(c){i(this,b);var d=new f.Matrix,e=j(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return c.renderable=!1,e.maskSprite=c,e.maskMatrix=d,e}return k(b,a),b.prototype.apply=function(b,c,d){var e=this.maskSprite;this.uniforms.mask=e._texture,this.uniforms.otherMatrix=b.calculateSpriteMatrix(this.maskMatrix,e),this.uniforms.alpha=e.worldAlpha,b.applyFilter(this,c,d)},b}(e.default));c.default=l},{"../../../../math":67,"../Filter":83,path:22}],87:[function(a,b,c){"use strict";function q(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function r(a){return a&&a.__esModule?a:{default:a}}function s(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function t(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function u(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("./WebGLManager"),e=r(d),f=a("../utils/RenderTarget"),g=r(f),h=a("../utils/Quad"),i=r(h),j=a("../../../math"),k=a("../../../Shader"),l=r(k),m=a("../filters/filterTransforms"),n=q(m),o=a("bit-twiddle"),p=r(o),v=function a(){u(this,a),this.renderTarget=null,this.sourceFrame=new j.Rectangle,this.destinationFrame=new j.Rectangle,this.filters=[],this.target=null,this.resolution=1},w=function(a){function b(c){u(this,b);var d=s(this,a.call(this,c));return d.gl=d.renderer.gl,d.quad=new i.default(d.gl,c.state.attribState),d.shaderCache={},d.pool={},d.filterData=null,d}return t(b,a),b.prototype.pushFilter=function(b,c){var d=this.renderer,e=this.filterData;if(!e){e=this.renderer._activeRenderTarget.filterStack;var f=new v;f.sourceFrame=f.destinationFrame=this.renderer._activeRenderTarget.size,f.renderTarget=d._activeRenderTarget,this.renderer._activeRenderTarget.filterData=e={index:0,stack:[f]},this.filterData=e}var g=e.stack[++e.index];g||(g=e.stack[e.index]=new v);var h=c[0].resolution,i=0|c[0].padding,j=b.filterArea||b.getBounds(!0),k=g.sourceFrame,l=g.destinationFrame;k.x=(j.x*h|0)/h,k.y=(j.y*h|0)/h,k.width=(j.width*h|0)/h,k.height=(j.height*h|0)/h,e.stack[0].renderTarget.transform||k.fit(e.stack[0].destinationFrame),k.pad(i),l.width=k.width,l.height=k.height;var m=this.getPotRenderTarget(d.gl,k.width,k.height,h);g.target=b,g.filters=c,g.resolution=h,g.renderTarget=m,m.setFrame(l,k),d.bindRenderTarget(m),d.clear()},b.prototype.popFilter=function(){var b=this.filterData,c=b.stack[b.index-1],d=b.stack[b.index];this.quad.map(d.renderTarget.size,d.sourceFrame).upload();var e=d.filters;if(1===e.length)e[0].apply(this,d.renderTarget,c.renderTarget,!1),this.freePotRenderTarget(d.renderTarget);else{var f=d.renderTarget,g=this.getPotRenderTarget(this.renderer.gl,d.sourceFrame.width,d.sourceFrame.height,d.resolution);g.setFrame(d.destinationFrame,d.sourceFrame);var h=0;for(h=0;h<e.length-1;++h){e[h].apply(this,f,g,!0);var i=f;f=g,g=i}e[h].apply(this,f,c.renderTarget,!1),this.freePotRenderTarget(f),this.freePotRenderTarget(g)}b.index--,0===b.index&&(this.filterData=null)},b.prototype.applyFilter=function(b,c,d,e){var f=this.renderer,g=f.gl,h=b.glShaders[f.CONTEXT_UID];h||(b.glShaderKey?(h=this.shaderCache[b.glShaderKey],h||(h=new l.default(this.gl,b.vertexSrc,b.fragmentSrc),b.glShaders[f.CONTEXT_UID]=this.shaderCache[b.glShaderKey]=h)):h=b.glShaders[f.CONTEXT_UID]=new l.default(this.gl,b.vertexSrc,b.fragmentSrc),f.bindVao(null),this.quad.initVao(h)),f.bindVao(this.quad.vao),f.bindRenderTarget(d),e&&(g.disable(g.SCISSOR_TEST),f.clear(),g.enable(g.SCISSOR_TEST)),d===f.maskManager.scissorRenderTarget&&f.maskManager.pushScissorMask(null,f.maskManager.scissorData),f.bindShader(h),this.syncUniforms(h,b),f.state.setBlendMode(b.blendMode);var i=this.renderer.boundTextures[0];g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,c.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),g.bindTexture(g.TEXTURE_2D,i._glTextures[this.renderer.CONTEXT_UID].texture)},b.prototype.syncUniforms=function(b,c){var d=c.uniformData,e=c.uniforms,f=1,g=void 0;if(b.uniforms.data.filterArea){g=this.filterData.stack[this.filterData.index];var h=b.uniforms.filterArea;h[0]=g.renderTarget.size.width,h[1]=g.renderTarget.size.height,h[2]=g.sourceFrame.x,h[3]=g.sourceFrame.y,b.uniforms.filterArea=h}if(b.uniforms.data.filterClamp){g=this.filterData.stack[this.filterData.index];var i=b.uniforms.filterClamp;i[0]=0,i[1]=0,i[2]=(g.sourceFrame.width-1)/g.renderTarget.size.width,i[3]=(g.sourceFrame.height-1)/g.renderTarget.size.height,b.uniforms.filterClamp=i}for(var j in d)if("sampler2D"===d[j].type&&0!==e[j]){if(e[j].baseTexture)b.uniforms[j]=this.renderer.bindTexture(e[j].baseTexture,f);else{b.uniforms[j]=f;var k=this.renderer.gl;k.activeTexture(k.TEXTURE0+f),e[j].texture.bind()}f++}else if("mat3"===d[j].type)void 0!==e[j].a?b.uniforms[j]=e[j].toArray(!0):b.uniforms[j]=e[j];else if("vec2"===d[j].type)if(void 0!==e[j].x){var l=b.uniforms[j]||new Float32Array(2);l[0]=e[j].x,l[1]=e[j].y,b.uniforms[j]=l}else b.uniforms[j]=e[j];else"float"===d[j].type?b.uniforms.data[j].value!==d[j]&&(b.uniforms[j]=e[j]):b.uniforms[j]=e[j]},b.prototype.getRenderTarget=function(b,c){var d=this.filterData.stack[this.filterData.index],e=this.getPotRenderTarget(this.renderer.gl,d.sourceFrame.width,d.sourceFrame.height,c||d.resolution);return e.setFrame(d.destinationFrame,d.sourceFrame),e},b.prototype.returnRenderTarget=function(b){this.freePotRenderTarget(b)},b.prototype.calculateScreenSpaceMatrix=function(b){var c=this.filterData.stack[this.filterData.index];return n.calculateScreenSpaceMatrix(b,c.sourceFrame,c.renderTarget.size)},b.prototype.calculateNormalizedScreenSpaceMatrix=function(b){var c=this.filterData.stack[this.filterData.index];return n.calculateNormalizedScreenSpaceMatrix(b,c.sourceFrame,c.renderTarget.size,c.destinationFrame)},b.prototype.calculateSpriteMatrix=function(b,c){var d=this.filterData.stack[this.filterData.index];return n.calculateSpriteMatrix(b,d.sourceFrame,d.renderTarget.size,c)},b.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},b.prototype.getPotRenderTarget=function(b,c,d,e){c=p.default.nextPow2(c*e),d=p.default.nextPow2(d*e);var f=(65535&c)<<16|65535&d;this.pool[f]||(this.pool[f]=[]);var h=this.pool[f].pop();if(!h){var i=this.renderer.boundTextures[0];b.activeTexture(b.TEXTURE0),h=new g.default(b,c,d,null,1),b.bindTexture(b.TEXTURE_2D,i._glTextures[this.renderer.CONTEXT_UID].texture)}return h.resolution=e,h.defaultFrame.width=h.size.width=c/e,h.defaultFrame.height=h.size.height=d/e,h},b.prototype.emptyPool=function(){for(var b in this.pool){var c=this.pool[b];if(c)for(var d=0;d<c.length;d++)c[d].destroy(!0)}this.pool={}},b.prototype.freePotRenderTarget=function(b){var c=b.size.width*b.resolution,d=b.size.height*b.resolution,e=(65535&c)<<16|65535&d;this.pool[e].push(b)},b}(e.default);c.default=w},{"../../../Shader":42,"../../../math":67,"../filters/filterTransforms":85,"../utils/Quad":92,"../utils/RenderTarget":93,"./WebGLManager":90,"bit-twiddle":1}],88:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./WebGLManager"),e=h(d),f=a("../filters/spriteMask/SpriteMaskFilter"),g=h(f),l=function(a){function b(c){i(this,b);var d=j(this,a.call(this,c));return d.scissor=!1,d.scissorData=null,d.scissorRenderTarget=null,d.enableScissor=!0,d.alphaMaskPool=[],d.alphaMaskIndex=0,d}return k(b,a),b.prototype.pushMask=function(b,c){if(c.texture)this.pushSpriteMask(b,c);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&c.isFastRect()){var d=c.worldTransform,e=Math.atan2(d.b,d.a);e=Math.round(e*(180/Math.PI)),e%90?this.pushStencilMask(c):this.pushScissorMask(b,c)}else this.pushStencilMask(c)},b.prototype.popMask=function(b,c){c.texture?this.popSpriteMask(b,c):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(b,c):this.popStencilMask(b,c)},b.prototype.pushSpriteMask=function(b,c){var d=this.alphaMaskPool[this.alphaMaskIndex];d||(d=this.alphaMaskPool[this.alphaMaskIndex]=[new g.default(c)]),d[0].resolution=this.renderer.resolution,d[0].maskSprite=c,b.filterArea=c.getBounds(!0),this.renderer.filterManager.pushFilter(b,d),this.alphaMaskIndex++},b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},b.prototype.pushStencilMask=function(b){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(b)},b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},b.prototype.pushScissorMask=function(b,c){c.renderable=!0;var d=this.renderer._activeRenderTarget,e=c.getBounds();e.fit(d.size),c.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var f=this.renderer.resolution;this.renderer.gl.scissor(e.x*f,(d.root?d.size.height-e.y-e.height:e.y)*f,e.width*f,e.height*f),this.scissorRenderTarget=d,this.scissorData=c,this.scissor=!0},b.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var b=this.renderer.gl;b.disable(b.SCISSOR_TEST)},b}(e.default);c.default=l},{"../filters/spriteMask/SpriteMaskFilter":86,"./WebGLManager":90}],89:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./WebGLManager"),e=f(d),j=function(a){function b(c){g(this,b);var d=h(this,a.call(this,c));return d.stencilMaskStack=null,d}return i(b,a),b.prototype.setMaskStack=function(b){this.stencilMaskStack=b;var c=this.renderer.gl;0===b.length?c.disable(c.STENCIL_TEST):c.enable(c.STENCIL_TEST)},b.prototype.pushStencil=function(b){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var c=this.renderer.gl,d=this.stencilMaskStack;0===d.length&&(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilFunc(c.ALWAYS,1,1)),d.push(b),c.colorMask(!1,!1,!1,!1),c.stencilOp(c.KEEP,c.KEEP,c.INCR),this.renderer.plugins.graphics.render(b),c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.NOTEQUAL,0,d.length),c.stencilOp(c.KEEP,c.KEEP,c.KEEP)},b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var b=this.renderer.gl,c=this.stencilMaskStack,d=c.pop();0===c.length?b.disable(b.STENCIL_TEST):(b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.DECR),this.renderer.plugins.graphics.render(d),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP))},b.prototype.destroy=function(){e.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},b}(e.default);c.default=j},{"./WebGLManager":90}],90:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.renderer=b,this.renderer.on("context",this.onContextChange,this)}return a.prototype.onContextChange=function(){},a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},a}();c.default=e},{}],91:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../managers/WebGLManager"),e=f(d),j=function(a){function b(){return g(this,b),h(this,a.apply(this,arguments))}return i(b,a),b.prototype.start=function(){},b.prototype.stop=function(){this.flush()},b.prototype.flush=function(){},b.prototype.render=function(b){},b}(e.default);c.default=j},{"../managers/WebGLManager":90}],92:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("pixi-gl-core"),e=h(d),f=a("../../../utils/createIndicesForQuads"),g=h(f),j=function(){function a(b,c){i(this,a),this.gl=b,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var d=0;d<4;d++)this.interleaved[4*d]=this.vertices[2*d],this.interleaved[4*d+1]=this.vertices[2*d+1],this.interleaved[4*d+2]=this.uvs[2*d],this.interleaved[4*d+3]=this.uvs[2*d+1];this.indices=(0,g.default)(1),this.vertexBuffer=e.default.GLBuffer.createVertexBuffer(b,this.interleaved,b.STATIC_DRAW),this.indexBuffer=e.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.vao=new e.default.VertexArrayObject(b,c)}return a.prototype.initVao=function(b){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,b.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,b.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(b,c){var d=0,e=0;return this.uvs[0]=d,this.uvs[1]=e,this.uvs[2]=d+c.width/b.width,this.uvs[3]=e,this.uvs[4]=d+c.width/b.width,this.uvs[5]=e+c.height/b.height,this.uvs[6]=d,this.uvs[7]=e+c.height/b.height,d=c.x,e=c.y,this.vertices[0]=d,this.vertices[1]=e,this.vertices[2]=d+c.width,this.vertices[3]=e,this.vertices[4]=d+c.width,this.vertices[5]=e+c.height,this.vertices[6]=d,this.vertices[7]=e+c.height,this},a.prototype.upload=function(){for(var b=0;b<4;b++)this.interleaved[4*b]=this.vertices[2*b],this.interleaved[4*b+1]=this.vertices[2*b+1],this.interleaved[4*b+2]=this.uvs[2*b],this.interleaved[4*b+3]=this.uvs[2*b+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var b=this.gl;b.deleteBuffer(this.vertexBuffer),b.deleteBuffer(this.indexBuffer)},a}();c.default=j},{"../../../utils/createIndicesForQuads":116,"pixi-gl-core":12}],93:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../../math"),e=a("../../../const"),f=a("../../../settings"),g=i(f),h=a("pixi-gl-core"),k=g.default.RESOLUTION,l=g.default.SCALE_MODE,m=function(){function a(b,c,f,g,i,m){j(this,a),this.gl=b,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new d.Rectangle(0,0,1,1),this.resolution=i||k,this.projectionMatrix=new d.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new d.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=g||l,this.root=m,this.root?(this.frameBuffer=new h.GLFramebuffer(b,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===e.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(c,f)}return a.prototype.clear=function(b){var c=b||this.clearColor;this.frameBuffer.clear(c[0],c[1],c[2],c[3])},a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},a.prototype.setFrame=function(b,c){this.destinationFrame=b||this.destinationFrame||this.defaultFrame,this.sourceFrame=c||this.sourceFrame||b},a.prototype.activate=function(){var b=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(b.enable(b.SCISSOR_TEST),b.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):b.disable(b.SCISSOR_TEST),b.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},a.prototype.calculateProjection=function(b,c){var d=this.projectionMatrix;c=c||b,d.identity(),this.root?(d.a=1/b.width*2,d.d=-1/b.height*2,d.tx=-1-c.x*d.a,d.ty=1-c.y*d.d):(d.a=1/b.width*2,d.d=1/b.height*2,d.tx=-1-c.x*d.a,d.ty=-1-c.y*d.d)},a.prototype.resize=function(b,c){if(b|=0,c|=0,this.size.width!==b||this.size.height!==c){this.size.width=b,this.size.height=c,this.defaultFrame.width=b,this.defaultFrame.height=c,this.frameBuffer.resize(b*this.resolution,c*this.resolution);var d=this.frame||this.size;this.calculateProjection(d)}},a.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},a}();c.default=m},{"../../../const":43,"../../../math":67,"../../../settings":98,"pixi-gl-core":12}],94:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function h(a,b){var c=!b;if(0===a)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(c){var d=document.createElement("canvas");d.width=1,d.height=1,b=e.default.createContext(d)}for(var f=b.createShader(b.FRAGMENT_SHADER);;){var h=g.replace(/%forloop%/gi,i(a));if(b.shaderSource(f,h),b.compileShader(f),b.getShaderParameter(f,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a}function i(a){for(var b="",c=0;c<a;++c)c>0&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}c.__esModule=!0,c.default=h;var d=a("pixi-gl-core"),e=f(d),g=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],95:[function(a,b,c){"use strict";function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b[d.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[d.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[d.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[d.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}c.__esModule=!0,c.default=e;var d=a("../../../const")},{"../../../const":43}],96:[function(a,b,c){"use strict";function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b[d.DRAW_MODES.POINTS]=a.POINTS,b[d.DRAW_MODES.LINES]=a.LINES,b[d.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[d.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[d.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[d.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[d.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN,b}c.__esModule=!0,c.default=e;var d=a("../../../const")},{"../../../const":43}],97:[function(a,b,c){"use strict";function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}c.__esModule=!0,c.default=d},{}],98:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./utils/maxRecommendedTextures"),e=h(d),f=a("./utils/canUploadSameBuffer"),g=h(f);c.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,e.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,g.default)()}},{"./utils/canUploadSameBuffer":115,"./utils/maxRecommendedTextures":119}],99:[function(a,b,c){"use strict";function l(a){return a&&a.__esModule?a:{default:a}}function m(a,b){
    if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function o(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../math"),f=a("../utils"),g=a("../const"),h=a("../textures/Texture"),i=l(h),j=a("../display/Container"),k=l(j),p=new e.Point,q=function(a){function b(c){m(this,b);var d=n(this,a.call(this));return d._anchor=new e.ObservablePoint(d._onAnchorUpdate,d),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=g.BLEND_MODES.NORMAL,d.shader=null,d.cachedTint=16777215,d.texture=c||i.default.EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d}return o(b,a),b.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=(0,f.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,f.sign)(this.scale.y)*this._height/this.texture.orig.height)},b.prototype._onAnchorUpdate=function(){this._transformID=-1},b.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var b=this._texture,c=this.transform.worldTransform,d=c.a,e=c.b,f=c.c,g=c.d,h=c.tx,i=c.ty,j=this.vertexData,k=b.trim,l=b.orig,m=this._anchor,n=0,o=0,p=0,q=0;k?(o=k.x-m._x*l.width,n=o+k.width,q=k.y-m._y*l.height,p=q+k.height):(n=l.width*(1-m._x),o=l.width*-m._x,p=l.height*(1-m._y),q=l.height*-m._y),j[0]=d*o+f*q+h,j[1]=g*q+e*o+i,j[2]=d*n+f*q+h,j[3]=g*q+e*n+i,j[4]=d*n+f*p+h,j[5]=g*p+e*n+i,j[6]=d*o+f*p+h,j[7]=g*p+e*o+i}},b.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var b=this._texture,c=this.vertexTrimmedData,d=b.orig,e=this._anchor,f=this.transform.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=d.width*(1-e._x),n=d.width*-e._x,o=d.height*(1-e._y),p=d.height*-e._y;c[0]=g*n+i*p+k,c[1]=j*p+h*n+l,c[2]=g*m+i*p+k,c[3]=j*p+h*m+l,c[4]=g*m+i*o+k,c[5]=j*o+h*m+l,c[6]=g*n+i*o+k,c[7]=j*o+h*n+l},b.prototype._renderWebGL=function(b){this.calculateVertices(),b.setObjectRenderer(b.plugins.sprite),b.plugins.sprite.render(this)},b.prototype._renderCanvas=function(b){b.plugins.sprite.render(this)},b.prototype._calculateBounds=function(){var b=this._texture.trim,c=this._texture.orig;!b||b.width===c.width&&b.height===c.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},b.prototype.getLocalBounds=function(c){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),c||(this._localBoundsRect||(this._localBoundsRect=new e.Rectangle),c=this._localBoundsRect),this._bounds.getRectangle(c)):a.prototype.getLocalBounds.call(this,c)},b.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,p);var c=this._texture.orig.width,d=this._texture.orig.height,e=-c*this.anchor.x,f=0;return p.x>e&&p.x<e+c&&(f=-d*this.anchor.y,p.y>f&&p.y<f+d)},b.prototype.destroy=function(c){a.prototype.destroy.call(this,c),this._anchor=null;var d="boolean"==typeof c?c:c&&c.texture;if(d){var e="boolean"==typeof c?c:c&&c.baseTexture;this._texture.destroy(!!e)}this._texture=null,this.shader=null},b.from=function(c){return new b(i.default.from(c))},b.fromFrame=function(c){var d=f.TextureCache[c];if(!d)throw new Error('The frameId "'+c+'" does not exist in the texture cache');return new b(d)},b.fromImage=function(c,d,e){return new b(i.default.fromImage(c,d,e))},d(b,[{key:"width",get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(b){var c=(0,f.sign)(this.scale.x)||1;this.scale.x=c*b/this.texture.orig.width,this._width=b}},{key:"height",get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(b){var c=(0,f.sign)(this.scale.y)||1;this.scale.y=c*b/this.texture.orig.height,this._height=b}},{key:"anchor",get:function(){return this._anchor},set:function(b){this._anchor.copy(b)}},{key:"tint",get:function(){return this._tint},set:function(b){this._tint=b,this._tintRGB=(b>>16)+(65280&b)+((255&b)<<16)}},{key:"texture",get:function(){return this._texture},set:function(b){this._texture!==b&&(this._texture=b,this.cachedTint=16777215,this._textureID=-1,b&&(b.baseTexture.hasLoaded?this._onTextureUpdate():b.once("update",this._onTextureUpdate,this)))}}]),b}(k.default);c.default=q},{"../const":43,"../display/Container":45,"../math":67,"../textures/Texture":110,"../utils":118}],100:[function(a,b,c){"use strict";function j(a){return a&&a.__esModule?a:{default:a}}function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../renderers/canvas/CanvasRenderer"),e=j(d),f=a("../../const"),g=a("../../math"),h=a("./CanvasTinter"),i=j(h),l=new g.Matrix,m=function(){function a(b){k(this,a),this.renderer=b}return a.prototype.render=function(b){var c=b._texture,d=this.renderer,e=c._frame.width,h=c._frame.height,j=b.transform.worldTransform,k=0,m=0;if(!(c.orig.width<=0||c.orig.height<=0)&&c.baseTexture.source&&(d.setBlendMode(b.blendMode),c.valid)){d.context.globalAlpha=b.worldAlpha;var n=c.baseTexture.scaleMode===f.SCALE_MODES.LINEAR;d.smoothProperty&&d.context[d.smoothProperty]!==n&&(d.context[d.smoothProperty]=n),c.trim?(k=c.trim.width/2+c.trim.x-b.anchor.x*c.orig.width,m=c.trim.height/2+c.trim.y-b.anchor.y*c.orig.height):(k=(.5-b.anchor.x)*c.orig.width,m=(.5-b.anchor.y)*c.orig.height),c.rotate&&(j.copy(l),j=l,g.GroupD8.matrixAppendRotationInv(j,c.rotate,k,m),k=0,m=0),k-=e/2,m-=h/2,d.roundPixels?(d.context.setTransform(j.a,j.b,j.c,j.d,j.tx*d.resolution|0,j.ty*d.resolution|0),k|=0,m|=0):d.context.setTransform(j.a,j.b,j.c,j.d,j.tx*d.resolution,j.ty*d.resolution);var o=c.baseTexture.resolution;16777215!==b.tint?(b.cachedTint!==b.tint&&(b.cachedTint=b.tint,b.tintedTexture=i.default.getTintedTexture(b,b.tint)),d.context.drawImage(b.tintedTexture,0,0,e*o,h*o,k*d.resolution,m*d.resolution,e*d.resolution,h*d.resolution)):d.context.drawImage(c.baseTexture.source,c._frame.x*o,c._frame.y*o,e*o,h*o,k*d.resolution,m*d.resolution,e*d.resolution,h*d.resolution)}},a.prototype.destroy=function(){this.renderer=null},a}();c.default=m,e.default.registerPlugin("sprite",m)},{"../../const":43,"../../math":67,"../../renderers/canvas/CanvasRenderer":74,"./CanvasTinter":101}],101:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("../../utils"),e=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),f=g(e),h={getTintedTexture:function(b,c){var d=b.texture;c=h.roundColor(c);var e="#"+("00000"+(0|c).toString(16)).substr(-6);if(d.tintCache=d.tintCache||{},d.tintCache[e])return d.tintCache[e];var f=h.canvas||document.createElement("canvas");if(h.tintMethod(d,c,f),h.convertTintToImage){var g=new Image;g.src=f.toDataURL(),d.tintCache[e]=g}else d.tintCache[e]=f,h.canvas=null;return f},tintWithMultiply:function(b,c,d){var e=d.getContext("2d"),f=b._frame.clone(),g=b.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,d.width=f.width,d.height=f.height,e.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),e.fillRect(0,0,f.width,f.height),e.globalCompositeOperation="multiply",e.drawImage(b.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height),e.globalCompositeOperation="destination-atop",e.drawImage(b.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height)},tintWithOverlay:function(b,c,d){var e=d.getContext("2d"),f=b._frame.clone(),g=b.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,d.width=f.width,d.height=f.height,e.globalCompositeOperation="copy",e.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),e.fillRect(0,0,f.width,f.height),e.globalCompositeOperation="destination-atop",e.drawImage(b.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height)},tintWithPerPixel:function(b,c,e){var f=e.getContext("2d"),g=b._frame.clone(),h=b.baseTexture.resolution;g.x*=h,g.y*=h,g.width*=h,g.height*=h,e.width=g.width,e.height=g.height,f.globalCompositeOperation="copy",f.drawImage(b.baseTexture.source,g.x,g.y,g.width,g.height,0,0,g.width,g.height);for(var i=(0,d.hex2rgb)(c),j=i[0],k=i[1],l=i[2],m=f.getImageData(0,0,g.width,g.height),n=m.data,o=0;o<n.length;o+=4)n[o+0]*=j,n[o+1]*=k,n[o+2]*=l;f.putImageData(m,0,0)},roundColor:function(b){var c=h.cacheStepsPerColorChannel,e=(0,d.hex2rgb)(b);return e[0]=Math.min(255,e[0]/c*c),e[1]=Math.min(255,e[1]/c*c),e[2]=Math.min(255,e[2]/c*c),(0,d.rgb2hex)(e)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,f.default)(),tintMethod:0};h.tintMethod=h.canUseMultiply?h.tintWithMultiply:h.tintWithPerPixel,c.default=h},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":77,"../../utils":118}],102:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.vertices=new ArrayBuffer(b),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return a.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},a}();c.default=e},{}],103:[function(a,b,c){"use strict";function v(a){return a&&a.__esModule?a:{default:a}}function w(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function x(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function y(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../renderers/webgl/utils/ObjectRenderer"),e=v(d),f=a("../../renderers/webgl/WebGLRenderer"),g=v(f),h=a("../../utils/createIndicesForQuads"),i=v(h),j=a("./generateMultiTextureShader"),k=v(j),l=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),m=v(l),n=a("./BatchBuffer"),o=v(n),p=a("../../settings"),q=v(p),r=a("pixi-gl-core"),s=v(r),t=a("bit-twiddle"),u=v(t),z=q.default.SPRITE_BATCH_SIZE,A=q.default.SPRITE_MAX_TEXTURES,B=q.default.CAN_UPLOAD_SAME_BUFFER,C=0,D=0,E=function(a){function b(c){w(this,b);var d=x(this,a.call(this,c));d.vertSize=5,d.vertByteSize=4*d.vertSize,d.size=z,d.buffers=[];for(var e=1;e<=u.default.nextPow2(d.size);e*=2)d.buffers.push(new o.default(4*e*d.vertByteSize));d.indices=(0,i.default)(d.size),d.shader=null,d.currentIndex=0,C=0,d.groups=[];for(var f=0;f<d.size;f++)d.groups[f]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return d.sprites=[],d.vertexBuffers=[],d.vaos=[],d.vaoMax=2,d.vertexCount=0,d.renderer.on("prerender",d.onPrerender,d),d}return y(b,a),b.prototype.onContextChange=function(){var b=this.renderer.gl;this.MAX_TEXTURES=Math.min(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS),A),this.MAX_TEXTURES=(0,m.default)(this.MAX_TEXTURES,b);var c=this.shader=(0,k.default)(b,this.MAX_TEXTURES);this.indexBuffer=s.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.renderer.bindVao(null);for(var d=0;d<this.vaoMax;d++)this.vertexBuffers[d]=s.default.GLBuffer.createVertexBuffer(b,null,b.STREAM_DRAW),this.vaos[d]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[d],c.attributes.aVertexPosition,b.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[d],c.attributes.aTextureCoord,b.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[d],c.attributes.aColor,b.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[d],c.attributes.aTextureId,b.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},b.prototype.onPrerender=function(){this.vertexCount=0},b.prototype.render=function(b){this.currentIndex>=this.size&&this.flush(),b.texture._uvs&&(this.sprites[this.currentIndex++]=b)},b.prototype.flush=function(){if(0!==this.currentIndex){var b=this.renderer.gl,c=this.MAX_TEXTURES,d=u.default.nextPow2(this.currentIndex),e=u.default.log2(d),f=this.buffers[e],g=this.sprites,h=this.groups,i=f.float32View,j=f.uint32View,k=this.boundTextures,l=this.renderer.boundTextures,m=this.renderer.textureGC.count,n=0,o=void 0,p=void 0,q=1,r=0,t=h[0],v=void 0,w=void 0,x=g[0].blendMode;t.textureCount=0,t.start=0,t.blend=x,C++;var y=void 0;for(y=0;y<c;++y)k[y]=l[y],k[y]._virtalBoundId=y;for(y=0;y<this.currentIndex;++y){var z=g[y];if(o=z._texture.baseTexture,x!==z.blendMode&&(x=z.blendMode,p=null,r=c,C++),p!==o&&(p=o,o._enabled!==C)){if(r===c&&(C++,t.size=y-t.start,r=0,t=h[q++],t.blend=x,t.textureCount=0,t.start=y),o.touched=m,o._virtalBoundId===-1)for(var A=0;A<c;++A){var E=(A+D)%c,F=k[E];if(F._enabled!==C){D++,F._virtalBoundId=-1,o._virtalBoundId=E,k[E]=o;break}}o._enabled=C,t.textureCount++,t.ids[r]=o._virtalBoundId,t.textures[r++]=o}if(v=z.vertexData,w=z._texture._uvs.uvsUint32,this.renderer.roundPixels){var G=this.renderer.resolution;i[n]=(v[0]*G|0)/G,i[n+1]=(v[1]*G|0)/G,i[n+5]=(v[2]*G|0)/G,i[n+6]=(v[3]*G|0)/G,i[n+10]=(v[4]*G|0)/G,i[n+11]=(v[5]*G|0)/G,i[n+15]=(v[6]*G|0)/G,i[n+16]=(v[7]*G|0)/G}else i[n]=v[0],i[n+1]=v[1],i[n+5]=v[2],i[n+6]=v[3],i[n+10]=v[4],i[n+11]=v[5],i[n+15]=v[6],i[n+16]=v[7];j[n+2]=w[0],j[n+7]=w[1],j[n+12]=w[2],j[n+17]=w[3],j[n+3]=j[n+8]=j[n+13]=j[n+18]=z._tintRGB+(255*z.worldAlpha<<24),i[n+4]=i[n+9]=i[n+14]=i[n+19]=o._virtalBoundId,n+=20}for(t.size=y-t.start,B?this.vertexBuffers[this.vertexCount].upload(f.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=s.default.GLBuffer.createVertexBuffer(b,null,b.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,b.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,b.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,b.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,b.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(f.vertices,0,!1),this.vertexCount++),y=0;y<c;++y)l[y]._virtalBoundId=-1;for(y=0;y<q;++y){for(var H=h[y],I=H.textureCount,J=0;J<I;J++)p=H.textures[J],l[H.ids[J]]!==p&&this.renderer.bindTexture(p,H.ids[J],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(H.blend),b.drawElements(b.TRIANGLES,6*H.size,b.UNSIGNED_SHORT,6*H.start*2)}this.currentIndex=0}},b.prototype.start=function(){this.renderer.bindShader(this.shader),B&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},b.prototype.stop=function(){this.flush()},b.prototype.destroy=function(){for(var c=0;c<this.vaoMax;c++)this.vertexBuffers[c]&&this.vertexBuffers[c].destroy(),this.vaos[c]&&this.vaos[c].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),a.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var d=0;d<this.buffers.length;++d)this.buffers[d].destroy()},b}(e.default);c.default=E,g.default.registerPlugin("sprite",E)},{"../../renderers/webgl/WebGLRenderer":81,"../../renderers/webgl/utils/ObjectRenderer":91,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":94,"../../settings":98,"../../utils/createIndicesForQuads":116,"./BatchBuffer":102,"./generateMultiTextureShader":104,"bit-twiddle":1,"pixi-gl-core":12}],104:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function i(a,b){var c="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d=h;d=d.replace(/%count%/gi,b),d=d.replace(/%forloop%/gi,j(b));for(var f=new e.default(a,c,d),g=[],i=0;i<b;i++)g[i]=i;return f.bind(),f.uniforms.uSamplers=g,f}function j(a){var b="";b+="\n",b+="\n";for(var c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}c.__esModule=!0,c.default=i;var d=a("../../Shader"),e=g(d),h=(a("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":42,path:22}],105:[function(a,b,c){"use strict";function p(a){return a&&a.__esModule?a:{default:a}}function q(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function r(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function s(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../sprites/Sprite"),f=p(e),g=a("../textures/Texture"),h=p(g),i=a("../math"),j=a("../utils"),k=a("../const"),l=a("../settings"),m=p(l),n=a("./TextStyle"),o=p(n),t=m.default.RESOLUTION,u={texture:!0,children:!1,baseTexture:!0},v=function(a){function b(c,d){q(this,b);var e=document.createElement("canvas");e.width=3,e.height=3;var f=h.default.fromCanvas(e);f.orig=new i.Rectangle,f.trim=new i.Rectangle;var g=r(this,a.call(this,f));return g.canvas=e,g.context=g.canvas.getContext("2d"),g.resolution=t,g._text=null,g._style=null,g._styleListener=null,g._font="",g.text=c,g.style=d,g.localStyleID=-1,g}return s(b,a),b.prototype.updateText=function(c){var d=this._style;if(this.localStyleID!==d.styleID&&(this.dirty=!0,this.localStyleID=d.styleID),this.dirty||!c){this._font=b.getFontStyle(d),this.context.font=this._font;for(var e=d.wordWrap?this.wordWrap(this._text):this._text,f=e.split(/(?:\r\n|\r|\n)/),g=new Array(f.length),h=0,i=b.calculateFontProperties(this._font),j=0;j<f.length;j++){var k=this.context.measureText(f[j]).width+(f[j].length-1)*d.letterSpacing;g[j]=k,h=Math.max(h,k)}var l=h+d.strokeThickness;d.dropShadow&&(l+=d.dropShadowDistance),l+=2*d.padding,this.canvas.width=Math.ceil((l+this.context.lineWidth)*this.resolution);var m=this.style.lineHeight||i.fontSize+d.strokeThickness,n=Math.max(m,i.fontSize+d.strokeThickness)+(f.length-1)*m;d.dropShadow&&(n+=d.dropShadowDistance),this.canvas.height=Math.ceil((n+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=d.stroke,this.context.lineWidth=d.strokeThickness,this.context.textBaseline=d.textBaseline,this.context.lineJoin=d.lineJoin,this.context.miterLimit=d.miterLimit;var o=void 0,p=void 0;if(d.dropShadow){d.dropShadowBlur>0?(this.context.shadowColor=d.dropShadowColor,this.context.shadowBlur=d.dropShadowBlur):this.context.fillStyle=d.dropShadowColor;for(var q=Math.cos(d.dropShadowAngle)*d.dropShadowDistance,r=Math.sin(d.dropShadowAngle)*d.dropShadowDistance,s=0;s<f.length;s++)o=d.strokeThickness/2,p=d.strokeThickness/2+s*m+i.ascent,"right"===d.align?o+=h-g[s]:"center"===d.align&&(o+=(h-g[s])/2),d.fill&&(this.drawLetterSpacing(f[s],o+q+d.padding,p+r+d.padding),d.stroke&&d.strokeThickness&&(this.context.strokeStyle=d.dropShadowColor,this.drawLetterSpacing(f[s],o+q+d.padding,p+r+d.padding,!0),this.context.strokeStyle=d.stroke))}this.context.fillStyle=this._generateFillStyle(d,f);for(var t=0;t<f.length;t++)o=d.strokeThickness/2,p=d.strokeThickness/2+t*m+i.ascent,"right"===d.align?o+=h-g[t]:"center"===d.align&&(o+=(h-g[t])/2),d.stroke&&d.strokeThickness&&this.drawLetterSpacing(f[t],o+d.padding,p+d.padding,!0),d.fill&&this.drawLetterSpacing(f[t],o+d.padding,p+d.padding);this.updateTexture()}},b.prototype.drawLetterSpacing=function(b,c,d){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=this._style,g=f.letterSpacing;if(0===g)return void(e?this.context.strokeText(b,c,d):this.context.fillText(b,c,d));for(var h=String.prototype.split.call(b,""),i=c,j=0,k="";j<b.length;)k=h[j++],e?this.context.strokeText(k,i,d):this.context.fillText(k,i,d),i+=this.context.measureText(k).width+g},b.prototype.updateTexture=function(){var b=this._texture,c=this._style;b.baseTexture.hasLoaded=!0,b.baseTexture.resolution=this.resolution,b.baseTexture.realWidth=this.canvas.width,b.baseTexture.realHeight=this.canvas.height,b.baseTexture.width=this.canvas.width/this.resolution,b.baseTexture.height=this.canvas.height/this.resolution,b.trim.width=b._frame.width=this.canvas.width/this.resolution,b.trim.height=b._frame.height=this.canvas.height/this.resolution,b.trim.x=-c.padding,b.trim.y=-c.padding,b.orig.width=b._frame.width-2*c.padding,b.orig.height=b._frame.height-2*c.padding,this._onTextureUpdate(),b.baseTexture.emit("update",b.baseTexture),this.dirty=!1},b.prototype.renderWebGL=function(c){this.resolution!==c.resolution&&(this.resolution=c.resolution,this.dirty=!0),this.updateText(!0),a.prototype.renderWebGL.call(this,c)},b.prototype._renderCanvas=function(c){this.resolution!==c.resolution&&(this.resolution=c.resolution,this.dirty=!0),this.updateText(!0),a.prototype._renderCanvas.call(this,c)},b.prototype.wordWrap=function(b){for(var c="",d=b.split("\n"),e=this._style.wordWrapWidth,f=0;f<d.length;f++){for(var g=e,h=d[f].split(" "),i=0;i<h.length;i++){var j=this.context.measureText(h[i]).width;if(this._style.breakWords&&j>e)for(var k=h[i].split(""),l=0;l<k.length;l++){var m=this.context.measureText(k[l]).width;m>g?(c+="\n"+k[l],g=e-m):(0===l&&(c+=" "),c+=k[l],g-=m)}else{var n=j+this.context.measureText(" ").width;0===i||n>g?(i>0&&(c+="\n"),c+=h[i],g=e-j):(g-=n,c+=" "+h[i])}}f<d.length-1&&(c+="\n")}return c},b.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},b.prototype._onStyleChange=function(){this.dirty=!0},b.prototype._generateFillStyle=function(b,c){if(!Array.isArray(b.fill))return b.fill;if(navigator.isCocoonJS)return b.fill[0];var d=void 0,e=void 0,f=void 0,g=void 0,h=this.canvas.width/this.resolution,i=this.canvas.height/this.resolution;if(b.fillGradientType===k.TEXT_GRADIENT.LINEAR_VERTICAL){d=this.context.createLinearGradient(h/2,0,h/2,i),e=(b.fill.length+1)*c.length,f=0;for(var j=0;j<c.length;j++){f+=1;for(var l=0;l<b.fill.length;l++)g=f/e,d.addColorStop(g,b.fill[l]),f++}}else{d=this.context.createLinearGradient(0,i/2,h,i/2),e=b.fill.length+1,f=1;for(var m=0;m<b.fill.length;m++)g=f/e,d.addColorStop(g,b.fill[m]),f++}return d},b.prototype.destroy=function(c){"boolean"==typeof c&&(c={children:c}),c=Object.assign({},u,c),a.prototype.destroy.call(this,c),this.context=null,this.canvas=null,this._style=null},b.getFontStyle=function(b){b=b||{},b instanceof o.default||(b=new o.default(b));var c="number"==typeof b.fontSize?b.fontSize+"px":b.fontSize;return b.fontStyle+" "+b.fontVariant+" "+b.fontWeight+" "+c+" "+b.fontFamily},b.calculateFontProperties=function(c){if(b.fontPropertiesCache[c])return b.fontPropertiesCache[c];var d={},e=b.fontPropertiesCanvas,f=b.fontPropertiesContext;f.font=c;var g=Math.ceil(f.measureText("|Mq").width),h=Math.ceil(f.measureText("M").width),i=2*h;h=1.4*h|0,e.width=g,e.height=i,f.fillStyle="#f00",f.fillRect(0,0,g,i),f.font=c,f.textBaseline="alphabetic",f.fillStyle="#000",f.fillText("|Mq",0,h);var j=f.getImageData(0,0,g,i).data,k=j.length,l=4*g,m=0,n=0,o=!1;for(m=0;m<h;++m){for(var p=0;p<l;p+=4)if(255!==j[n+p]){o=!0;break}if(o)break;n+=l}for(d.ascent=h-m,n=k-l,o=!1,m=i;m>h;--m){for(var q=0;q<l;q+=4)if(255!==j[n+q]){o=!0;break}if(o)break;n-=l}return d.descent=m-h,d.fontSize=d.ascent+d.descent,b.fontPropertiesCache[c]=d,d},d(b,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(b){this.updateText(!0);var c=(0,j.sign)(this.scale.x)||1;this.scale.x=c*b/this.texture.orig.width,this._width=b}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(b){this.updateText(!0);var c=(0,j.sign)(this.scale.y)||1;this.scale.y=c*b/this.texture.orig.height,this._height=b}},{key:"style",get:function(){return this._style},set:function(b){b=b||{},b instanceof o.default?this._style=b:this._style=new o.default(b),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(b){b=b||" ",b=b.toString(),this._text!==b&&(this._text=b,this.dirty=!0)}}]),b}(f.default);c.default=v,v.fontPropertiesCache={},v.fontPropertiesCanvas=document.createElement("canvas"),v.fontPropertiesContext=v.fontPropertiesCanvas.getContext("2d")},{"../const":43,"../math":67,"../settings":98,"../sprites/Sprite":99,"../textures/Texture":110,"../utils":118,"./TextStyle":106}],106:[function(a,b,c){"use strict";function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a){if("number"==typeof a)return(0,f.hex2string)(a);if(Array.isArray(a))for(var b=0;b<a.length;++b)"number"==typeof a[b]&&(a[b]=(0,f.hex2string)(a[b]));return a}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../const"),f=a("../utils"),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:e.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},i=function(){function a(b){g(this,a),this.styleID=0,Object.assign(this,h,b)}return a.prototype.clone=function(){var c={};for(var d in this._defaults)c[d]=this[d];return new a(c)},a.prototype.reset=function(){Object.assign(this,this._defaults)},d(a,[{key:"align",get:function(){return this._align},set:function(b){this._align!==b&&(this._align=b,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(b){this._breakWords!==b&&(this._breakWords=b,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(b){this._dropShadow!==b&&(this._dropShadow=b,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(b){this._dropShadowAngle!==b&&(this._dropShadowAngle=b,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(b){this._dropShadowBlur!==b&&(this._dropShadowBlur=b,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(b){var c=j(b);this._dropShadowColor!==c&&(this._dropShadowColor=c,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(b){this._dropShadowDistance!==b&&(this._dropShadowDistance=b,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(b){var c=j(b);this._fill!==c&&(this._fill=c,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(b){this._fillGradientType!==b&&(this._fillGradientType=b,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(b){this.fontFamily!==b&&(this._fontFamily=b,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(b){this._fontSize!==b&&(this._fontSize=b,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(b){this._fontStyle!==b&&(this._fontStyle=b,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(b){this._fontVariant!==b&&(this._fontVariant=b,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(b){this._fontWeight!==b&&(this._fontWeight=b,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(b){this._letterSpacing!==b&&(this._letterSpacing=b,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(b){this._lineHeight!==b&&(this._lineHeight=b,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(b){this._lineJoin!==b&&(this._lineJoin=b,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(b){this._miterLimit!==b&&(this._miterLimit=b,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(b){this._padding!==b&&(this._padding=b,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(b){var c=j(b);this._stroke!==c&&(this._stroke=c,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(b){this._strokeThickness!==b&&(this._strokeThickness=b,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(b){this._textBaseline!==b&&(this._textBaseline=b,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(b){this._wordWrap!==b&&(this._wordWrap=b,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(b){this._wordWrapWidth!==b&&(this._wordWrapWidth=b,this.styleID++)}}]),a}();c.default=i},{"../const":43,"../utils":118}],107:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
    a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./BaseTexture"),e=h(d),f=a("../settings"),g=h(f),l=g.default.RESOLUTION,m=g.default.SCALE_MODE,n=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments[2],f=arguments[3];i(this,b);var g=j(this,a.call(this,null,e));return g.resolution=f||l,g.width=c,g.height=d,g.realWidth=g.width*g.resolution,g.realHeight=g.height*g.resolution,g.scaleMode=e||m,g.hasLoaded=!0,g._glRenderTargets={},g._canvasRenderTarget=null,g.valid=!1,g}return k(b,a),b.prototype.resize=function(b,c){b===this.width&&c===this.height||(this.valid=b>0&&c>0,this.width=b,this.height=c,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},b.prototype.destroy=function(){a.prototype.destroy.call(this,!0),this.renderer=null},b}(e.default);c.default=n},{"../settings":98,"./BaseTexture":108}],108:[function(a,b,c){"use strict";function n(a){return a&&a.__esModule?a:{default:a}}function o(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function p(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function q(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=a("../utils"),f=a("../settings"),g=n(f),h=a("eventemitter3"),i=n(h),j=a("../utils/determineCrossOrigin"),k=n(j),l=a("bit-twiddle"),m=n(l),r=g.default.RESOLUTION,s=g.default.MIPMAP_TEXTURES,t=g.default.SCALE_MODE,u=g.default.WRAP_MODE,v=function(a){function b(c,d,f){o(this,b);var g=p(this,a.call(this));return g.uid=(0,e.uid)(),g.touched=0,g.resolution=f||r,g.width=100,g.height=100,g.realWidth=100,g.realHeight=100,g.scaleMode=d||t,g.hasLoaded=!1,g.isLoading=!1,g.source=null,g.origSource=null,g.imageType=null,g.sourceScale=1,g.premultipliedAlpha=!0,g.imageUrl=null,g.isPowerOfTwo=!1,g.mipmap=s,g.wrapMode=u,g._glTextures={},g._enabled=0,g._virtalBoundId=-1,c&&g.loadSource(c),g}return q(b,a),b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)),this.emit("update",this)},b.prototype.loadSource=function(b){var c=this,e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var f=!this.source;if(this.source=b,(b.src&&b.complete||b.getContext)&&b.width&&b.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),f&&this.emit("loaded",this);else if(!b.getContext){var g=function(){c.isLoading=!0;var a=c;if(b.onload=function(){if(a._updateImageType(),b.onload=null,b.onerror=null,a.isLoading)return a.isLoading=!1,a._sourceLoaded(),"svg"===a.imageType?void a._loadSvgSource():void a.emit("loaded",a)},b.onerror=function(){b.onload=null,b.onerror=null,a.isLoading&&(a.isLoading=!1,a.emit("error",a))},b.complete&&b.src){if(b.onload=null,b.onerror=null,"svg"===a.imageType)return a._loadSvgSource(),{v:void 0};c.isLoading=!1,b.width&&b.height?(c._sourceLoaded(),e&&c.emit("loaded",c)):e&&c.emit("error",c)}}();if("object"===("undefined"==typeof g?"undefined":d(g)))return g.v}},b.prototype._updateImageType=function(){if(this.imageUrl){var b=(0,e.decomposeDataUri)(this.imageUrl),c=void 0;if(b&&"image"===b.mediaType){var d=b.subType.split("+")[0];if(c=(0,e.getUrlFileExtension)("."+d),!c)throw new Error("Invalid image type in data URI.")}else c=(0,e.getUrlFileExtension)(this.imageUrl),c||(c="png");this.imageType=c}},b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var b=(0,e.decomposeDataUri)(this.imageUrl);b?this._loadSvgSourceUsingDataUri(b):this._loadSvgSourceUsingXhr()}},b.prototype._loadSvgSourceUsingDataUri=function(b){var c=void 0;if("base64"===b.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");c=atob(b.data)}else c=b.data;this._loadSvgSourceUsingString(c)},b.prototype._loadSvgSourceUsingXhr=function(){var b=this,c=new XMLHttpRequest;c.onload=function(){if(c.readyState!==c.DONE||200!==c.status)throw new Error("Failed to load SVG using XHR.");b._loadSvgSourceUsingString(c.response)},c.onerror=function(){return b.emit("error",b)},c.open("GET",this.imageUrl,!0),c.send()},b.prototype._loadSvgSourceUsingString=function(b){var c=(0,e.getSvgSize)(b),d=c.width,f=c.height;if(!d||!f)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(d*this.sourceScale),this.realHeight=Math.round(f*this.sourceScale),this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight);var g=document.createElement("canvas");g.width=this.realWidth,g.height=this.realHeight,g._pixiId="canvas_"+(0,e.uid)(),g.getContext("2d").drawImage(this.source,0,0,d,f,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=g,e.BaseTextureCache[g._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},b.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},b.prototype.destroy=function(){this.imageUrl&&(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},b.prototype.dispose=function(){this.emit("dispose",this)},b.prototype.updateSourceImage=function(b){this.source.src=b,this.loadSource(this.source)},b.fromImage=function(c,d,f,g){var h=e.BaseTextureCache[c];if(!h){var i=new Image;void 0===d&&0!==c.indexOf("data:")&&(i.crossOrigin=(0,k.default)(c)),h=new b(i,f),h.imageUrl=c,g&&(h.sourceScale=g),h.resolution=(0,e.getResolutionOfUrl)(c),i.src=c,e.BaseTextureCache[c]=h}return h},b.fromCanvas=function(c,d){c._pixiId||(c._pixiId="canvas_"+(0,e.uid)());var f=e.BaseTextureCache[c._pixiId];return f||(f=new b(c,d),e.BaseTextureCache[c._pixiId]=f),f},b}(i.default);c.default=v},{"../settings":98,"../utils":118,"../utils/determineCrossOrigin":117,"bit-twiddle":1,eventemitter3:3}],109:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./BaseRenderTexture"),e=h(d),f=a("./Texture"),g=h(f),l=function(a){function b(c,d){i(this,b);var f=null;if(!(c instanceof e.default)){var g=arguments[1],h=arguments[2],k=arguments[3]||0,l=arguments[4]||1;console.warn("Please use RenderTexture.create("+g+", "+h+") instead of the ctor directly."),f=arguments[0],d=null,c=new e.default(g,h,k,l)}var m=j(this,a.call(this,c,d));return m.legacyRenderer=f,m.valid=!0,m._updateUvs(),m}return k(b,a),b.prototype.resize=function(b,c,d){this.valid=b>0&&c>0,this._frame.width=this.orig.width=b,this._frame.height=this.orig.height=c,d||this.baseTexture.resize(b,c),this._updateUvs()},b.create=function(c,d,f,g){return new b(new e.default(c,d,f,g))},b}(g.default);c.default=l},{"./BaseRenderTexture":107,"./Texture":110}],110:[function(a,b,c){"use strict";function o(a){return a&&a.__esModule?a:{default:a}}function p(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function q(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function r(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./BaseTexture"),f=o(e),g=a("./VideoBaseTexture"),h=o(g),i=a("./TextureUvs"),j=o(i),k=a("eventemitter3"),l=o(k),m=a("../math"),n=a("../utils"),s=function(a){function b(c,d,e,f,g){p(this,b);var h=q(this,a.call(this));if(h.noFrame=!1,d||(h.noFrame=!0,d=new m.Rectangle(0,0,1,1)),c instanceof b&&(c=c.baseTexture),h.baseTexture=c,h._frame=d,h.trim=f,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=e||d,h._rotate=Number(g||0),g===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.hasLoaded?(h.noFrame&&(d=new m.Rectangle(0,0,c.width,c.height),c.on("update",h.onBaseTextureUpdated,h)),h.frame=d):c.once("loaded",h.onBaseTextureLoaded,h),h._updateID=0,h.transform=null,h}return r(b,a),b.prototype.update=function(){this.baseTexture.update()},b.prototype.onBaseTextureLoaded=function(b){this._updateID++,this.noFrame?this.frame=new m.Rectangle(0,0,b.width,b.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},b.prototype.onBaseTextureUpdated=function(b){this._updateID++,this._frame.width=b.width,this._frame.height=b.height,this.emit("update",this)},b.prototype.destroy=function(b){this.baseTexture&&(b&&(n.TextureCache[this.baseTexture.imageUrl]&&delete n.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},b.prototype._updateUvs=function(){this._uvs||(this._uvs=new j.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},b.fromImage=function(c,d,e,g){var h=n.TextureCache[c];return h||(h=new b(f.default.fromImage(c,d,e,g)),n.TextureCache[c]=h),h},b.fromFrame=function(b){var c=n.TextureCache[b];if(!c)throw new Error('The frameId "'+b+'" does not exist in the texture cache');return c},b.fromCanvas=function(c,d){return new b(f.default.fromCanvas(c,d))},b.fromVideo=function(c,d){return"string"==typeof c?b.fromVideoUrl(c,d):new b(h.default.fromVideo(c,d))},b.fromVideoUrl=function(c,d){return new b(h.default.fromUrl(c,d))},b.from=function(c){if("string"==typeof c){var d=n.TextureCache[c];if(!d){var e=null!==c.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return e?b.fromVideoUrl(c):b.fromImage(c)}return d}return c instanceof HTMLImageElement?new b(new f.default(c)):c instanceof HTMLCanvasElement?b.fromCanvas(c):c instanceof HTMLVideoElement?b.fromVideo(c):c instanceof f.default?new b(c):c},b.addTextureToCache=function(b,c){n.TextureCache[c]=b},b.removeTextureFromCache=function(b){var c=n.TextureCache[b];return delete n.TextureCache[b],delete n.BaseTextureCache[b],c},d(b,[{key:"frame",get:function(){return this._frame},set:function(b){if(this._frame=b,this.noFrame=!1,b.x+b.width>this.baseTexture.width||b.y+b.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=b&&b.width&&b.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=b),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(b){this._rotate=b,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig?this.orig.width:0}},{key:"height",get:function(){return this.orig?this.orig.height:0}}]),b}(l.default);c.default=s,s.EMPTY=new s(new f.default),s.EMPTY.destroy=function(){},s.EMPTY.on=function(){},s.EMPTY.once=function(){},s.EMPTY.emit=function(){}},{"../math":67,"../utils":118,"./BaseTexture":108,"./TextureUvs":111,"./VideoBaseTexture":112,eventemitter3:3}],111:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../math/GroupD8"),e=f(d),h=function(){function a(){g(this,a),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return a.prototype.set=function(b,c,d){var f=c.width,g=c.height;if(d){var h=b.width/2/f,i=b.height/2/g,j=b.x/f+h,k=b.y/g+i;d=e.default.add(d,e.default.NW),this.x0=j+h*e.default.uX(d),this.y0=k+i*e.default.uY(d),d=e.default.add(d,2),this.x1=j+h*e.default.uX(d),this.y1=k+i*e.default.uY(d),d=e.default.add(d,2),this.x2=j+h*e.default.uX(d),this.y2=k+i*e.default.uY(d),d=e.default.add(d,2),this.x3=j+h*e.default.uX(d),this.y3=k+i*e.default.uY(d)}else this.x0=b.x/f,this.y0=b.y/g,this.x1=(b.x+b.width)/f,this.y1=b.y/g,this.x2=(b.x+b.width)/f,this.y2=(b.y+b.height)/g,this.x3=b.x/f,this.y3=(b.y+b.height)/g;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},a}();c.default=h},{"../math/GroupD8":63}],112:[function(a,b,c){"use strict";function j(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function k(a){return a&&a.__esModule?a:{default:a}}function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function n(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function p(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./BaseTexture"),f=k(e),g=a("../utils"),h=a("../ticker"),i=j(h),o=function(a){function b(c,d){if(l(this,b),!c)throw new Error("No video source element specified.");(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0);var e=m(this,a.call(this,c,d));return e.width=c.videoWidth,e.height=c.videoHeight,e._autoUpdate=!0,e._isAutoUpdating=!1,e.autoPlay=!0,e.update=e.update.bind(e),e._onCanPlay=e._onCanPlay.bind(e),c.addEventListener("play",e._onPlayStart.bind(e)),c.addEventListener("pause",e._onPlayStop.bind(e)),e.hasLoaded=!1,e.__loaded=!1,e._isSourceReady()?e._onCanPlay():(c.addEventListener("canplay",e._onCanPlay),c.addEventListener("canplaythrough",e._onCanPlay)),e}return n(b,a),b.prototype._isSourcePlaying=function(){var b=this.source;return b.currentTime>0&&b.paused===!1&&b.ended===!1&&b.readyState>2},b.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(i.shared.add(this.update,this),this._isAutoUpdating=!0)},b.prototype._onPlayStop=function(){this._isAutoUpdating&&(i.shared.remove(this.update,this),this._isAutoUpdating=!1)},b.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},b.prototype.destroy=function(){this._isAutoUpdating&&i.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete g.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),a.prototype.destroy.call(this)},b.fromVideo=function(c,d){c._pixiId||(c._pixiId="video_"+(0,g.uid)());var e=g.BaseTextureCache[c._pixiId];return e||(e=new b(c,d),g.BaseTextureCache[c._pixiId]=e),e},b.fromUrl=function(c,d){var e=document.createElement("video");if(e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),Array.isArray(c))for(var f=0;f<c.length;++f)e.appendChild(p(c[f].src||c[f],c[f].mime));else e.appendChild(p(c.src||c,c.mime));return e.load(),b.fromVideo(e,d)},d(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(b){b!==this._autoUpdate&&(this._autoUpdate=b,!this._autoUpdate&&this._isAutoUpdating?(i.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(i.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),b}(f.default);c.default=o,o.fromUrls=o.fromUrl},{"../ticker":114,"../utils":118,"./BaseTexture":108}],113:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../settings"),f=i(e),g=a("eventemitter3"),h=i(g),k="tick",l=f.default.TARGET_FPMS,m=function(){function a(){var b=this;j(this,a),this._emitter=new h.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/l,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(a){b._requestId=null,b.started&&(b.update(a),b.started&&null===b._requestId&&b._emitter.listeners(k,!0)&&(b._requestId=requestAnimationFrame(b._tick)))}}return a.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(k,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(b,c){return this._emitter.on(k,b,c),this._startIfPossible(),this},a.prototype.addOnce=function(b,c){return this._emitter.once(k,b,c),this._startIfPossible(),this},a.prototype.remove=function(b,c){return this._emitter.off(k,b,c),this._emitter.listeners(k,!0)||this._cancelIfNeeded(),this},a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.update=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),c=void 0;b>this.lastTime?(c=this.elapsedMS=b-this.lastTime,c>this._maxElapsedMS&&(c=this._maxElapsedMS),this.deltaTime=c*l*this.speed,this._emitter.emit(k,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=b},d(a,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(b){var c=Math.min(Math.max(0,b)/1e3,l);this._maxElapsedMS=1/c}}]),a}();c.default=m},{"../settings":98,eventemitter3:3}],114:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.Ticker=c.shared=void 0;var d=a("./Ticker"),e=f(d),g=new e.default;g.autoStart=!0,c.shared=g,c.Ticker=e.default},{"./Ticker":113}],115:[function(a,b,c){"use strict";function d(){var a=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!a}c.__esModule=!0,c.default=d},{}],116:[function(a,b,c){"use strict";function d(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;d<b;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c}c.__esModule=!0,c.default=d},{}],117:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function h(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";b=b||window.location,g||(g=document.createElement("a")),g.href=a,a=e.default.parse(g.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"}c.__esModule=!0,c.default=h;var d=a("url"),e=f(d),g=void 0},{url:28}],118:[function(a,b,c){"use strict";function m(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function n(a){return a&&a.__esModule?a:{default:a}}function q(){return++o}function r(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b}function s(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a}function t(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}function u(a){var b=f.default.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1}function v(a){var b=d.DATA_URI.exec(a);if(b)return{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,encoding:b[3]?b[3].toLowerCase():void 0,data:b[4]}}function w(a){var b=d.URL_FILE_EXTENSION.exec(a);if(b)return b[1].toLowerCase()}function x(a){var b=d.SVG_SIZE.exec(a),c={};return b&&(c[b[1]]=Math.round(parseFloat(b[3])),c[b[5]]=Math.round(parseFloat(b[7]))),c}function y(){p=!0}function z(a){if(!p){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+d.VERSION+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+d.VERSION+" - "+a+" - http://www.pixijs.com/");p=!0}}function A(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}}function B(a){return 0===a?0:a<0?-1:1}function C(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=d-c,f=b;f<e;++f)a[f]=a[f+c];a.length=e}}c.__esModule=!0,c.BaseTextureCache=c.TextureCache=c.pluginTarget=c.EventEmitter=c.isMobile=void 0,c.uid=q,c.hex2rgb=r,c.hex2string=s,c.rgb2hex=t,c.getResolutionOfUrl=u,c.decomposeDataUri=v,c.getUrlFileExtension=w,c.getSvgSize=x,c.skipHello=y,c.sayHello=z,c.isWebGLSupported=A,c.sign=B,c.removeItems=C;var d=a("../const"),e=a("../settings"),f=n(e),g=a("eventemitter3"),h=n(g),i=a("./pluginTarget"),j=n(i),k=a("ismobilejs"),l=m(k),o=0,p=!1;c.isMobile=l,c.EventEmitter=h.default,c.pluginTarget=j.default;c.TextureCache={},c.BaseTextureCache={}},{"../const":43,"../settings":98,"./pluginTarget":120,eventemitter3:3,ismobilejs:4}],119:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a){return e.default.tablet||e.default.phone?4:a}c.__esModule=!0,c.default=g;var d=a("ismobilejs"),e=f(d)},{ismobilejs:4}],120:[function(a,b,c){"use strict";function d(a){a.__plugins={},a.registerPlugin=function(c,d){a.__plugins[c]=d},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var c in a.__plugins)this.plugins[c]=new a.__plugins[c](this)},a.prototype.destroyPlugins=function(){for(var b in this.plugins)this.plugins[b].destroy(),this.plugins[b]=null;this.plugins=null}}c.__esModule=!0,c.default={mixin:function(b){d(b)}}},{}],121:[function(a,b,c){"use strict";function p(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function q(a){var b=(new Error).stack;"undefined"==typeof b?console.warn("Deprecation Warning: ",a):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(b),console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(b)))}var d=a("./core"),e=p(d),f=a("./mesh"),g=p(f),h=a("./particles"),i=p(h),j=a("./extras"),k=p(j),l=a("./filters"),m=p(l),n=a("./prepare"),o=p(n);e.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},e.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(e,{Stage:{enumerable:!0,get:function(){return q("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return q("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{enumerable:!0,get:function(){return q("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),g.Mesh}},Rope:{enumerable:!0,get:function(){return q("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),g.Rope}},ParticleContainer:{enumerable:!0,get:function(){return q("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return q("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),k.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return q("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),k.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return q("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),k.BitmapText}},blendModes:{enumerable:!0,get:function(){return q("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return q("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return q("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return q("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{enumerable:!0,get:function(){return q("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{enumerable:!0,get:function(){return q("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{enumerable:!0,get:function(){return q("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return q("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(b){q("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=b}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return q("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(b){q("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=b}},RESOLUTION:{enumerable:!0,get:function(){return q("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(b){q("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=b}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return q("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(b){q("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=b}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return q("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(b){q("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=b}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return q("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(b){q("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=b}},RETINA_PREFIX:{enumerable:!0,get:function(){return q("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(b){q("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=b}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return q("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var r=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION"}],s=function(b){var c=r[b];Object.defineProperty(e[c.parent],"DEFAULT",{enumerable:!0,get:function(){return q("PIXI."+c.parent+".DEFAULT has been deprecated, please use PIXI.settings."+c.target),e.settings[c.target]},set:function(b){q("PIXI."+c.parent+".DEFAULT has been deprecated, please use PIXI.settings."+c.target),e.settings[c.target]=b}})},t=0;t<r.length;t++)s(t);
    Object.defineProperties(k,{MovieClip:{enumerable:!0,get:function(){return q("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),k.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(b,c,d){return q("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),b.generateTexture(this,c,d)},e.Graphics.prototype.generateTexture=function(b,c){return q("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(b,c)},e.RenderTexture.prototype.render=function(b,c,d,e){this.legacyRenderer.render(b,this,d,c,!e),q("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(b){return q("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(b)},e.RenderTexture.prototype.getBase64=function(b){return q("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(b)},e.RenderTexture.prototype.getCanvas=function(b){return q("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(b)},e.RenderTexture.prototype.getPixels=function(b){return q("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(b)},e.Sprite.prototype.setTexture=function(b){this.texture=b,q("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},k.BitmapText.prototype.setText=function(b){this.text=b,q("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},e.Text.prototype.setText=function(b){this.text=b,q("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.prototype.setStyle=function(b){this.style=b,q("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(b){return q("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);"),Text.calculateFontProperties(b)},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){q("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var b="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+b+" "+this._fontFamily},set:function(b){q("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),b.indexOf("italic")>1?this._fontStyle="italic":b.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",b.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var c=b.split(" "),d=-1;this._fontSize=26;for(var e=0;e<c.length;++e)if(c[e].match(/(px|pt|em|%)/)){d=e,this._fontSize=c[e];break}this._fontWeight="normal";for(var f=0;f<d;++f)if(c[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=c[f];break}if(d>-1&&d<c.length-1){this._fontFamily="";for(var g=d+1;g<c.length;++g)this._fontFamily+=c[g]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(b){this.frame=b,q("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Object.defineProperties(m,{AbstractFilter:{get:function(){return q("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return q("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return q("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return q("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var u=!0;Object.defineProperty(e.utils,"_saidHello",{set:function(b){b&&(q("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),u=b},get:function(){return u}}),Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){q("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return q("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){q("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return q("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}})},{"./core":62,"./extras":132,"./filters":143,"./mesh":161,"./particles":164,"./prepare":174}],122:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../core"),e=f(d),h=new e.Rectangle,i=function(){function a(b){g(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function a(b){var a=new Image;return a.src=this.base64(b),a},a.prototype.base64=function(b){return this.canvas(b).toDataURL()},a.prototype.canvas=function(b){var c=this.renderer,d=void 0,f=void 0,g=void 0,i=void 0;b&&(i=b instanceof e.RenderTexture?b:c.generateTexture(b)),i?(d=i.baseTexture._canvasRenderTarget.context,f=i.baseTexture._canvasRenderTarget.resolution,g=i.frame):(d=c.rootContext,g=h,g.width=this.renderer.width,g.height=this.renderer.height);var j=g.width*f,k=g.height*f,l=new e.CanvasRenderTarget(j,k),m=d.getImageData(g.x*f,g.y*f,j,k);return l.context.putImageData(m,0,0),l.canvas},a.prototype.pixels=function(b){var c=this.renderer,d=void 0,f=void 0,g=void 0,i=void 0;return b&&(i=b instanceof e.RenderTexture?b:c.generateTexture(b)),i?(d=i.baseTexture._canvasRenderTarget.context,f=i.baseTexture._canvasRenderTarget.resolution,g=i.frame):(d=c.rootContext,g=h,g.width=c.width,g.height=c.height),d.getImageData(0,0,g.width*f,g.height*f).data},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=i,e.CanvasRenderer.registerPlugin("extract",i)},{"../../core":62}],123:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./webgl/WebGLExtract");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return f(d).default}});var e=a("./canvas/CanvasExtract");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return f(e).default}})},{"./canvas/CanvasExtract":122,"./webgl/WebGLExtract":124}],124:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../core"),e=f(d),h=new e.Rectangle,i=4,j=function(){function a(b){g(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function a(b){var a=new Image;return a.src=this.base64(b),a},a.prototype.base64=function(b){return this.canvas(b).toDataURL()},a.prototype.canvas=function(b){var c=this.renderer,d=void 0,f=void 0,g=void 0,j=!1,k=void 0;b&&(k=b instanceof e.RenderTexture?b:this.renderer.generateTexture(b)),k?(d=k.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],f=d.resolution,g=k.frame,j=!1):(d=this.renderer.rootRenderTarget,f=d.resolution,j=!0,g=h,g.width=d.size.width,g.height=d.size.height);var l=g.width*f,m=g.height*f,n=new e.CanvasRenderTarget(l,m);if(d){c.bindRenderTarget(d);var o=new Uint8Array(i*l*m),p=c.gl;p.readPixels(g.x*f,g.y*f,l,m,p.RGBA,p.UNSIGNED_BYTE,o);var q=n.context.getImageData(0,0,l,m);q.data.set(o),n.context.putImageData(q,0,0),j&&(n.context.scale(1,-1),n.context.drawImage(n.canvas,0,-m))}return n.canvas},a.prototype.pixels=function(b){var c=this.renderer,d=void 0,f=void 0,g=void 0,j=void 0;b&&(j=b instanceof e.RenderTexture?b:this.renderer.generateTexture(b)),j?(d=j.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],f=d.resolution,g=j.frame):(d=this.renderer.rootRenderTarget,f=d.resolution,g=h,g.width=d.size.width,g.height=d.size.height);var k=g.width*f,l=g.height*f,m=new Uint8Array(i*k*l);if(d){c.bindRenderTarget(d);var n=c.gl;n.readPixels(g.x*f,g.y*f,k,l,n.RGBA,n.UNSIGNED_BYTE,m)}return m},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=j,e.WebGLRenderer.registerPlugin("extract",j)},{"../../core":62}],125:[function(a,b,c){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../core"),f=g(e),k=function(a){function b(c){h(this,b);var d=i(this,a.call(this,c[0]instanceof f.Texture?c[0]:c[0].texture));return d._textures=null,d._durations=null,d.textures=c,d.animationSpeed=1,d.loop=!0,d.onComplete=null,d.onFrameChange=null,d._currentTime=0,d.playing=!1,d}return j(b,a),b.prototype.stop=function(){this.playing&&(this.playing=!1,f.ticker.shared.remove(this.update,this))},b.prototype.play=function(){this.playing||(this.playing=!0,f.ticker.shared.add(this.update,this))},b.prototype.gotoAndStop=function(b){this.stop();var c=this.currentFrame;this._currentTime=b,c!==this.currentFrame&&this.updateTexture()},b.prototype.gotoAndPlay=function(b){var c=this.currentFrame;this._currentTime=b,c!==this.currentFrame&&this.updateTexture(),this.play()},b.prototype.update=function(b){var c=this.animationSpeed*b,d=this.currentFrame;if(null!==this._durations){var e=this._currentTime%1*this._durations[this.currentFrame];for(e+=c/60*1e3;e<0;)this._currentTime--,e+=this._durations[this.currentFrame];var f=Math.sign(this.animationSpeed*b);for(this._currentTime=Math.floor(this._currentTime);e>=this._durations[this.currentFrame];)e-=this._durations[this.currentFrame]*f,this._currentTime+=f;this._currentTime+=e/this._durations[this.currentFrame]}else this._currentTime+=c;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):d!==this.currentFrame&&this.updateTexture()},b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},b.prototype.destroy=function(){this.stop(),a.prototype.destroy.call(this)},b.fromFrames=function(c){for(var d=[],e=0;e<c.length;++e)d.push(f.Texture.fromFrame(c[e]));return new b(d)},b.fromImages=function(c){for(var d=[],e=0;e<c.length;++e)d.push(f.Texture.fromImage(c[e]));return new b(d)},d(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(b){if(b[0]instanceof f.Texture)this._textures=b,this._durations=null;else{this._textures=[],this._durations=[];for(var c=0;c<b.length;c++)this._textures.push(b[c].texture),this._durations.push(b[c].time)}}},{key:"currentFrame",get:function(){var b=Math.floor(this._currentTime)%this._textures.length;return b<0&&(b+=this._textures.length),b}}]),b}(f.Sprite);c.default=k},{"../core":62}],126:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function m(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../core"),f=j(e),g=a("../core/math/ObservablePoint"),h=i(g),n=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,b);var e=l(this,a.call(this));return e.textWidth=0,e.textHeight=0,e._glyphs=[],e._font={tint:void 0!==d.tint?d.tint:16777215,align:d.align||"left",name:null,size:0},e.font=d.font,e._text=c,e.maxWidth=0,e.maxLineHeight=0,e._anchor=new h.default(function(){e.dirty=!0},e,0,0),e.dirty=!1,e.updateText(),e}return m(b,a),b.prototype.updateText=function(){for(var c=b.fonts[this._font.name],d=this._font.size/c.size,e=new f.Point,g=[],h=[],i=null,j=0,k=0,l=0,m=-1,n=0,o=0,p=0;p<this.text.length;p++){var q=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(m=p,n=j),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))h.push(j),k=Math.max(k,j),l++,e.x=0,e.y+=c.lineHeight,i=null;else if(m!==-1&&this.maxWidth>0&&e.x*d>this.maxWidth)f.utils.removeItems(g,m,p-m),p=m,m=-1,h.push(n),k=Math.max(k,n),l++,e.x=0,e.y+=c.lineHeight,i=null;else{var r=c.chars[q];r&&(i&&r.kerning[i]&&(e.x+=r.kerning[i]),g.push({texture:r.texture,line:l,charCode:q,position:new f.Point(e.x+r.xOffset,e.y+r.yOffset)}),j=e.x+(r.texture.width+r.xOffset),e.x+=r.xAdvance,o=Math.max(o,r.yOffset+r.texture.height),i=q)}}h.push(j),k=Math.max(k,j);for(var s=[],t=0;t<=l;t++){var u=0;"right"===this._font.align?u=k-h[t]:"center"===this._font.align&&(u=(k-h[t])/2),s.push(u)}for(var v=g.length,w=this.tint,x=0;x<v;x++){var y=this._glyphs[x];y?y.texture=g[x].texture:(y=new f.Sprite(g[x].texture),this._glyphs.push(y)),y.position.x=(g[x].position.x+s[g[x].line])*d,y.position.y=g[x].position.y*d,y.scale.x=y.scale.y=d,y.tint=w,y.parent||this.addChild(y)}for(var z=v;z<this._glyphs.length;++z)this.removeChild(this._glyphs[z]);if(this.textWidth=k*d,this.textHeight=(e.y+c.lineHeight)*d,0!==this.anchor.x||0!==this.anchor.y)for(var A=0;A<v;A++)this._glyphs[A].x-=this.textWidth*this.anchor.x,this._glyphs[A].y-=this.textHeight*this.anchor.y;this.maxLineHeight=o*d},b.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},b.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},d(b,[{key:"tint",get:function(){return this._font.tint},set:function(b){this._font.tint="number"==typeof b&&b>=0?b:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(b){this._font.align=b||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(b){"number"==typeof b?this._anchor.set(b):this._anchor.copy(b)}},{key:"font",get:function(){return this._font},set:function(c){c&&("string"==typeof c?(c=c.split(" "),this._font.name=1===c.length?c[0]:c.slice(1).join(" "),this._font.size=c.length>=2?parseInt(c[0],10):b.fonts[this._font.name].size):(this._font.name=c.name,this._font.size="number"==typeof c.size?c.size:parseInt(c.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(b){b=b.toString()||" ",this._text!==b&&(this._text=b,this.dirty=!0)}}]),b}(f.Container);c.default=n,n.fonts={}},{"../core":62,"../core/math/ObservablePoint":65}],127:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../core/math/Matrix"),f=g(e),i=new f.default,j=function(){function a(b,c){h(this,a),this._texture=b,this.mapCoord=new f.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof c?.5:c}return a.prototype.update=function(b){var c=this.texture;if(c&&c.valid&&(b||this._lastTextureID!==this.texture._updateID)){this._lastTextureID=this.texture._updateID;var d=this.texture._uvs;this.mapCoord.set(d.x1-d.x0,d.y1-d.y0,d.x3-d.x0,d.y3-d.y0,d.x0,d.y0);var e=c.orig,f=c.trim;f&&(i.set(e.width/f.width,0,0,e.height/f.height,-f.x/f.width,-f.y/f.height),this.mapCoord.append(i));var g=c.baseTexture,h=this.uClampFrame,j=this.clampMargin/g.resolution,k=this.clampOffset;h[0]=(c._frame.x+j+k)/g.width,h[1]=(c._frame.y+j+k)/g.height,h[2]=(c._frame.x+c._frame.width-j+k)/g.width,h[3]=(c._frame.y+c._frame.height-j+k)/g.height,this.uClampOffset[0]=k/g.realWidth,this.uClampOffset[1]=k/g.realHeight}},d(a,[{key:"texture",get:function(){return this._texture},set:function(b){this._texture=b,this._lastTextureID=-1}}]),a}();c.default=j},{"../core/math/Matrix":64}],128:[function(a,b,c){"use strict";function k(a){return a&&a.__esModule?a:{default:a}}function l(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function o(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../core"),f=l(e),g=a("../core/sprites/canvas/CanvasTinter"),h=k(g),i=a("./TextureTransform"),j=k(i),p=new f.Point,q=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;m(this,b);var g=n(this,a.call(this,c));return g.tileTransform=new f.TransformStatic,g._width=d,g._height=e,g._canvasPattern=null,g.uvTransform=c.transform||new j.default(c),g}return o(b,a),b.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},b.prototype._renderWebGL=function(b){var c=this._texture;c&&c.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),b.setObjectRenderer(b.plugins.tilingSprite),b.plugins.tilingSprite.render(this))},b.prototype._renderCanvas=function(b){var c=this._texture;if(c.baseTexture.hasLoaded){var d=b.context,e=this.worldTransform,g=b.resolution,i=c.baseTexture,j=c.baseTexture.resolution,k=this.tilePosition.x/this.tileScale.x%c._frame.width,l=this.tilePosition.y/this.tileScale.y%c._frame.height;if(!this._canvasPattern){var m=new f.CanvasRenderTarget(c._frame.width,c._frame.height,j);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=h.default.getTintedTexture(this,this.tint)),m.context.drawImage(this.tintedTexture,0,0)):m.context.drawImage(i.source,-c._frame.x,-c._frame.y),this._canvasPattern=m.context.createPattern(m.canvas,"repeat")}d.globalAlpha=this.worldAlpha,d.setTransform(e.a*g,e.b*g,e.c*g,e.d*g,e.tx*g,e.ty*g),d.scale(this.tileScale.x/j,this.tileScale.y/j),d.translate(k+this.anchor.x*-this._width,l+this.anchor.y*-this._height),b.setBlendMode(this.blendMode),d.fillStyle=this._canvasPattern,d.fillRect(-k,-l,this._width/this.tileScale.x*j,this._height/this.tileScale.y*j)}},b.prototype._calculateBounds=function(){var b=this._width*-this._anchor._x,c=this._height*-this._anchor._y,d=this._width*(1-this._anchor._x),e=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,b,c,d,e)},b.prototype.getLocalBounds=function(c){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),c||(this._localBoundsRect||(this._localBoundsRect=new f.Rectangle),c=this._localBoundsRect),this._bounds.getRectangle(c)):a.prototype.getLocalBounds.call(this,c)},b.prototype.containsPoint=function(b){this.worldTransform.applyInverse(b,p);var c=this._width,d=this._height,e=-c*this.anchor._x;if(p.x>e&&p.x<e+c){var f=-d*this.anchor._y;if(p.y>f&&p.y<f+d)return!0}return!1},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},b.from=function(c,d,e){return new b(f.Texture.from(c),d,e)},b.fromFrame=function(c,d,e){var g=f.utils.TextureCache[c];if(!g)throw new Error('The frameId "'+c+'" does not exist in the texture cache '+this);return new b(g,d,e)},b.fromImage=function(c,d,e,g,h){return new b(f.Texture.fromImage(c,g,h),d,e)},d(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(b){this.uvTransform.clampMargin=b,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(b){this.tileTransform.scale.copy(b)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(b){this.tileTransform.position.copy(b)}},{key:"width",get:function(){return this._width},set:function(b){this._width=b}},{key:"height",get:function(){return this._height},set:function(b){this._height=b}}]),b}(f.Sprite);c.default=q},{"../core":62,"../core/sprites/canvas/CanvasTinter":101,"./TextureTransform":127}],129:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=a("../core"),e=f(d),h=e.DisplayObject,i=new e.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var j=function a(){g(this,a),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(b){if(this._cacheAsBitmap!==b){this._cacheAsBitmap=b;var c=void 0;b?(this._cacheData||(this._cacheData=new j),c=this._cacheData,c.originalRenderWebGL=this.renderWebGL,c.originalRenderCanvas=this.renderCanvas,c.originalUpdateTransform=this.updateTransform,c.originalCalculateBounds=this._calculateBounds,c.originalGetLocalBounds=this.getLocalBounds,c.originalDestroy=this.destroy,c.originalContainsPoint=this.containsPoint,c.originalMask=this._mask,c.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(c=this._cacheData,c.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=c.originalRenderWebGL,this.renderCanvas=c.originalRenderCanvas,this._calculateBounds=c.originalCalculateBounds,this.getLocalBounds=c.originalGetLocalBounds,this.destroy=c.originalDestroy,this.updateTransform=c.originalUpdateTransform,this.containsPoint=c.originalContainsPoint,this._mask=c.originalMask,this.filterArea=c.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(b){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(b),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(b))},h.prototype._initCachedDisplayObject=function(b){if(!this._cacheData||!this._cacheData.sprite){var c=this.alpha;this.alpha=1,b.currentRenderer.flush();var d=this.getLocalBounds().clone();if(this._filters){var f=this._filters[0].padding;d.pad(f)}var g=b._activeRenderTarget,h=b.filterManager.filterStack,j=e.RenderTexture.create(0|d.width,0|d.height),k=i;k.tx=-d.x,k.ty=-d.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,b.render(this,j,!0,k,!0),b.bindRenderTarget(g),b.filterManager.filterStack=h,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var l=new e.Sprite(j);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(d.x/d.width),l.anchor.y=-(d.y/d.height),l.alpha=c,l._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=l.containsPoint.bind(l)}},h.prototype._renderCachedCanvas=function(b){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(b),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(b))},h.prototype._initCachedDisplayObjectCanvas=function(b){if(!this._cacheData||!this._cacheData.sprite){var c=this.getLocalBounds(),d=this.alpha;this.alpha=1;var f=b.context,g=e.RenderTexture.create(0|c.width,0|c.height),h=i;this.transform.worldTransform.copy(h),h.invert(),h.tx-=c.x,h.ty-=c.y,this.renderCanvas=this._cacheData.originalRenderCanvas,b.render(this,g,!0,h,!1),b.context=f,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var j=new e.Sprite(g);j.transform.worldTransform=this.transform.worldTransform,j.anchor.x=-(c.x/c.width),j.anchor.y=-(c.y/c.height),j._bounds=this._bounds,j.alpha=d,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=j,this.containsPoint=j.containsPoint.bind(j)}},h.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},h.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":62}],130:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}var d=a("../core"),e=f(d);e.DisplayObject.prototype.name=null,e.Container.prototype.getChildByName=function(b){for(var c=0;c<this.children.length;c++)if(this.children[c].name===b)return this.children[c];return null}},{"../core":62}],131:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}var d=a("../core"),e=f(d);e.DisplayObject.prototype.getGlobalPosition=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.Point,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,b,c):(b.x=this.position.x,b.y=this.position.y),b}},{"../core":62}],132:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.BitmapText=c.TilingSpriteRenderer=c.TilingSprite=c.AnimatedSprite=c.TextureTransform=void 0;var d=a("./TextureTransform");Object.defineProperty(c,"TextureTransform",{enumerable:!0,get:function(){return i(d).default}});var e=a("./AnimatedSprite");Object.defineProperty(c,"AnimatedSprite",{enumerable:!0,get:function(){return i(e).default}});var f=a("./TilingSprite");Object.defineProperty(c,"TilingSprite",{enumerable:!0,get:function(){return i(f).default}});var g=a("./webgl/TilingSpriteRenderer");Object.defineProperty(c,"TilingSpriteRenderer",{enumerable:!0,get:function(){return i(g).default}});var h=a("./BitmapText");Object.defineProperty(c,"BitmapText",{enumerable:!0,get:function(){return i(h).default}}),a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition")},{"./AnimatedSprite":125,"./BitmapText":126,"./TextureTransform":127,"./TilingSprite":128,"./cacheAsBitmap":129,"./getChildByName":130,"./getGlobalPosition":131,"./webgl/TilingSpriteRenderer":133}],133:[function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core"),e=h(d),f=a("../../core/const"),l=(a("path"),new e.Matrix),m=new Float32Array(4),n=function(a){function b(c){i(this,b);var d=j(this,a.call(this,c));return d.shader=null,d.simpleShader=null,d.quad=null,d}return k(b,a),b.prototype.onContextChange=function(){var b=this.renderer.gl;this.shader=new e.Shader(b,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),
    this.simpleShader=new e.Shader(b,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new e.Quad(b,this.renderer.state.attribState),this.quad.initVao(this.shader)},b.prototype.render=function(b){var c=this.renderer,d=this.quad;c.bindVao(d.vao);var g=d.vertices;g[0]=g[6]=b._width*-b.anchor.x,g[1]=g[3]=b._height*-b.anchor.y,g[2]=g[4]=b._width*(1-b.anchor.x),g[5]=g[7]=b._height*(1-b.anchor.y),g=d.uvs,g[0]=g[6]=-b.anchor.x,g[1]=g[3]=-b.anchor.y,g[2]=g[4]=1-b.anchor.x,g[5]=g[7]=1-b.anchor.y,d.upload();var h=b._texture,i=h.baseTexture,j=b.tileTransform.localTransform,k=b.uvTransform,n=i.isPowerOfTwo&&h.frame.width===i.width&&h.frame.height===i.height;n&&(i._glTextures[c.CONTEXT_UID]?n=i.wrapMode!==f.WRAP_MODES.CLAMP:i.wrapMode===f.WRAP_MODES.CLAMP&&(i.wrapMode=f.WRAP_MODES.REPEAT));var o=n?this.simpleShader:this.shader;c.bindShader(o);var p=h.width,q=h.height,r=b._width,s=b._height;l.set(j.a*p/r,j.b*p/s,j.c*q/r,j.d*q/s,j.tx/r,j.ty/s),l.invert(),n?l.append(k.mapCoord):(o.uniforms.uMapCoord=k.mapCoord.toArray(!0),o.uniforms.uClampFrame=k.uClampFrame,o.uniforms.uClampOffset=k.uClampOffset),o.uniforms.uTransform=l.toArray(!0);var t=m;e.utils.hex2rgb(b.tint,t),t[3]=b.worldAlpha,o.uniforms.uColor=t,o.uniforms.translationMatrix=b.transform.worldTransform.toArray(!0),o.uniforms.uSampler=c.bindTexture(h),c.setBlendMode(b.blendMode),d.vao.draw(this.renderer.gl.TRIANGLES,6,0)},b}(e.ObjectRenderer);c.default=n,e.WebGLRenderer.registerPlugin("tilingSprite",n)},{"../../core":62,"../../core/const":43,path:22}],134:[function(a,b,c){"use strict";function k(a){return a&&a.__esModule?a:{default:a}}function l(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function o(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=l(e),g=a("./BlurXFilter"),h=k(g),i=a("./BlurYFilter"),j=k(i),p=function(a){function b(c,d,e){m(this,b);var f=n(this,a.call(this));return f.blurXFilter=new h.default,f.blurYFilter=new j.default,f.resolution=1,f.padding=0,f.resolution=e||1,f.quality=d||4,f.blur=c||8,f}return o(b,a),b.prototype.apply=function(b,c,d){var e=b.getRenderTarget(!0);this.blurXFilter.apply(b,c,e,!0),this.blurYFilter.apply(b,e,d,!1),b.returnRenderTarget(e)},d(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(b){this.blurXFilter.blur=this.blurYFilter.blur=b,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(b){this.blurXFilter.quality=this.blurYFilter.quality=b}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(b){this.blurXFilter.blur=b,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(b){this.blurYFilter.blur=b,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),b}(f.Filter);c.default=p},{"../../core":62,"./BlurXFilter":135,"./BlurYFilter":136}],135:[function(a,b,c){"use strict";function m(a){return a&&a.__esModule?a:{default:a}}function n(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function o(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function p(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function q(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=n(e),g=a("./generateBlurVertSource"),h=m(g),i=a("./generateBlurFragSource"),j=m(i),k=a("./getMaxBlurKernelSize"),l=m(k),r=function(a){function b(c,d,e){o(this,b);var f=(0,h.default)(5,!0),g=(0,j.default)(5),i=p(this,a.call(this,f,g));return i.resolution=e||1,i._quality=0,i.quality=d||4,i.strength=c||8,i.firstRun=!0,i}return q(b,a),b.prototype.apply=function(b,c,d,e){if(this.firstRun){var f=b.renderer.gl,g=(0,l.default)(f);this.vertexSrc=(0,h.default)(g,!0),this.fragmentSrc=(0,j.default)(g),this.firstRun=!1}if(this.uniforms.strength=1/d.size.width*(d.size.width/c.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)b.applyFilter(this,c,d,e);else{for(var i=b.getRenderTarget(!0),k=c,m=i,n=0;n<this.passes-1;n++){b.applyFilter(this,k,m,!0);var o=m;m=k,k=o}b.applyFilter(this,k,d,e),b.returnRenderTarget(i)}},d(b,[{key:"blur",get:function(){return this.strength},set:function(b){this.padding=2*Math.abs(b),this.strength=b}},{key:"quality",get:function(){return this._quality},set:function(b){this._quality=b,this.passes=b}}]),b}(f.Filter);c.default=r},{"../../core":62,"./generateBlurFragSource":137,"./generateBlurVertSource":138,"./getMaxBlurKernelSize":139}],136:[function(a,b,c){"use strict";function m(a){return a&&a.__esModule?a:{default:a}}function n(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function o(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function p(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function q(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=n(e),g=a("./generateBlurVertSource"),h=m(g),i=a("./generateBlurFragSource"),j=m(i),k=a("./getMaxBlurKernelSize"),l=m(k),r=function(a){function b(c,d,e){o(this,b);var f=(0,h.default)(5,!1),g=(0,j.default)(5),i=p(this,a.call(this,f,g));return i.resolution=e||1,i._quality=0,i.quality=d||4,i.strength=c||8,i.firstRun=!0,i}return q(b,a),b.prototype.apply=function(b,c,d,e){if(this.firstRun){var f=b.renderer.gl,g=(0,l.default)(f);this.vertexSrc=(0,h.default)(g,!1),this.fragmentSrc=(0,j.default)(g),this.firstRun=!1}if(this.uniforms.strength=1/d.size.height*(d.size.height/c.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)b.applyFilter(this,c,d,e);else{for(var i=b.getRenderTarget(!0),k=c,m=i,n=0;n<this.passes-1;n++){b.applyFilter(this,k,m,!0);var o=m;m=k,k=o}b.applyFilter(this,k,d,e),b.returnRenderTarget(i)}},d(b,[{key:"blur",get:function(){return this.strength},set:function(b){this.padding=2*Math.abs(b),this.strength=b}},{key:"quality",get:function(){return this._quality},set:function(b){this._quality=b,this.passes=b}}]),b}(f.Filter);c.default=r},{"../../core":62,"./generateBlurFragSource":137,"./generateBlurVertSource":138,"./getMaxBlurKernelSize":139}],137:[function(a,b,c){"use strict";function f(a){for(var b=d[a],c=b.length,f=e,g="",h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",i=void 0,j=0;j<a;j++){var k=h.replace("%index%",j);i=j,j>=c&&(i=a-j-1),k=k.replace("%value%",b[i]),g+=k,g+="\n"}return f=f.replace("%blur%",g),f=f.replace("%size%",a)}c.__esModule=!0,c.default=f;var d={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],138:[function(a,b,c){"use strict";function e(a,b){var c=Math.ceil(a/2),e=d,f="",g=void 0;g=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<a;h++){var i=g.replace("%index%",h);i=i.replace("%sampleIndex%",h-(c-1)+".0"),f+=i,f+="\n"}return e=e.replace("%blur%",f),e=e.replace("%size%",a)}c.__esModule=!0,c.default=e;var d=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],139:[function(a,b,c){"use strict";function d(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c}c.__esModule=!0,c.default=d},{}],140:[function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=h(e),l=(a("path"),function(a){function b(){i(this,b);var c=j(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"));return c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],c}return k(b,a),b.prototype._loadMatrix=function(b){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=b;c&&(this._multiply(d,this.uniforms.m,b),d=this._colorMatrix(d)),this.uniforms.m=d},b.prototype._multiply=function(b,c,d){return b[0]=c[0]*d[0]+c[1]*d[5]+c[2]*d[10]+c[3]*d[15],b[1]=c[0]*d[1]+c[1]*d[6]+c[2]*d[11]+c[3]*d[16],b[2]=c[0]*d[2]+c[1]*d[7]+c[2]*d[12]+c[3]*d[17],b[3]=c[0]*d[3]+c[1]*d[8]+c[2]*d[13]+c[3]*d[18],b[4]=c[0]*d[4]+c[1]*d[9]+c[2]*d[14]+c[3]*d[19],b[5]=c[5]*d[0]+c[6]*d[5]+c[7]*d[10]+c[8]*d[15],b[6]=c[5]*d[1]+c[6]*d[6]+c[7]*d[11]+c[8]*d[16],b[7]=c[5]*d[2]+c[6]*d[7]+c[7]*d[12]+c[8]*d[17],b[8]=c[5]*d[3]+c[6]*d[8]+c[7]*d[13]+c[8]*d[18],b[9]=c[5]*d[4]+c[6]*d[9]+c[7]*d[14]+c[8]*d[19],b[10]=c[10]*d[0]+c[11]*d[5]+c[12]*d[10]+c[13]*d[15],b[11]=c[10]*d[1]+c[11]*d[6]+c[12]*d[11]+c[13]*d[16],b[12]=c[10]*d[2]+c[11]*d[7]+c[12]*d[12]+c[13]*d[17],b[13]=c[10]*d[3]+c[11]*d[8]+c[12]*d[13]+c[13]*d[18],b[14]=c[10]*d[4]+c[11]*d[9]+c[12]*d[14]+c[13]*d[19],b[15]=c[15]*d[0]+c[16]*d[5]+c[17]*d[10]+c[18]*d[15],b[16]=c[15]*d[1]+c[16]*d[6]+c[17]*d[11]+c[18]*d[16],b[17]=c[15]*d[2]+c[16]*d[7]+c[17]*d[12]+c[18]*d[17],b[18]=c[15]*d[3]+c[16]*d[8]+c[17]*d[13]+c[18]*d[18],b[19]=c[15]*d[4]+c[16]*d[9]+c[17]*d[14]+c[18]*d[19],b},b.prototype._colorMatrix=function(b){var c=new Float32Array(b);return c[4]/=255,c[9]/=255,c[14]/=255,c[19]/=255,c},b.prototype.brightness=function(b,c){var d=[b,0,0,0,0,0,b,0,0,0,0,0,b,0,0,0,0,0,1,0];this._loadMatrix(d,c)},b.prototype.greyscale=function(b,c){var d=[b,b,b,0,0,b,b,b,0,0,b,b,b,0,0,0,0,0,1,0];this._loadMatrix(d,c)},b.prototype.blackAndWhite=function(b){var c=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.hue=function(b,c){b=(b||0)/180*Math.PI;var d=Math.cos(b),e=Math.sin(b),f=Math.sqrt,g=1/3,h=f(g),i=d+(1-d)*g,j=g*(1-d)-h*e,k=g*(1-d)+h*e,l=g*(1-d)+h*e,m=d+g*(1-d),n=g*(1-d)-h*e,o=g*(1-d)-h*e,p=g*(1-d)+h*e,q=d+g*(1-d),r=[i,j,k,0,0,l,m,n,0,0,o,p,q,0,0,0,0,0,1,0];this._loadMatrix(r,c)},b.prototype.contrast=function(b,c){var d=(b||0)+1,e=-128*(d-1),f=[d,0,0,0,e,0,d,0,0,e,0,0,d,0,e,0,0,0,1,0];this._loadMatrix(f,c)},b.prototype.saturate=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments[1],d=2*b/3+1,e=(d-1)*-.5,f=[d,e,e,0,0,e,d,e,0,0,e,e,d,0,0,0,0,0,1,0];this._loadMatrix(f,c)},b.prototype.desaturate=function(){this.saturate(-1)},b.prototype.negative=function(b){var c=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.sepia=function(b){var c=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.technicolor=function(b){var c=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.polaroid=function(b){var c=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.toBGR=function(b){var c=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.kodachrome=function(b){var c=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.browni=function(b){var c=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.vintage=function(b){var c=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.colorTone=function(b,c,d,e,f){b=b||.2,c=c||.15,d=d||16770432,e=e||3375104;var g=(d>>16&255)/255,h=(d>>8&255)/255,i=(255&d)/255,j=(e>>16&255)/255,k=(e>>8&255)/255,l=(255&e)/255,m=[.3,.59,.11,0,0,g,h,i,b,0,j,k,l,c,0,g-j,h-k,i-l,0,0];this._loadMatrix(m,f)},b.prototype.night=function(b,c){b=b||.1;var d=[b*-2,-b,0,0,0,-b,0,b,0,0,0,b,2*b,0,0,0,0,0,1,0];this._loadMatrix(d,c)},b.prototype.predator=function(b,c){var d=[11.224130630493164*b,-4.794486999511719*b,-2.8746118545532227*b,0*b,.40342438220977783*b,-3.6330697536468506*b,9.193157196044922*b,-2.951810836791992*b,0*b,-1.316135048866272*b,-3.2184197902679443*b,-4.2375030517578125*b,7.476448059082031*b,0*b,.8044459223747253*b,0,0,0,1,0];this._loadMatrix(d,c)},b.prototype.lsd=function(b){var c=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.reset=function(){var b=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(b,!1)},d(b,[{key:"matrix",get:function(){return this.uniforms.m},set:function(b){this.uniforms.m=b}}]),b}(f.Filter));c.default=l,l.prototype.grayscale=l.prototype.greyscale},{"../../core":62,path:22}],141:[function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=h(e),l=(a("path"),function(a){function b(c,d){i(this,b);var e=new f.Matrix;c.renderable=!1;var g=j(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return g.maskSprite=c,g.maskMatrix=e,g.uniforms.mapSampler=c.texture,g.uniforms.filterMatrix=e.toArray(!0),g.uniforms.scale={x:1,y:1},null!==d&&void 0!==d||(d=20),g.scale=new f.Point(d,d),g}return k(b,a),b.prototype.apply=function(b,c,d){var e=1/d.destinationFrame.width*(d.size.width/c.size.width);this.uniforms.filterMatrix=b.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*e,this.uniforms.scale.y=this.scale.y*e,b.applyFilter(this,c,d)},d(b,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(b){this.uniforms.mapSampler=b}}]),b}(f.Filter));c.default=l},{"../../core":62,path:22}],142:[function(a,b,c){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core"),e=g(d),k=(a("path"),function(a){function b(){return h(this,b),i(this,a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return j(b,a),b}(e.Filter));c.default=k},{"../../core":62,path:22}],143:[function(a,b,c){"use strict";function l(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./fxaa/FXAAFilter");Object.defineProperty(c,"FXAAFilter",{enumerable:!0,get:function(){return l(d).default}});var e=a("./noise/NoiseFilter");Object.defineProperty(c,"NoiseFilter",{enumerable:!0,get:function(){return l(e).default}});var f=a("./displacement/DisplacementFilter");Object.defineProperty(c,"DisplacementFilter",{enumerable:!0,get:function(){return l(f).default}});var g=a("./blur/BlurFilter");Object.defineProperty(c,"BlurFilter",{enumerable:!0,get:function(){return l(g).default}});var h=a("./blur/BlurXFilter");Object.defineProperty(c,"BlurXFilter",{enumerable:!0,get:function(){return l(h).default}});var i=a("./blur/BlurYFilter");Object.defineProperty(c,"BlurYFilter",{enumerable:!0,get:function(){return l(i).default}});var j=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(c,"ColorMatrixFilter",{enumerable:!0,get:function(){return l(j).default}});var k=a("./void/VoidFilter");Object.defineProperty(c,"VoidFilter",{enumerable:!0,get:function(){return l(k).default}})},{"./blur/BlurFilter":134,"./blur/BlurXFilter":135,"./blur/BlurYFilter":136,"./colormatrix/ColorMatrixFilter":140,"./displacement/DisplacementFilter":141,"./fxaa/FXAAFilter":142,"./noise/NoiseFilter":144,"./void/VoidFilter":145}],144:[function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../../core"),f=h(e),l=(a("path"),function(a){function b(){i(this,b);var c=j(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return c.noise=.5,c}return k(b,a),d(b,[{key:"noise",get:function(){return this.uniforms.noise},set:function(b){this.uniforms.noise=b}}]),b}(f.Filter));c.default=l},{"../../core":62,path:22}],145:[function(a,b,c){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{
    constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core"),e=g(d),k=(a("path"),function(a){function b(){h(this,b);var c=i(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return c.glShaderKey="void",c}return j(b,a),b}(e.Filter));c.default=k},{"../../core":62,path:22}],146:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../core"),e=f(d),h=function(){function a(){g(this,a),this.global=new e.Point,this.target=null,this.originalEvent=null}return a.prototype.getLocalPosition=function(b,c,d){return b.worldTransform.applyInverse(d||this.global,c)},a}();c.default=h},{"../core":62}],147:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){d(this,a),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return a.prototype.stopPropagation=function(){this.stopped=!0},a.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},a}();c.default=e},{}],148:[function(a,b,c){"use strict";function p(a){return a&&a.__esModule?a:{default:a}}function q(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function r(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function s(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function t(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../core"),e=q(d),f=a("./InteractionData"),g=p(f),h=a("./InteractionEvent"),i=p(h),j=a("eventemitter3"),k=p(j),l=a("./interactiveTarget"),m=p(l),n=a("ismobilejs"),o=p(n);Object.assign(e.DisplayObject.prototype,m.default);var u=function(a){function b(c,d){r(this,b);var f=s(this,a.call(this));return d=d||{},f.renderer=c,f.autoPreventDefault=void 0===d.autoPreventDefault||d.autoPreventDefault,f.interactionFrequency=d.interactionFrequency||10,f.mouse=new g.default,f.mouse.global.set(-999999),f.pointer=new g.default,f.pointer.global.set(-999999),f.eventData=new i.default,f.interactiveDataPool=[],f.interactionDOMElement=null,f.moveWhenInside=!1,f.eventsAdded=!1,f.mouseOverRenderer=!1,f.supportsTouchEvents="ontouchstart"in window,f.supportsPointerEvents=!!window.PointerEvent,f.normalizeTouchEvents=!f.supportsPointerEvents&&f.supportsTouchEvents,f.normalizeMouseEvents=!f.supportsPointerEvents&&!o.default.any,f.onMouseUp=f.onMouseUp.bind(f),f.processMouseUp=f.processMouseUp.bind(f),f.onMouseDown=f.onMouseDown.bind(f),f.processMouseDown=f.processMouseDown.bind(f),f.onMouseMove=f.onMouseMove.bind(f),f.processMouseMove=f.processMouseMove.bind(f),f.onMouseOut=f.onMouseOut.bind(f),f.processMouseOverOut=f.processMouseOverOut.bind(f),f.onMouseOver=f.onMouseOver.bind(f),f.onPointerUp=f.onPointerUp.bind(f),f.processPointerUp=f.processPointerUp.bind(f),f.onPointerDown=f.onPointerDown.bind(f),f.processPointerDown=f.processPointerDown.bind(f),f.onPointerMove=f.onPointerMove.bind(f),f.processPointerMove=f.processPointerMove.bind(f),f.onPointerOut=f.onPointerOut.bind(f),f.processPointerOverOut=f.processPointerOverOut.bind(f),f.onPointerOver=f.onPointerOver.bind(f),f.onTouchStart=f.onTouchStart.bind(f),f.processTouchStart=f.processTouchStart.bind(f),f.onTouchEnd=f.onTouchEnd.bind(f),f.processTouchEnd=f.processTouchEnd.bind(f),f.onTouchMove=f.onTouchMove.bind(f),f.processTouchMove=f.processTouchMove.bind(f),f.defaultCursorStyle="inherit",f.currentCursorStyle="inherit",f._tempPoint=new e.Point,f.resolution=1,f.setTargetElement(f.renderer.view,f.renderer.resolution),f}return t(b,a),b.prototype.setTargetElement=function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=b,this.resolution=c,this.addEvents()},b.prototype.addEvents=function(){this.interactionDOMElement&&(e.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0))),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0)),this.eventsAdded=!0)},b.prototype.removeEvents=function(){this.interactionDOMElement&&(e.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0))),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},b.prototype.update=function(b){if(this._deltaTime+=b,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.eventData._reset(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},b.prototype.dispatchEvent=function(b,c,d){d.stopped||(d.currentTarget=b,d.type=c,b.emit(c,d),b[c]&&b[c](d))},b.prototype.mapPositionToPoint=function(b,c,d){var e=void 0;e=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},b.x=(c-e.left)*(this.interactionDOMElement.width/e.width)/this.resolution,b.y=(d-e.top)*(this.interactionDOMElement.height/e.height)/this.resolution},b.prototype.processInteractive=function(b,c,d,e,f){if(!c||!c.visible)return!1;f=c.interactive||f;var g=!1,h=f;if(c.hitArea&&(h=!1),e&&c._mask&&(c._mask.containsPoint(b)||(e=!1)),e&&c.filterArea&&(c.filterArea.contains(b.x,b.y)||(e=!1)),c.interactiveChildren&&c.children)for(var i=c.children,j=i.length-1;j>=0;j--){var k=i[j];if(this.processInteractive(b,k,d,e,h)){if(!k.parent)continue;g=!0,h=!1,e=!1}}return f&&(e&&!g&&(c.hitArea?(c.worldTransform.applyInverse(b,this._tempPoint),g=c.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):c.containsPoint&&(g=c.containsPoint(b))),c.interactive&&(g&&!this.eventData.target&&(this.eventData.target=c,this.mouse.target=c,this.pointer.target=c),d(c,g))),g},b.prototype.onMouseDown=function(b){this.mouse.originalEvent=b,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,b.clientX,b.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var c=2===b.button||3===b.which;this.emit(c?"rightdown":"mousedown",this.eventData)},b.prototype.processMouseDown=function(b,c){var d=this.mouse.originalEvent,e=2===d.button||3===d.which;c&&(b[e?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(b,e?"rightdown":"mousedown",this.eventData))},b.prototype.onMouseUp=function(b){this.mouse.originalEvent=b,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,b.clientX,b.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var c=2===b.button||3===b.which;this.emit(c?"rightup":"mouseup",this.eventData)},b.prototype.processMouseUp=function(b,c){var d=this.mouse.originalEvent,e=2===d.button||3===d.which,f=e?"_isRightDown":"_isLeftDown";c?(this.dispatchEvent(b,e?"rightup":"mouseup",this.eventData),b[f]&&(b[f]=!1,this.dispatchEvent(b,e?"rightclick":"click",this.eventData))):b[f]&&(b[f]=!1,this.dispatchEvent(b,e?"rightupoutside":"mouseupoutside",this.eventData))},b.prototype.onMouseMove=function(b){this.mouse.originalEvent=b,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,b.clientX,b.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},b.prototype.processMouseMove=function(b,c){this.processMouseOverOut(b,c),this.moveWhenInside&&!c||this.dispatchEvent(b,"mousemove",this.eventData)},b.prototype.onMouseOut=function(b){this.mouseOverRenderer=!1,this.mouse.originalEvent=b,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,b.clientX,b.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,b.clientX,b.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},b.prototype.processMouseOverOut=function(b,c){c&&this.mouseOverRenderer?(b._mouseOver||(b._mouseOver=!0,this.dispatchEvent(b,"mouseover",this.eventData)),b.buttonMode&&(this.cursor=b.defaultCursor)):b._mouseOver&&(b._mouseOver=!1,this.dispatchEvent(b,"mouseout",this.eventData))},b.prototype.onMouseOver=function(b){this.mouseOverRenderer=!0,this.mouse.originalEvent=b,this.eventData.data=this.mouse,this.eventData._reset(),this.emit("mouseover",this.eventData)},b.prototype.onPointerDown=function(b){this.normalizeToPointerData(b),this.pointer.originalEvent=b,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,b.clientX,b.clientY),this.autoPreventDefault&&(this.normalizeMouseEvents||this.normalizeTouchEvents)&&this.pointer.originalEvent.preventDefault(),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",this.eventData)},b.prototype.processPointerDown=function(b,c){c&&(b._pointerDown=!0,this.dispatchEvent(b,"pointerdown",this.eventData))},b.prototype.onPointerUp=function(b){this.normalizeToPointerData(b),this.pointer.originalEvent=b,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,b.clientX,b.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerUp,!0),this.emit("pointerup",this.eventData)},b.prototype.processPointerUp=function(b,c){c?(this.dispatchEvent(b,"pointerup",this.eventData),b._pointerDown&&(b._pointerDown=!1,this.dispatchEvent(b,"pointertap",this.eventData))):b._pointerDown&&(b._pointerDown=!1,this.dispatchEvent(b,"pointerupoutside",this.eventData))},b.prototype.onPointerMove=function(b){this.normalizeToPointerData(b),this.pointer.originalEvent=b,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,b.clientX,b.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",this.eventData)},b.prototype.processPointerMove=function(b,c){this.pointer.originalEvent.changedTouches||this.processPointerOverOut(b,c),this.moveWhenInside&&!c||this.dispatchEvent(b,"pointermove",this.eventData)},b.prototype.onPointerOut=function(b){this.normalizeToPointerData(b),this.pointer.originalEvent=b,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,b.clientX,b.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",this.eventData)},b.prototype.processPointerOverOut=function(b,c){c&&this.mouseOverRenderer?b._pointerOver||(b._pointerOver=!0,this.dispatchEvent(b,"pointerover",this.eventData)):b._pointerOver&&(b._pointerOver=!1,this.dispatchEvent(b,"pointerout",this.eventData))},b.prototype.onPointerOver=function(b){this.pointer.originalEvent=b,this.eventData.data=this.pointer,this.eventData._reset(),this.emit("pointerover",this.eventData)},b.prototype.onTouchStart=function(b){this.autoPreventDefault&&b.preventDefault();for(var c=b.changedTouches,d=c.length,e=0;e<d;e++){var f=c[e],g=this.getTouchData(f);g.originalEvent=b,this.eventData.data=g,this.eventData._reset(),this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(g)}},b.prototype.processTouchStart=function(b,c){c&&(b._touchDown=!0,this.dispatchEvent(b,"touchstart",this.eventData))},b.prototype.onTouchEnd=function(b){this.autoPreventDefault&&b.preventDefault();for(var c=b.changedTouches,d=c.length,e=0;e<d;e++){var f=c[e],g=this.getTouchData(f);g.originalEvent=b,this.eventData.data=g,this.eventData._reset(),this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(g)}},b.prototype.processTouchEnd=function(b,c){c?(this.dispatchEvent(b,"touchend",this.eventData),b._touchDown&&(b._touchDown=!1,this.dispatchEvent(b,"tap",this.eventData))):b._touchDown&&(b._touchDown=!1,this.dispatchEvent(b,"touchendoutside",this.eventData))},b.prototype.onTouchMove=function(b){this.autoPreventDefault&&b.preventDefault();for(var c=b.changedTouches,d=c.length,e=0;e<d;e++){var f=c[e],g=this.getTouchData(f);g.originalEvent=b,this.eventData.data=g,this.eventData._reset(),this.processInteractive(g.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(g)}},b.prototype.processTouchMove=function(b,c){this.moveWhenInside&&!c||this.dispatchEvent(b,"touchmove",this.eventData)},b.prototype.getTouchData=function(b){var c=this.interactiveDataPool.pop()||new g.default;return c.identifier=b.identifier,this.mapPositionToPoint(c.global,b.clientX,b.clientY),navigator.isCocoonJS&&(c.global.x=c.global.x/this.resolution,c.global.y=c.global.y/this.resolution),b.globalX=c.global.x,b.globalY=c.global.y,c},b.prototype.returnTouchData=function(b){this.interactiveDataPool.push(b)},b.prototype.normalizeToPointerData=function(b){this.normalizeTouchEvents&&b.changedTouches?("undefined"==typeof b.button&&(b.button=b.touches.length?1:0),"undefined"==typeof b.buttons&&(b.buttons=b.touches.length?1:0),"undefined"==typeof b.isPrimary&&(b.isPrimary=1===b.touches.length),"undefined"==typeof b.width&&(b.width=b.changedTouches[0].radiusX||1),"undefined"==typeof b.height&&(b.height=b.changedTouches[0].radiusY||1),"undefined"==typeof b.tiltX&&(b.tiltX=0),"undefined"==typeof b.tiltY&&(b.tiltY=0),"undefined"==typeof b.pointerType&&(b.pointerType="touch"),"undefined"==typeof b.pointerId&&(b.pointerId=b.changedTouches[0].identifier||0),"undefined"==typeof b.pressure&&(b.pressure=b.changedTouches[0].force||.5),"undefined"==typeof b.rotation&&(b.rotation=b.changedTouches[0].rotationAngle||0),"undefined"==typeof b.clientX&&(b.clientX=b.changedTouches[0].clientX),"undefined"==typeof b.clientY&&(b.clientY=b.changedTouches[0].clientY),"undefined"==typeof b.pageX&&(b.pageX=b.changedTouches[0].pageX),"undefined"==typeof b.pageY&&(b.pageY=b.changedTouches[0].pageY),"undefined"==typeof b.screenX&&(b.screenX=b.changedTouches[0].screenX),"undefined"==typeof b.screenY&&(b.screenY=b.changedTouches[0].screenY),"undefined"==typeof b.layerX&&(b.layerX=b.offsetX=b.clientX),"undefined"==typeof b.layerY&&(b.layerY=b.offsetY=b.clientY)):this.normalizeMouseEvents&&("undefined"==typeof b.isPrimary&&(b.isPrimary=!0),"undefined"==typeof b.width&&(b.width=1),"undefined"==typeof b.height&&(b.height=1),"undefined"==typeof b.tiltX&&(b.tiltX=0),"undefined"==typeof b.tiltY&&(b.tiltY=0),"undefined"==typeof b.pointerType&&(b.pointerType="mouse"),"undefined"==typeof b.pointerId&&(b.pointerId=1),"undefined"==typeof b.pressure&&(b.pressure=.5),"undefined"==typeof b.rotation&&(b.rotation=0))},b.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},b}(k.default);c.default=u,e.WebGLRenderer.registerPlugin("interaction",u),e.CanvasRenderer.registerPlugin("interaction",u)},{"../core":62,"./InteractionData":146,"./InteractionEvent":147,"./interactiveTarget":150,eventemitter3:3,ismobilejs:4}],149:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./InteractionData");Object.defineProperty(c,"InteractionData",{enumerable:!0,get:function(){return g(d).default}});var e=a("./InteractionManager");Object.defineProperty(c,"InteractionManager",{enumerable:!0,get:function(){return g(e).default}});var f=a("./interactiveTarget");Object.defineProperty(c,"interactiveTarget",{enumerable:!0,get:function(){return g(f).default}})},{"./InteractionData":146,"./InteractionManager":148,"./interactiveTarget":150}],150:[function(a,b,c){"use strict";c.__esModule=!0,c.default={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_pointerOver:!1,_pointerDown:!1,_touchDown:!1}},{}],151:[function(a,b,c){"use strict";function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a,b){var c={},d=a.data.getElementsByTagName("info")[0],e=a.data.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=parseInt(d.getAttribute("size"),10),c.lineHeight=parseInt(e.getAttribute("lineHeight"),10),c.chars={};for(var g=a.data.getElementsByTagName("char"),i=0;i<g.length;i++){var j=parseInt(g[i].getAttribute("id"),10),k=new f.Rectangle(parseInt(g[i].getAttribute("x"),10)+b.frame.x,parseInt(g[i].getAttribute("y"),10)+b.frame.y,parseInt(g[i].getAttribute("width"),10),parseInt(g[i].getAttribute("height"),10));c.chars[j]={xOffset:parseInt(g[i].getAttribute("xoffset"),10),yOffset:parseInt(g[i].getAttribute("yoffset"),10),xAdvance:parseInt(g[i].getAttribute("xadvance"),10),kerning:{},texture:new f.Texture(b.baseTexture,k)}}for(var l=a.data.getElementsByTagName("kerning"),m=0;m<l.length;m++){var n=parseInt(l[m].getAttribute("first"),10),o=parseInt(l[m].getAttribute("second"),10),p=parseInt(l[m].getAttribute("amount"),10);c.chars[o]&&(c.chars[o].kerning[n]=p)}a.bitmapFont=c,h.BitmapText.fonts[c.font]=c}c.__esModule=!0,c.parse=j,c.default=function(){return function(b,c){if(!b.data||!b.isXml)return void c();if(0===b.data.getElementsByTagName("page").length||0===b.data.getElementsByTagName("info").length||null===b.data.getElementsByTagName("info")[0].getAttribute("face"))return void c();var d=b.isDataUrl?"":e.dirname(b.url);b.isDataUrl&&("."===d&&(d=""),this.baseUrl&&d&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(d+="/"),d=d.replace(this.baseUrl,""))),d&&"/"!==d.charAt(d.length-1)&&(d+="/");var h=d+b.data.getElementsByTagName("page")[0].getAttribute("file");if(f.utils.TextureCache[h])j(b,f.utils.TextureCache[h]),c();else{var i={crossOrigin:b.crossOrigin,loadType:g.Resource.LOAD_TYPE.IMAGE,metadata:b.metadata.imageMetadata};this.add(b.name+"_image",h,i,function(a){j(b,a.texture),c()})}}};var d=a("path"),e=i(d),f=a("../core"),g=a("resource-loader"),h=a("../extras")},{"../core":62,"../extras":132,path:22,"resource-loader":36}],152:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./loader");Object.defineProperty(c,"Loader",{enumerable:!0,get:function(){return i(d).default}});var e=a("./bitmapFontParser");Object.defineProperty(c,"bitmapFontParser",{enumerable:!0,get:function(){return i(e).default}}),Object.defineProperty(c,"parseBitmapFontData",{enumerable:!0,get:function(){return e.parse}});var f=a("./spritesheetParser");Object.defineProperty(c,"spritesheetParser",{enumerable:!0,get:function(){return i(f).default}});var g=a("./textureParser");Object.defineProperty(c,"textureParser",{enumerable:!0,get:function(){return i(g).default}});var h=a("resource-loader");Object.defineProperty(c,"Resource",{enumerable:!0,get:function(){return h.Resource}})},{"./bitmapFontParser":151,"./loader":153,"./spritesheetParser":154,"./textureParser":155,"resource-loader":36}],153:[function(a,b,c){"use strict";function l(a){return a&&a.__esModule?a:{default:a}}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function o(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("resource-loader"),e=l(d),f=a("./textureParser"),g=l(f),h=a("./spritesheetParser"),i=l(h),j=a("./bitmapFontParser"),k=l(j),p=function(a){function b(c,d){m(this,b);for(var e=n(this,a.call(this,c,d)),f=0;f<b._pixiMiddleware.length;++f)e.use(b._pixiMiddleware[f]());return e}return o(b,a),b.addPixiMiddleware=function(c){b._pixiMiddleware.push(c)},b}(e.default);c.default=p,p._pixiMiddleware=[e.default.middleware.parsing.blob,g.default,i.default,k.default];var q=e.default.Resource;q.setExtensionXhrType("fnt",q.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":151,"./spritesheetParser":154,"./textureParser":155,"resource-loader":36}],154:[function(a,b,c){"use strict";function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.default=function(){return function(b,c){var e=void 0,g=b.name+"_image";if(!b.data||!b.isJson||!b.data.frames||this.resources[g])return void c();var i={crossOrigin:b.crossOrigin,loadType:d.Resource.LOAD_TYPE.IMAGE,metadata:b.metadata.imageMetadata};e=b.isDataUrl?b.data.meta.image:f.default.dirname(b.url.replace(this.baseUrl,""))+"/"+b.data.meta.image,this.add(g,e,i,function(d){function m(a,c){for(var d=a;d-a<c&&d<f.length;){var j=f[d],k=e[j].frame;if(k){var l=null,m=null,n=new h.Rectangle(0,0,e[j].sourceSize.w/i,e[j].sourceSize.h/i);l=e[j].rotated?new h.Rectangle(k.x/i,k.y/i,k.h/i,k.w/i):new h.Rectangle(k.x/i,k.y/i,k.w/i,k.h/i),e[j].trimmed&&(m=new h.Rectangle(e[j].spriteSourceSize.x/i,e[j].spriteSourceSize.y/i,k.w/i,k.h/i)),b.textures[j]=new h.Texture(g,l,n,m,e[j].rotated?2:0),h.utils.TextureCache[j]=b.textures[j]}d++}}function n(){return l*k<f.length}function o(a){m(l*k,k),l++,setTimeout(a,0)}function p(){o(function(){n()?p():c()})}b.textures={};var e=b.data.frames,f=Object.keys(e),g=d.texture.baseTexture,i=h.utils.getResolutionOfUrl(b.url),j=b.data.meta.scale;1===i&&void 0!==j&&1!==j&&(g.resolution=i=j,g.update());var l=0;f.length<=k?(m(0,k),c()):p()})}};var d=a("resource-loader"),e=a("path"),f=j(e),g=a("../core"),h=i(g),k=1e3},{"../core":62,path:22,"resource-loader":36}],155:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}c.__esModule=!0,c.default=function(){return function(b,c){if(b.data&&b.isImage){var d=new e.BaseTexture(b.data,null,e.utils.getResolutionOfUrl(b.url));d.imageUrl=b.url,b.texture=new e.Texture(d),e.utils.BaseTextureCache[b.name]=d,e.utils.TextureCache[b.name]=b.texture,b.name!==b.url&&(e.utils.BaseTextureCache[b.url]=d,e.utils.TextureCache[b.url]=b.texture)}c()}};var d=a("../core"),e=f(d)},{"../core":62}],156:[function(a,b,c){"use strict";function g(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("../core"),f=g(e),k=new f.Point,l=new f.Polygon,m=function(a){function b(c,d,e,g,j){h(this,b);var k=i(this,a.call(this));return k._texture=null,k.uvs=e||new Float32Array([0,0,1,0,1,1,0,1]),k.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]),k.indices=g||new Uint16Array([0,1,3,2]),k.dirty=0,k.indexDirty=0,k.blendMode=f.BLEND_MODES.NORMAL,k.canvasPadding=0,k.drawMode=j||b.DRAW_MODES.TRIANGLE_MESH,k.texture=c,k.shader=null,k.tintRgb=new Float32Array([1,1,1]),k._glDatas={},k}return j(b,a),b.prototype._renderWebGL=function(b){b.setObjectRenderer(b.plugins.mesh),b.plugins.mesh.render(this)},b.prototype._renderCanvas=function(b){b.plugins.mesh.render(this)},b.prototype._onTextureUpdate=function(){},b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},b.prototype.containsPoint=function(c){if(!this.getBounds().contains(c.x,c.y))return!1;this.worldTransform.applyInverse(c,k);for(var d=this.vertices,e=l.points,f=this.indices,g=this.indices.length,h=this.drawMode===b.DRAW_MODES.TRIANGLES?3:1,i=0;i+2<g;i+=h){var j=2*f[i],m=2*f[i+1],n=2*f[i+2];if(e[0]=d[j],e[1]=d[j+1],e[2]=d[m],e[3]=d[m+1],e[4]=d[n],e[5]=d[n+1],l.contains(k.x,k.y))return!0}return!1},d(b,[{key:"texture",get:function(){return this._texture},set:function(b){this._texture!==b&&(this._texture=b,b&&(b.baseTexture.hasLoaded?this._onTextureUpdate():b.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return f.utils.rgb2hex(this.tintRgb)},set:function(b){this.tintRgb=f.utils.hex2rgb(b,this.tintRgb)}}]),b}(f.Container);c.default=m,m.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":62}],157:[function(a,b,c){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d);
}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./Plane"),f=g(e),k=10,l=function(a){function b(c,d,e,f,g){h(this,b);var j=i(this,a.call(this,c,4,4)),l=j.uvs;return l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,j._origWidth=c.width,j._origHeight=c.height,j._uvw=1/j._origWidth,j._uvh=1/j._origHeight,j.width=c.width,j.height=c.height,l[2]=l[10]=l[18]=l[26]=j._uvw*d,l[4]=l[12]=l[20]=l[28]=1-j._uvw*f,l[9]=l[11]=l[13]=l[15]=j._uvh*e,l[17]=l[19]=l[21]=l[23]=1-j._uvh*g,j.leftWidth="undefined"!=typeof d?d:k,j.rightWidth="undefined"!=typeof f?f:k,j.topHeight="undefined"!=typeof e?e:k,j.bottomHeight="undefined"!=typeof g?g:k,j}return j(b,a),b.prototype.updateHorizontalVertices=function(){var b=this.vertices;b[9]=b[11]=b[13]=b[15]=this._topHeight,b[17]=b[19]=b[21]=b[23]=this._height-this._bottomHeight,b[25]=b[27]=b[29]=b[31]=this._height},b.prototype.updateVerticalVertices=function(){var b=this.vertices;b[2]=b[10]=b[18]=b[26]=this._leftWidth,b[4]=b[12]=b[20]=b[28]=this._width-this._rightWidth,b[6]=b[14]=b[22]=b[30]=this._width},b.prototype._renderCanvas=function(b){var c=b.context;c.globalAlpha=this.worldAlpha;var d=this.worldTransform,e=b.resolution;b.roundPixels?c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e|0,d.ty*e|0):c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e);var f=this._texture.baseTexture,g=f.source,h=f.width,i=f.height;this.drawSegment(c,g,h,i,0,1,10,11),this.drawSegment(c,g,h,i,2,3,12,13),this.drawSegment(c,g,h,i,4,5,14,15),this.drawSegment(c,g,h,i,8,9,18,19),this.drawSegment(c,g,h,i,10,11,20,21),this.drawSegment(c,g,h,i,12,13,22,23),this.drawSegment(c,g,h,i,16,17,26,27),this.drawSegment(c,g,h,i,18,19,28,29),this.drawSegment(c,g,h,i,20,21,30,31)},b.prototype.drawSegment=function(b,c,d,e,f,g,h,i){var j=this.uvs,k=this.vertices,l=(j[h]-j[f])*d,m=(j[i]-j[g])*e,n=k[h]-k[f],o=k[i]-k[g];l<1&&(l=1),m<1&&(m=1),n<1&&(n=1),o<1&&(o=1),b.drawImage(c,j[f]*d,j[g]*e,l,m,k[f],k[g],n,o)},d(b,[{key:"width",get:function(){return this._width},set:function(b){this._width=b,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(b){this._height=b,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(b){this._leftWidth=b;var c=this.uvs,d=this.vertices;c[2]=c[10]=c[18]=c[26]=this._uvw*b,d[2]=d[10]=d[18]=d[26]=b,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(b){this._rightWidth=b;var c=this.uvs,d=this.vertices;c[4]=c[12]=c[20]=c[28]=1-this._uvw*b,d[4]=d[12]=d[20]=d[28]=this._width-b,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(b){this._topHeight=b;var c=this.uvs,d=this.vertices;c[9]=c[11]=c[13]=c[15]=this._uvh*b,d[9]=d[11]=d[13]=d[15]=b,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(b){this._bottomHeight=b;var c=this.uvs,d=this.vertices;c[17]=c[19]=c[21]=c[23]=1-this._uvh*b,d[17]=d[19]=d[21]=d[23]=this._height-b,this.dirty=!0}}]),b}(f.default);c.default=l},{"./Plane":158}],158:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./Mesh"),e=f(d),j=function(a){function b(c,d,f){g(this,b);var i=h(this,a.call(this,c));return i._ready=!0,i.verticesX=d||10,i.verticesY=f||10,i.drawMode=e.default.DRAW_MODES.TRIANGLES,i.refresh(),i}return i(b,a),b.prototype.refresh=function(){for(var b=this.verticesX*this.verticesY,c=[],d=[],e=[],f=[],g=this.texture,h=this.verticesX-1,i=this.verticesY-1,j=g.width/h,k=g.height/i,l=0;l<b;l++)if(g._uvs){var m=l%this.verticesX,n=l/this.verticesX|0;c.push(m*j,n*k),e.push(g._uvs.x0+(g._uvs.x1-g._uvs.x0)*(m/(this.verticesX-1)),g._uvs.y0+(g._uvs.y3-g._uvs.y0)*(n/(this.verticesY-1)))}else e.push(0);for(var o=h*i,p=0;p<o;p++){var q=p%h,r=p/h|0,s=r*this.verticesX+q,t=r*this.verticesX+q+1,u=(r+1)*this.verticesX+q,v=(r+1)*this.verticesX+q+1;f.push(s,t,u),f.push(t,v,u)}this.vertices=new Float32Array(c),this.uvs=new Float32Array(e),this.colors=new Float32Array(d),this.indices=new Uint16Array(f),this.indexDirty=!0},b.prototype._onTextureUpdate=function(){e.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b}(e.default);c.default=j},{"./Mesh":156}],159:[function(a,b,c){"use strict";function h(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function l(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("./Mesh"),e=i(d),f=a("../core"),g=h(f),m=function(a){function b(c,d){j(this,b);var e=k(this,a.call(this,c));return e.points=d,e.vertices=new Float32Array(4*d.length),e.uvs=new Float32Array(4*d.length),e.colors=new Float32Array(2*d.length),e.indices=new Uint16Array(2*d.length),e._ready=!0,e.refresh(),e}return l(b,a),b.prototype.refresh=function(){var b=this.points;if(!(b.length<1)&&this._texture._uvs){this.vertices.length/4!==b.length&&(this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length));var c=this.uvs,d=this.indices,e=this.colors,f=this._texture._uvs,h=new g.Point(f.x0,f.y0),i=new g.Point(f.x2-f.x0,f.y2-f.y0);c[0]=0+h.x,c[1]=0+h.y,c[2]=0+h.x,c[3]=Number(i.y)+h.y,e[0]=1,e[1]=1,d[0]=0,d[1]=1;for(var j=b.length,k=1;k<j;k++){var l=4*k,m=k/(j-1);c[l]=m*i.x+h.x,c[l+1]=0+h.y,c[l+2]=m*i.x+h.x,c[l+3]=Number(i.y)+h.y,l=2*k,e[l]=1,e[l+1]=1,l=2*k,d[l]=l,d[l+1]=l+1}this.dirty++,this.indexDirty++}},b.prototype._onTextureUpdate=function(){a.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b.prototype.updateTransform=function(){var b=this.points;if(!(b.length<1)){for(var c=b[0],d=void 0,e=0,f=0,g=this.vertices,h=b.length,i=0;i<h;i++){var j=b[i],k=4*i;d=i<b.length-1?b[i+1]:j,f=-(d.x-c.x),e=d.y-c.y;var l=10*(1-i/(h-1));l>1&&(l=1);var m=Math.sqrt(e*e+f*f),n=this._texture.height/2;e/=m,f/=m,e*=n,f*=n,g[k]=j.x+e,g[k+1]=j.y+f,g[k+2]=j.x-e,g[k+3]=j.y-f,c=j}this.containerUpdateTransform()}},b}(e.default);c.default=m},{"../core":62,"./Mesh":156}],160:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("../../core"),e=i(d),f=a("../Mesh"),g=h(f),k=function(){function a(b){j(this,a),this.renderer=b}return a.prototype.render=function(b){var c=this.renderer,d=c.context,e=b.worldTransform,f=c.resolution;c.roundPixels?d.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f|0,e.ty*f|0):d.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),c.setBlendMode(b.blendMode),b.drawMode===g.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(b):this._renderTriangles(b)},a.prototype._renderTriangleMesh=function(b){for(var c=b.vertices.length/2,d=0;d<c-2;d++){var e=2*d;this._renderDrawTriangle(b,e,e+2,e+4)}},a.prototype._renderTriangles=function(b){for(var c=b.indices,d=c.length,e=0;e<d;e+=3){var f=2*c[e],g=2*c[e+1],h=2*c[e+2];this._renderDrawTriangle(b,f,g,h)}},a.prototype._renderDrawTriangle=function(b,c,d,e){var f=this.renderer.context,g=b.uvs,h=b.vertices,i=b._texture;if(i.valid){var j=i.baseTexture,k=j.source,l=j.width,m=j.height,n=g[c]*j.width,o=g[d]*j.width,p=g[e]*j.width,q=g[c+1]*j.height,r=g[d+1]*j.height,s=g[e+1]*j.height,t=h[c],u=h[d],v=h[e],w=h[c+1],x=h[d+1],y=h[e+1];if(b.canvasPadding>0){var z=b.canvasPadding/b.worldTransform.a,A=b.canvasPadding/b.worldTransform.d,B=(t+u+v)/3,C=(w+x+y)/3,D=t-B,E=w-C,F=Math.sqrt(D*D+E*E);t=B+D/F*(F+z),w=C+E/F*(F+A),D=u-B,E=x-C,F=Math.sqrt(D*D+E*E),u=B+D/F*(F+z),x=C+E/F*(F+A),D=v-B,E=y-C,F=Math.sqrt(D*D+E*E),v=B+D/F*(F+z),y=C+E/F*(F+A)}f.save(),f.beginPath(),f.moveTo(t,w),f.lineTo(u,x),f.lineTo(v,y),f.closePath(),f.clip();var G=n*r+q*p+o*s-r*p-q*o-n*s,H=t*r+q*v+u*s-r*v-q*u-t*s,I=n*u+t*p+o*v-u*p-t*o-n*v,J=n*r*v+q*u*p+t*o*s-t*r*p-q*o*v-n*u*s,K=w*r+q*y+x*s-r*y-q*x-w*s,L=n*x+w*p+o*y-x*p-w*o-n*y,M=n*r*y+q*x*p+w*o*s-w*r*p-q*o*y-n*x*s;f.transform(H/G,K/G,I/G,L/G,J/G,M/G),f.drawImage(k,0,0,l*j.resolution,m*j.resolution,0,0,l,m),f.restore()}},a.prototype.renderMeshFlat=function(b){var c=this.renderer.context,d=b.vertices,e=d.length/2;c.beginPath();for(var f=1;f<e-2;++f){var g=2*f,h=d[g],i=d[g+1],j=d[g+2],k=d[g+3],l=d[g+4],m=d[g+5];c.moveTo(h,i),c.lineTo(j,k),c.lineTo(l,m)}c.fillStyle="#FF0000",c.fill(),c.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=k,e.CanvasRenderer.registerPlugin("mesh",k)},{"../../core":62,"../Mesh":156}],161:[function(a,b,c){"use strict";function j(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./Mesh");Object.defineProperty(c,"Mesh",{enumerable:!0,get:function(){return j(d).default}});var e=a("./webgl/MeshRenderer");Object.defineProperty(c,"MeshRenderer",{enumerable:!0,get:function(){return j(e).default}});var f=a("./canvas/CanvasMeshRenderer");Object.defineProperty(c,"CanvasMeshRenderer",{enumerable:!0,get:function(){return j(f).default}});var g=a("./Plane");Object.defineProperty(c,"Plane",{enumerable:!0,get:function(){return j(g).default}});var h=a("./NineSlicePlane");Object.defineProperty(c,"NineSlicePlane",{enumerable:!0,get:function(){return j(h).default}});var i=a("./Rope");Object.defineProperty(c,"Rope",{enumerable:!0,get:function(){return j(i).default}})},{"./Mesh":156,"./NineSlicePlane":157,"./Plane":158,"./Rope":159,"./canvas/CanvasMeshRenderer":160,"./webgl/MeshRenderer":162}],162:[function(a,b,c){"use strict";function k(a){return a&&a.__esModule?a:{default:a}}function l(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function n(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function o(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core"),e=l(d),f=a("pixi-gl-core"),g=k(f),h=a("../Mesh"),i=k(h),p=(a("path"),function(a){function b(c){m(this,b);var d=n(this,a.call(this,c));return d.shader=null,d}return o(b,a),b.prototype.onContextChange=function(){var b=this.renderer.gl;this.shader=new e.Shader(b,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},b.prototype.render=function(b){var c=this.renderer,d=c.gl,e=b._texture;if(e.valid){var f=b._glDatas[c.CONTEXT_UID];f||(c.bindVao(null),f={shader:this.shader,vertexBuffer:g.default.GLBuffer.createVertexBuffer(d,b.vertices,d.STREAM_DRAW),uvBuffer:g.default.GLBuffer.createVertexBuffer(d,b.uvs,d.STREAM_DRAW),indexBuffer:g.default.GLBuffer.createIndexBuffer(d,b.indices,d.STATIC_DRAW),vao:null,dirty:b.dirty,indexDirty:b.indexDirty},f.vao=new g.default.VertexArrayObject(d).addIndex(f.indexBuffer).addAttribute(f.vertexBuffer,f.shader.attributes.aVertexPosition,d.FLOAT,!1,8,0).addAttribute(f.uvBuffer,f.shader.attributes.aTextureCoord,d.FLOAT,!1,8,0),b._glDatas[c.CONTEXT_UID]=f),b.dirty!==f.dirty&&(f.dirty=b.dirty,f.uvBuffer.upload(b.uvs)),b.indexDirty!==f.indexDirty&&(f.indexDirty=b.indexDirty,f.indexBuffer.upload(b.indices)),f.vertexBuffer.upload(b.vertices),c.bindShader(f.shader),f.shader.uniforms.uSampler=c.bindTexture(e),c.state.setBlendMode(b.blendMode),f.shader.uniforms.translationMatrix=b.worldTransform.toArray(!0),f.shader.uniforms.alpha=b.worldAlpha,f.shader.uniforms.tint=b.tintRgb;var h=b.drawMode===i.default.DRAW_MODES.TRIANGLE_MESH?d.TRIANGLE_STRIP:d.TRIANGLES;c.bindVao(f.vao),f.vao.draw(h,b.indices.length,0)}},b}(e.ObjectRenderer));c.default=p,e.WebGLRenderer.registerPlugin("mesh",p)},{"../../core":62,"../Mesh":156,path:22,"pixi-gl-core":12}],163:[function(a,b,c){"use strict";function f(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../core"),e=f(d),j=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,d=arguments[1],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;g(this,b);var i=h(this,a.call(this)),j=16384;return f>j&&(f=j),f>c&&(f=c),i._properties=[!1,!0,!1,!1,!1],i._maxSize=c,i._batchSize=f,i._glBuffers={},i._bufferToUpdate=0,i.interactiveChildren=!1,i.blendMode=e.BLEND_MODES.NORMAL,i.roundPixels=!0,i.baseTexture=null,i.setProperties(d),i}return i(b,a),b.prototype.setProperties=function(b){b&&(this._properties[0]="scale"in b?!!b.scale:this._properties[0],this._properties[1]="position"in b?!!b.position:this._properties[1],this._properties[2]="rotation"in b?!!b.rotation:this._properties[2],this._properties[3]="uvs"in b?!!b.uvs:this._properties[3],this._properties[4]="alpha"in b?!!b.alpha:this._properties[4])},b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},b.prototype.renderWebGL=function(b){var c=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return c.onChildrenChange(0)})),b.setObjectRenderer(b.plugins.particle),b.plugins.particle.render(this))},b.prototype.onChildrenChange=function(b){var c=Math.floor(b/this._batchSize);c<this._bufferToUpdate&&(this._bufferToUpdate=c)},b.prototype.renderCanvas=function(b){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var c=b.context,d=this.worldTransform,e=!0,f=0,g=0,h=0,i=0,j=b.blendModes[this.blendMode];j!==c.globalCompositeOperation&&(c.globalCompositeOperation=j),c.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var k=0;k<this.children.length;++k){var l=this.children[k];if(l.visible){var m=l.texture.frame;if(c.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)e&&(c.setTransform(d.a,d.b,d.c,d.d,d.tx*b.resolution,d.ty*b.resolution),e=!1),f=l.anchor.x*(-m.width*l.scale.x)+l.position.x+.5,g=l.anchor.y*(-m.height*l.scale.y)+l.position.y+.5,h=m.width*l.scale.x,i=m.height*l.scale.y;else{e||(e=!0),l.displayObjectUpdateTransform();var n=l.worldTransform;b.roundPixels?c.setTransform(n.a,n.b,n.c,n.d,n.tx*b.resolution|0,n.ty*b.resolution|0):c.setTransform(n.a,n.b,n.c,n.d,n.tx*b.resolution,n.ty*b.resolution),f=l.anchor.x*-m.width+.5,g=l.anchor.y*-m.height+.5,h=m.width,i=m.height}var o=l.texture.baseTexture.resolution;c.drawImage(l.texture.baseTexture.source,m.x*o,m.y*o,m.width*o,m.height*o,f*o,g*o,h*o,i*o)}}}},b.prototype.destroy=function(c){if(a.prototype.destroy.call(this,c),this._buffers)for(var d=0;d<this._buffers.length;++d)this._buffers[d].destroy();this._properties=null,this._buffers=null},b}(e.Container);c.default=j},{"../core":62}],164:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./ParticleContainer");Object.defineProperty(c,"ParticleContainer",{enumerable:!0,get:function(){return f(d).default}});var e=a("./webgl/ParticleRenderer");Object.defineProperty(c,"ParticleRenderer",{enumerable:!0,get:function(){return f(e).default}})},{"./ParticleContainer":163,"./webgl/ParticleRenderer":166}],165:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var d=a("pixi-gl-core"),e=h(d),f=a("../../core/utils/createIndicesForQuads"),g=h(f),j=function(){function a(b,c,d,e){i(this,a),this.gl=b,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=e,this.dynamicProperties=[],this.staticProperties=[];for(var f=0;f<c.length;++f){var g=c[f];g={attribute:g.attribute,size:g.size,uploadFunction:g.uploadFunction,offset:g.offset},d[f]?this.dynamicProperties.push(g):this.staticProperties.push(g)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return a.prototype.initBuffers=function(){var b=this.gl,c=0;this.indices=(0,g.default)(this.size),this.indexBuffer=e.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.dynamicStride=0;for(var d=0;d<this.dynamicProperties.length;++d){var f=this.dynamicProperties[d];f.offset=c,c+=f.size,this.dynamicStride+=f.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=e.default.GLBuffer.createVertexBuffer(b,this.dynamicData,b.STREAM_DRAW);var h=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var j=this.staticProperties[i];j.offset=h,h+=j.size,this.staticStride+=j.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=e.default.GLBuffer.createVertexBuffer(b,this.staticData,b.STATIC_DRAW),this.vao=new e.default.VertexArrayObject(b).addIndex(this.indexBuffer);for(var k=0;k<this.dynamicProperties.length;++k){var l=this.dynamicProperties[k];this.vao.addAttribute(this.dynamicBuffer,l.attribute,b.FLOAT,!1,4*this.dynamicStride,4*l.offset)}for(var m=0;m<this.staticProperties.length;++m){var n=this.staticProperties[m];this.vao.addAttribute(this.staticBuffer,n.attribute,b.FLOAT,!1,4*this.staticStride,4*n.offset)}},a.prototype.uploadDynamic=function(b,c,d){for(var e=0;e<this.dynamicProperties.length;e++){var f=this.dynamicProperties[e];f.uploadFunction(b,c,d,this.dynamicData,this.dynamicStride,f.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(b,c,d){for(var e=0;e<this.staticProperties.length;e++){var f=this.staticProperties[e];f.uploadFunction(b,c,d,this.staticData,this.staticStride,f.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},a}();c.default=j},{"../../core/utils/createIndicesForQuads":116,"pixi-gl-core":12}],166:[function(a,b,c){"use strict";function j(a){return a&&a.__esModule?a:{default:a}}function k(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function n(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core"),e=k(d),f=a("./ParticleShader"),g=j(f),h=a("./ParticleBuffer"),i=j(h),o=function(a){function b(c){l(this,b);var d=m(this,a.call(this,c));return d.shader=null,d.indexBuffer=null,d.properties=null,d.tempMatrix=new e.Matrix,d.CONTEXT_UID=0,d}return n(b,a),b.prototype.onContextChange=function(){var b=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new g.default(b),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},b.prototype.start=function(){this.renderer.bindShader(this.shader)},b.prototype.render=function(b){var c=b.children,d=b._maxSize,e=b._batchSize,f=this.renderer,g=c.length;if(0!==g){g>d&&(g=d);var h=b._glBuffers[f.CONTEXT_UID];h||(h=b._glBuffers[f.CONTEXT_UID]=this.generateBuffers(b)),this.renderer.setBlendMode(b.blendMode);var i=f.gl,j=b.worldTransform.copy(this.tempMatrix);j.prepend(f._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=j.toArray(!0),this.shader.uniforms.uAlpha=b.worldAlpha;var k=c[0]._texture.baseTexture;this.shader.uniforms.uSampler=f.bindTexture(k);for(var l=0,m=0;l<g;l+=e,m+=1){var n=g-l;n>e&&(n=e);var o=h[m];o.uploadDynamic(c,l,n),b._bufferToUpdate===m&&(o.uploadStatic(c,l,n),b._bufferToUpdate=m+1),f.bindVao(o.vao),o.vao.draw(i.TRIANGLES,6*n)}}},b.prototype.generateBuffers=function(b){for(var c=this.renderer.gl,d=[],e=b._maxSize,f=b._batchSize,g=b._properties,h=0;h<e;h+=f)d.push(new i.default(c,this.properties,g,f));return d},b.prototype.uploadVertices=function(b,c,d,e,f,g){for(var h=0,i=0,j=0,k=0,l=0;l<d;++l){var m=b[c+l],n=m._texture,o=m.scale.x,p=m.scale.y,q=n.trim,r=n.orig;q?(i=q.x-m.anchor.x*r.width,h=i+q.width,k=q.y-m.anchor.y*r.height,j=k+q.height):(h=r.width*(1-m.anchor.x),i=r.width*-m.anchor.x,j=r.height*(1-m.anchor.y),k=r.height*-m.anchor.y),e[g]=i*o,e[g+1]=k*p,e[g+f]=h*o,e[g+f+1]=k*p,e[g+2*f]=h*o,e[g+2*f+1]=j*p,e[g+3*f]=i*o,e[g+3*f+1]=j*p,g+=4*f}},b.prototype.uploadPosition=function(b,c,d,e,f,g){for(var h=0;h<d;h++){var i=b[c+h].position;e[g]=i.x,e[g+1]=i.y,e[g+f]=i.x,e[g+f+1]=i.y,e[g+2*f]=i.x,e[g+2*f+1]=i.y,e[g+3*f]=i.x,e[g+3*f+1]=i.y,g+=4*f}},b.prototype.uploadRotation=function(b,c,d,e,f,g){for(var h=0;h<d;h++){var i=b[c+h].rotation;e[g]=i,e[g+f]=i,e[g+2*f]=i,e[g+3*f]=i,g+=4*f}},b.prototype.uploadUvs=function(b,c,d,e,f,g){for(var h=0;h<d;++h){var i=b[c+h]._texture._uvs;i?(e[g]=i.x0,e[g+1]=i.y0,e[g+f]=i.x1,e[g+f+1]=i.y1,e[g+2*f]=i.x2,e[g+2*f+1]=i.y2,e[g+3*f]=i.x3,e[g+3*f+1]=i.y3,g+=4*f):(e[g]=0,e[g+1]=0,e[g+f]=0,e[g+f+1]=0,e[g+2*f]=0,e[g+2*f+1]=0,e[g+3*f]=0,e[g+3*f+1]=0,g+=4*f)}},b.prototype.uploadAlpha=function(b,c,d,e,f,g){for(var h=0;h<d;h++){var i=b[c+h].alpha;e[g]=i,e[g+f]=i,e[g+2*f]=i,e[g+3*f]=i,g+=4*f}},b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},b}(e.ObjectRenderer);c.default=o,e.WebGLRenderer.registerPlugin("particle",o)},{"../../core":62,"./ParticleBuffer":165,"./ParticleShader":167}],167:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var d=a("../../core/Shader"),e=f(d),j=function(a){function b(c){return g(this,b),h(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return i(b,a),b}(e.default);c.default=j},{"../../core/Shader":42}],168:[function(a,b,c){"use strict";Math.sign||(Math.sign=function(b){return b=Number(b),0===b||isNaN(b)?b:b>0?1:-1})},{}],169:[function(a,b,c){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}var d=a("object-assign"),e=f(d);Object.assign||(Object.assign=e.default)},{"object-assign":5}],170:[function(a,b,c){"use strict";a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":168,"./Object.assign":169,"./requestAnimationFrame":171}],171:[function(a,b,c){(function(a){"use strict";var b=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),a.performance&&a.performance.now||!function(){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}();for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e){var f=d[e];a.requestAnimationFrame=a[f+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var d=Date.now(),e=b+c-d;return e<0&&(e=0),c=d,setTimeout(function(){c=Date.now(),a(performance.now())},e)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],172:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){return b instanceof e.Text&&(b.updateText(!0),!0)}function n(a,b){if(b instanceof e.TextStyle){var c=e.Text.getFontStyle(b);return e.Text.fontPropertiesCache[c]||e.Text.calculateFontProperties(c),!0}return!1}function o(a,b){if(a instanceof e.Text){b.indexOf(a.style)===-1&&b.push(a.style),b.indexOf(a)===-1&&b.push(a);var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}function p(a,b){return a instanceof e.TextStyle&&(b.indexOf(a)===-1&&b.push(a),!0)}c.__esModule=!0;var d=a("../core"),e=i(d),f=a("./limiters/CountLimiter"),g=h(f),k=e.ticker.shared;e.settings.UPLOADS_PER_FRAME=4;var l=function(){function a(b){var c=this;j(this,a),this.limiter=new g.default(e.settings.UPLOADS_PER_FRAME),this.renderer=b,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){c.queue&&c.prepareItems()},this.register(o,m),this.register(p,n)}return a.prototype.upload=function(b,c){"function"==typeof b&&(c=b,b=null),b&&this.add(b),this.queue.length?(c&&this.completes.push(c),this.ticking||(this.ticking=!0,k.addOnce(this.tick,this))):c&&c()},a.prototype.tick=function(){setTimeout(this.delayedTick,0)},a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var b=this.queue[0],c=!1,d=0,e=this.uploadHooks.length;d<e;d++)if(this.uploadHooks[d](this.uploadHookHelper,b)){this.queue.shift(),c=!0;break}c||this.queue.shift()}if(this.queue.length)k.addOnce(this.tick,this);else{this.ticking=!1;var f=this.completes.slice(0);this.completes.length=0;for(var g=0,h=f.length;g<h;g++)f[g]()}},a.prototype.register=function(b,c){return b&&this.addHooks.push(b),c&&this.uploadHooks.push(c),this},a.prototype.add=function(b){for(var c=0,d=this.addHooks.length;c<d&&!this.addHooks[c](b,this.queue);c++);if(b instanceof e.Container)for(var f=b.children.length-1;f>=0;f--)this.add(b.children[f]);return this},a.prototype.destroy=function(){this.ticking&&k.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},a}();c.default=l},{"../core":62,"./limiters/CountLimiter":175}],173:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function l(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function o(a,b){if(b instanceof e.BaseTexture){var c=b.source,d=0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),f=0===c.height?a.canvas.height:Math.min(a.canvas.height,c.height);return a.ctx.drawImage(c,0,0,d,f,0,0,a.canvas.width,a.canvas.height),!0}return!1}function p(a,b){if(a instanceof e.BaseTexture)return b.indexOf(a)===-1&&b.push(a),!0;if(a._texture&&a._texture instanceof e.Texture){var c=a._texture.baseTexture;
    return b.indexOf(c)===-1&&b.push(c),!0}return!1}c.__esModule=!0;var d=a("../../core"),e=i(d),f=a("../BasePrepare"),g=h(f),m=16,n=function(a){function b(c){j(this,b);var d=k(this,a.call(this,c));return d.uploadHookHelper=d,d.canvas=document.createElement("canvas"),d.canvas.width=m,d.canvas.height=m,d.ctx=d.canvas.getContext("2d"),d.register(p,o),d}return l(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},b}(g.default);c.default=n,e.CanvasRenderer.registerPlugin("prepare",n)},{"../../core":62,"../BasePrepare":172}],174:[function(a,b,c){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var d=a("./webgl/WebGLPrepare");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return i(d).default}});var e=a("./canvas/CanvasPrepare");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return i(e).default}});var f=a("./BasePrepare");Object.defineProperty(c,"BasePrepare",{enumerable:!0,get:function(){return i(f).default}});var g=a("./limiters/CountLimiter");Object.defineProperty(c,"CountLimiter",{enumerable:!0,get:function(){return i(g).default}});var h=a("./limiters/TimeLimiter");Object.defineProperty(c,"TimeLimiter",{enumerable:!0,get:function(){return i(h).default}})},{"./BasePrepare":172,"./canvas/CanvasPrepare":173,"./limiters/CountLimiter":175,"./limiters/TimeLimiter":176,"./webgl/WebGLPrepare":177}],175:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxItemsPerFrame=b,this.itemsLeft=0}return a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},a.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},a}();c.default=e},{}],176:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxMilliseconds=b,this.frameStart=0}return a.prototype.beginFrame=function(){this.frameStart=Date.now()},a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},a}();c.default=e},{}],177:[function(a,b,c){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function l(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function n(a,b){return b instanceof e.BaseTexture&&(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0)}function o(a,b){return b instanceof e.Graphics&&((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0)}function p(a,b){if(a instanceof e.BaseTexture)return b.indexOf(a)===-1&&b.push(a),!0;if(a._texture&&a._texture instanceof e.Texture){var c=a._texture.baseTexture;return b.indexOf(c)===-1&&b.push(c),!0}return!1}function q(a,b){return a instanceof e.Graphics&&(b.push(a),!0)}c.__esModule=!0;var d=a("../../core"),e=i(d),f=a("../BasePrepare"),g=h(f),m=function(a){function b(c){j(this,b);var d=k(this,a.call(this,c));return d.uploadHookHelper=d.renderer,d.register(p,n).register(q,o),d}return l(b,a),b}(g.default);c.default=m,e.WebGLRenderer.registerPlugin("prepare",m)},{"../../core":62,"../BasePrepare":172}],178:[function(a,b,c){(function(b){"use strict";function x(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}c.__esModule=!0,c.loader=c.prepare=c.particles=c.mesh=c.loaders=c.interaction=c.filters=c.extras=c.extract=c.accessibility=void 0;var d=a("./deprecation");Object.keys(d).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return d[a]}})});var e=a("./core");Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return e[a]}})}),a("./polyfill");var f=a("./accessibility"),g=x(f),h=a("./extract"),i=x(h),j=a("./extras"),k=x(j),l=a("./filters"),m=x(l),n=a("./interaction"),o=x(n),p=a("./loaders"),q=x(p),r=a("./mesh"),s=x(r),t=a("./particles"),u=x(t),v=a("./prepare"),w=x(v);c.accessibility=g,c.extract=i,c.extras=k,c.filters=m,c.interaction=o,c.loaders=q,c.mesh=s,c.particles=u,c.prepare=w;var y=q&&q.Loader?new q.Loader:null;c.loader=y,b.PIXI=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":41,"./core":62,"./deprecation":121,"./extract":123,"./extras":132,"./filters":143,"./interaction":149,"./loaders":152,"./mesh":161,"./particles":164,"./polyfill":170,"./prepare":174}]},{},[178])(178)});