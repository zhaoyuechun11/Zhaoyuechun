window.__require=function e(t,o,i){function c(s,n){if(!o[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!n&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){return c(t[s][1][e]||e)},d,d.exports,e,t,o,i)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)c(i[s]);return c}({block:[function(e,t,o){"use strict";cc._RF.push(t,"98313d7bZFJqKdxyYnvxjBm","block"),cc.Class({extends:cc.Component,properties:{},start:function(){this.mid=this.node.getChildByName("mid"),this.up=this.node.getChildByName("up"),this.down=this.node.getChildByName("down"),this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right")},getMidPos:function(){return this.mid.convertToWorldSpaceAR(cc.v2(0,0))},is_jump_on_block:function(e,t){var o=this.mid.convertToWorldSpaceAR(cc.v2(0,0)),i=e.sub(o),c=i.mag(),a=o;if(1===t){var s=this.up.convertToWorldSpaceAR(cc.v2(0,0));c>(l=(i=e.sub(s)).mag())&&(c=l,a=s);var n=this.down.convertToWorldSpaceAR(cc.v2(0,0));c>(l=(i=e.sub(n)).mag())&&(c=l,a=n)}else{var r=this.left.convertToWorldSpaceAR(cc.v2(0,0));c>(l=(i=e.sub(r)).mag())&&(c=l,a=r);var l,d=this.right.convertToWorldSpaceAR(cc.v2(0,0));c>(l=(i=e.sub(d)).mag())&&(c=l,a=d)}return(i=e.sub(a)).mag()<100&&(e.x=a.x,e.y=a.y,!0)},is_jump_on_origin_block:function(e,t){var o=this.mid.convertToWorldSpaceAR(cc.v2(0,0));return e.sub(o).mag()<70}}),cc._RF.pop()},{}],game_scene:[function(e,t,o){"use strict";cc._RF.push(t,"0fd31d27O1JdLPDqO4p8XV+","game_scene"),cc.Class({extends:cc.Component,properties:{player:{type:cc.Node,default:null},player2:{type:cc.Node,default:null},block_prefab:{default:[],type:cc.Prefab},block_root:{type:cc.Node,default:null},map_root:{type:cc.Node,default:null},win:{type:cc.Node,default:null},lose:{type:cc.Node,default:null},draw:{type:cc.Node,default:null},scoreDisplay:{type:cc.Label,default:null},left_blood:{type:cc.Node,default:null},rightScoreDisplay:{type:cc.Label,default:null},right_blood:{type:cc.Node,default:null},mid_blood:{type:cc.Node,default:null},timeLabel:{type:cc.Label,default:null},user_head:{type:cc.Node,default:null},user_head_frame:cc.Node,user1_head:{type:cc.Node,default:null},user1_head_frame:cc.Node,frogAudio:{default:null,url:cc.AudioClip},landingAudio:{default:null,url:cc.AudioClip},comboAudio:{default:null,url:cc.AudioClip},fallingWaterAudio:{default:null,url:cc.AudioClip},bgAudio:{default:null,url:cc.AudioClip},ready_go:{default:null,url:cc.AudioClip},winAudio:{default:null,type:cc.AudioClip},loseAudio:{default:null,type:cc.AudioClip},name1:{type:cc.Label,default:null},name2:{type:cc.Label,default:null},left_org:cc.v2(0,0),y_radio:.5560472,totalTime:90,userId:-1,userId2:-2,directions:[],robot_pos:[],robot_direction:[],m_addBlocking:!1,m_addBlocking1:!1},onLoad:function(){this.y_radio=.5560472,this.play1Score=0,this.play2Score=0,this.play1step=0,this.play2step=0,window.parent.postMessage({cmd:"GameLoadReady"},"*"),window.parent.postMessage({cmd:"GamePlayReady"},"*");var e=this,t=this.node.getChildByName("wait");t.x=0;var o=3;t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){for(var e=0;e<3;e++)t.getChildByName("wait"+(e+1).toString()).opacity=0;var i=++o%4;for(e=0;e<i;e++)t.getChildByName("wait"+(e+1).toString()).opacity=255;o>10&&(t.x=1e4,t.stopAllActions())})))),window.addEventListener("message",function(t){switch(console.log("receive message listener",t.data),t.data.cmd){case"Broadcast":var o=JSON.parse(t.data.data.data);if("jump"==o.type)e.userId!=o.playid?e.play2Jump(o.target_pos.x,o.target_pos.y,o.direction,o.playid):(console.log("jump ============================================ "+e.play1step),e.player_com.aniJump(o.x_offset,o.y_offset,o.playid,o.direction));else if("requestAddBlock"==o.type){if(e.userId>e.userId2&&!e._robot)return void(e.m_addBlocking=!1);if((e.play1step>e.play2step?e.play1step:e.play2step)+1<e.block_root.childrenCount)return void(e.m_addBlocking=!1);if(e.m_addBlocking1)return;e.m_addBlocking1=!0;var i=200+200*Math.random(),c=i*e.y_radio,a=e.next_block.getPosition();a.x+=i*o.direction,a.y+=c;var s=Math.floor(31*Math.random()),n=new Array(1,.7,.55),r=a,l=Math.floor(3*Math.random());window.parent.postMessage({cmd:"BroadCastData",uid:e.userId,data:{type:"addblock",index:s,x_distance:i,direction:o.direction,playid:o.playid,scale:n[l],target_pos:e.target_pos,next_pos:r,x_offset:o.x_distance,y_offset:o.y_distance}},"*")}else"addblock"==o.type&&(e.m_addBlocking=!1,e.onBroadCast(o.index,o.direction,o.scale,o.next_pos,o.x_offset,o.y_offset,o.playid),e.m_addBlocking1=!1);break;case"UpdateData":e.userId!=t.data.data.userId&&e.onUpdateUserScore(t.data.data.userScore);break;case"GameResult":break;case"GameBegin":e.userId=t.data.data[0].userId,e.userId2=t.data.data[1].userId,e.onGameBegin(t.data.data[0],t.data.data[1])}})},readyGo:function(){var e=this.node.getChildByName("wait");e.x=1e4,e.stopAllActions();var t=this.node.getChildByName("ready"),o=this.node.getChildByName("go"),i=this;t.active=!0,t.scale=0,t.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeIn(2)),cc.delayTime(.3),cc.scaleTo(.3,0).easing(cc.easeOut(2)),cc.callFunc(function(){t.active=!1,o.active=!0,o.scale=0,o.runAction(cc.sequence(cc.delayTime(.3),cc.scaleTo(.3,1).easing(cc.easeIn(2)),cc.delayTime(.8),cc.scaleTo(.3,0).easing(cc.easeOut(2)),cc.callFunc(function(){o.active=!1,i.player.getComponent("player").jump_complete=!0})))}))),cc.audioEngine.playEffect(this.ready_go,!1)},onGameBegin:function(e,t){var o=this;this.countDown(),this._robot=!1,1==t.isRobot&&(this._robot=!0,this.autoPlay());var i=this;cc.loader.load(e.userHead,function(t,o){t||(i.user_head.getComponents(cc.Sprite)[0].spriteFrame=new cc.SpriteFrame(o),e.userHeadFrame&&cc.loader.load(e.userHeadFrame,function(e,t){i.user_head_frame.getComponents(cc.Sprite)[0].spriteFrame=new cc.SpriteFrame(t)}))}),cc.loader.load(t.userHead,function(e,c){e||(o.user1_head.getComponents(cc.Sprite)[0].spriteFrame=new cc.SpriteFrame(c),o.node.getChildByName("icon").getChildByName("mask").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(c),t.userHeadFrame&&cc.loader.load(t.userHeadFrame,function(e,t){i.user1_head_frame.getComponents(cc.Sprite)[0].spriteFrame=new cc.SpriteFrame(t)}))}),this.readyGo()},onBroadCast:function(e,t,o,i,c,a,s){this.next_block=cc.instantiate(this.block_prefab[e]),(e=this.next_block.getName().startsWith("box"))&&this.next_block.setScale(cc.v2(o,o));var n=(this.play1step>this.play2step?this.play1step:this.play2step)+1;this.block_root.addChild(this.next_block,n,"block"+n),this.next_block.zIndex=this.block_zorder,this.block_zorder--,this.next_block.position=i,this.directions.push(t),this._robot&&(this.robot_pos.push(this.next_block.name),this.robot_direction.push(t)),this._jinzheng=null,this.player_com.jump_complete&&(console.log("add_block ********************************************** "+this.play1step),this.refBlock(c,a,s,t))},refBlock:function(e,t,o,i){var c="block"+(this.play1step+1),a="block"+this.play1step;null!=this.block_root.getChildByName(c)&&(this.player_com.set_next_block(this.block_root.getChildByName(c).getComponent("block")),this.player_com.set_cur_block(this.block_root.getChildByName(a).getComponent("block"))),null!=this.directions[this.play1step-1]&&(this.player_com.direction!=this.directions[this.play1step-1]&&(this.player_com.direction=this.directions[this.play1step-1]),this.player_com.anim_node.scale!=-this.player_com.direction&&this.player_com.anim_node.runAction(cc.scaleTo(0,-this.player_com.direction,1)));var s="block"+(this.play2step+1),n="block"+this.play2step;null!=this.block_root.getChildByName(s)&&(this.player2_com.set_next_block(this.block_root.getChildByName(s).getComponent("block")),this.player2_com.set_cur_block(this.block_root.getChildByName(n).getComponent("block"))),null==this._jinzheng&&this._isJumping&&!this.m_addBlocking&&(this._isJumping=null,this._moveMapStep=this.play1step,-1==i?this.move_map(530-e,-t):this.move_map(180-e,-t))},start:function(){this.onFirstBlock(),this.onSecBlock(),this.move_map()},onFirstBlock:function(){this.cur_block=cc.instantiate(this.block_prefab[4]),this.block_root.addChild(this.cur_block,0,"block0"),this.cur_block.setPosition(this.block_root.convertToNodeSpaceAR(this.left_org));var e=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.v2(0,0));this.player.setPosition(this.map_root.convertToNodeSpaceAR(e)),this.player2.setPosition(this.map_root.convertToNodeSpaceAR(e)),this.player_com=this.player.getComponent("player"),this.player2_com=this.player2.getComponent("player2"),this.next_block=this.cur_block,this.block_zorder=-1},onSecBlock:function(){this.cur_block=this.next_block,this.next_block=cc.instantiate(this.block_prefab[10]),this.block_root.addChild(this.next_block,1,"block1"),this.next_block.zIndex=this.block_zorder,this.block_zorder--;var e=this.cur_block.getPosition();e.x+=225*this.player_com.direction,e.y+=225*this.y_radio,this.next_block.setPosition(e),this.player_com.set_next_block(this.next_block.getComponent("block")),this.player_com.set_cur_block(this.cur_block.getComponent("block")),this.player2_com.set_next_block(this.next_block.getComponent("block")),this.player2_com.set_cur_block(this.cur_block.getComponent("block")),this.robot_pos.push(this.next_block.name),this.robot_direction.push(this.player_com.direction)},add_block:function(e,t,o,i){(this.play1step>this.play2step?this.play1step:this.play2step)+1>=this.block_root.childrenCount&&(this._jinzheng=!0),window.parent.postMessage({cmd:"BroadCastData",uid:this.userId,data:{type:"requestAddBlock",x_distance:o,y_distance:i,direction:t,playid:e}},"*"),this.m_addBlocking=!0},sendJumpData:function(e,t){this.cur_block=this.next_block,this._isJumping=!0,window.parent.postMessage({cmd:"BroadCastData",uid:this.userId2,data:{type:"jump",direction:this.player_com.direction,playid:this.userId,target_pos:this.target_pos,x_offset:e,y_offset:t}},"*")},sendGameData:function(){window.parent.postMessage({cmd:"SendGameData",data:this.play1Score},"*")},gainScore:function(e){this.play1Score+=e,this.sendGameData(),this.play1step++},gainScore_over:function(){this.scoreDisplay.string=this.play1Score,this.refreshBlood()},onUpdateUserScore:function(e){this.play2step++,this.play2Score=e,this.rightScoreDisplay.string=this.play2Score,this.refreshBlood()},refreshBlood:function(){var e=this.left_blood.width+this.right_blood.width,t=Number(this.play1Score)+Number(this.play2Score);0!=t&&(this.left_blood.width=e*Number(this.play1Score)/t,this.right_blood.width=e*Number(this.play2Score)/t,this.mid_blood.x=this.left_blood.x+this.left_blood.width)},onDirection:function(){var e=!1;return this.play1step>=this.play2step&&(e=!0),e},getDirection:function(){return this.directions[this.play1step]},play2Jump:function(e,t,o){this.player_com2=cc.find("Canvas/game/player2/rotate2/anim2"),this.player_com2.getComponent(cc.Animation).play("jump_2");var i=this.player.getPosition();i.x=e,i.y=t;var c=cc.jumpTo(.5,i,200,1);0!=-o&&(this.player_com2.scaleX=-o),this._showIcon=!0;var a=this;this.player2.runAction(cc.sequence(c,cc.callFunc(function(){a._showIcon=!1})))},playJump:function(e,t,o){this.target_pos=o,this.add_block(this.userId,this.player_com.direction,e,t),this.sendJumpData(e,t)},move_map:function(e,t){console.log(this.player_com.cur_block.node.name+" !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! "+this.player_com.next_block.node.name);var o=this.node.getChildByName("center").convertToWorldSpaceAR(cc.v2(0,0)),i=this.map_root.convertToNodeSpaceAR(o),c=this.player_com.cur_block.node.convertToWorldSpaceAR(cc.v2(0,0)),a=this.player_com.next_block.node.convertToWorldSpaceAR(cc.v2(0,0)),s=this.map_root.convertToNodeSpaceAR(c),n=this.map_root.convertToNodeSpaceAR(a),r=cc.v2(s.x+(n.x-s.x)/2,s.y+(n.y-s.y)/2);this._showIcon=!0;var l=this;this.map_root.runAction(cc.sequence(cc.moveBy(.5,i.x-r.x,i.y-r.y),cc.callFunc(function(){l._showIcon=!1})))},move_start:function(){if(this.play1step>this.play2step){var e=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.v2(0,0));this.player.setPosition(this.map_root.convertToNodeSpaceAR(e))}else{var t="block"+this.play1step;e=this.block_root.getChildByName(t).getChildByName("mid").convertToWorldSpaceAR(cc.v2(0,0));this.player.setPosition(this.map_root.convertToNodeSpaceAR(e))}},robot_move_start:function(){var e=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.v2(0,0));this.player2.setPosition(this.map_root.convertToNodeSpaceAR(e))},on_checkout_game:function(){this.play1Score>this.play2Score?(this.win.active=!0,cc.audioEngine.play(this.winAudio,!1,1)):this.play1Score==this.play2Score?this.draw.active=!0:(this.lose.active=!0,cc.audioEngine.play(this.loseAudio,!1,1))},on_game_again:function(){cc.director.loadScene("game_scene")},jumpAudio:function(){cc.audioEngine.playEffect(this.frogAudio,!1)},startlandingAudio:function(){cc.audioEngine.playEffect(this.landingAudio,!1)},startfallingWaterAudio:function(){cc.audioEngine.playEffect(this.fallingWaterAudio,!1)},startcomboAudio:function(){cc.audioEngine.playEffect(this.comboAudio,!1)},countDown:function(){this.schedule(function(){this.totalTime--,this.timeLabel.string=this.totalTime,0===this.totalTime&&(this.on_checkout_game(),this.timeLabel.string="00")},1,this.totalTime-1,0)},autoPlay:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(1.5+3*Math.random()),cc.callFunc(function(){e.totalTime>0&&(e.robotJump(),e.autoPlay())})))},robotJump:function(){if(!this.m_addBlocking){this.play2Score+=Math.pow(2,Math.floor(3*Math.random())),window.parent.postMessage({cmd:"SendGameData",data:this.play2Score,uid:this.userId2},"*");var e=this.robot_pos[this.play2step],t=this.block_root.getChildByName(e).getChildByName("mid").convertToWorldSpaceAR(cc.v2(0,0)),o=this.player2.convertToWorldSpaceAR(cc.v2(0,0)),i=Math.random()<.5?-1:1;this.add_block(this.userId2,i,t.x-o.x,t.y-o.y),window.parent.postMessage({cmd:"BroadCastData",uid:this.userId2,data:{type:"jump",direction:this.robot_direction[this.play2step],playid:this.userId2,target_pos:this.player2.parent.convertToNodeSpaceAR(t)}},"*")}},CrossPoint:function(e,t,o,i){var c,a,s,n,r=cc.v2(0,0);return a=i.x*t.y-i.x*e.y-o.x*t.y+o.x*e.y-t.x*i.y+t.x*o.y+e.x*i.y-e.x*o.y,c=o.y*i.x*t.x-i.y*o.x*t.x-o.y*i.x*e.x+i.y*o.x*e.x-e.y*t.x*i.x+t.y*e.x*i.x+e.y*t.x*o.x-t.y*e.x*o.x,0!=a&&(r.x=c/a),n=i.y*t.x-i.y*e.x-o.y*t.x+e.x*o.y-t.y*i.x+t.y*o.x+e.y*i.x-e.y*o.x,s=-o.y*i.x*t.y+i.y*o.x*t.y+o.y*i.x*e.y-i.y*o.x*e.y+e.y*t.x*i.y-e.y*t.x*o.y-t.y*e.x*i.y+t.y*e.x*o.y,0!=n&&(r.y=s/n),r},lineLine:function(e,t,o,i){var c=(i.x-o.x)*(e.y-o.y)-(i.y-o.y)*(e.x-o.x),a=(t.x-e.x)*(e.y-o.y)-(t.y-e.y)*(e.x-o.x),s=(i.y-o.y)*(t.x-e.x)-(i.x-o.x)*(t.y-e.y);if(0!==s){var n=c/s,r=a/s;if(0<=n&&n<=1&&0<=r&&r<=1)return!0}return!1},showIcon:function(e,t){var o=this.node.getChildByName("icon"),i=(1-o.anchorX)*o.width,c=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),a=e.x-(e.x-t.x)*i/c,s=e.y-(e.y-t.y)*i/c;this.node.getChildByName("icon").position=cc.v2(a,s);var n=e.y>t.y?1:-1;this.node.getChildByName("icon").rotation=180*Math.atan((e.x-t.x)/(e.y-t.y))/Math.PI-90*n,this.node.getChildByName("icon").getChildByName("mask").getChildByName("icon").rotation=-this.node.getChildByName("icon").rotation},update:function(){if(this._showIcon){var e=this.player.getChildByName("rotate").getChildByName("power").convertToWorldSpaceAR(cc.v2(0,0)),t=this.player2.getChildByName("rotate2").getChildByName("power2").convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToNodeSpaceAR(e),i=this.node.convertToNodeSpaceAR(t),c=cc.v2(-cc.winSize.width/2,-cc.winSize.height/2),a=cc.v2(-cc.winSize.width/2,cc.winSize.height/2),s=cc.v2(cc.winSize.width/2,cc.winSize.height/2),n=cc.v2(cc.winSize.width/2,-cc.winSize.height/2);if(i.x<-cc.winSize.width/2||i.x>cc.winSize.width/2||i.y<-cc.winSize.height/2||i.y>cc.winSize.height/2){var r=cc.v2(0,0);this.lineLine(o,i,c,a)&&(r=this.CrossPoint(o,i,c,a)),this.lineLine(o,i,a,s)&&(r=this.CrossPoint(o,i,a,s)),this.lineLine(o,i,s,n)&&(r=this.CrossPoint(o,i,s,n)),this.lineLine(o,i,n,c)&&(r=this.CrossPoint(o,i,n,c)),this.node.getChildByName("icon").active=!0,this.showIcon(r,o)}else this.node.getChildByName("icon").active=!1}}}),cc._RF.pop()},{}],player2:[function(e,t,o){"use strict";cc._RF.push(t,"132c6WYKHJLtpsdM8CaVBm+","player2");var i=e("game_scene");cc.Class({extends:cc.Component,properties:{init_speed:150,a_power:600,y_radio:.5560472,play_Score:1,jump_complete:!0,game_manager:{type:i,default:null},scoreDisplay:{type:cc.Label,default:null}},onLoad:function(){this.next_block=null,this.direction=1,this.y_radio=.5560472},set_next_block:function(e){this.next_block=e},set_cur_block:function(e){this.cur_block=e},update:function(e){this.is_power_mode&&(this.speed+=this.a_power*e,this.x_distance+=this.speed*e)}}),cc._RF.pop()},{game_scene:"game_scene"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"21c8axcsehOF7uRiV385w6I","player");var i=e("game_scene");cc.Class({extends:cc.Component,properties:{init_speed:150,a_power:600,y_radio:.5560472,play_Score:1,jump_complete:!1,game_manager:{type:i,default:null},scoreDisplay:{type:cc.Label,default:null}},onLoad:function(){this.next_block=null,this.direction=1,this.y_radio=.5560472},player_jump:function(){this.game_manager.jumpAudio();var e=this.x_distance*this.direction,t=this.x_distance*this.y_radio,o=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=this.cur_block.node.convertToNodeSpaceAR(o);t+=this.next_block.mid.y-this.next_block.node.getChildByName("center").y-(i.y-this.cur_block.node.getChildByName("center").y);var c=this.node.getPosition();c.x+=e,c.y+=t;var a=this.node.parent.convertToWorldSpaceAR(c),s=-1;this.next_block.is_jump_on_block(a,this.direction)?(c=this.node.parent.convertToNodeSpaceAR(a),s=2):this.cur_block.is_jump_on_origin_block(a,this.direction)?(c=this.node.parent.convertToNodeSpaceAR(a),s=1):s=0;var n=this.game_manager.getDirection();if(this.game_manager.onDirection()&&2==s&&(n=Math.random()<.5?-1:1),0==s)this.node.runAction(cc.sequence(cc.jumpTo(.5,c,200,1),cc.callFunc(function(){this.game_manager.startfallingWaterAudio(),this.anim3=this.anim_node.getComponent(cc.Animation),this.anim3.play("jump3")}.bind(this)),cc.delayTime(1),cc.callFunc(function(){this.game_manager.move_start(),this.play_Score=1,this.jump_complete=!0}.bind(this))));else if(this.cur_block.is_jump_on_origin_block(a,n))this.play_Score=1,this.game_manager.startlandingAudio(),this.jump_complete=!0;else{this.direction=n;var r=this.next_block.getMidPos();a.sub(r).mag()<10?this.gainScore=Math.pow(2,this.play_Score):this.gainScore=1,this.game_manager.gainScore(this.gainScore),this.target_pos=c,this.game_manager.playJump(a.x,t,c)}},aniJump:function(e,t,o,i){this.anim_node.getComponent(cc.Animation).play("jump2"),this.node.runAction(cc.sequence(cc.jumpTo(.5,this.target_pos,200,1),cc.callFunc(function(){this.game_manager.gainScore_over(),this.game_manager.startlandingAudio(),this.gainScore>1?(this.play_Score++,this.game_manager.startcomboAudio()):this.play_Score=1,this.scoreDisplay.string=this.gainScore;var c=cc.fadeIn(.1),a=cc.fadeOut(1),s=cc.sequence(c,a);this.score_node.runAction(s),this.jump_complete=!0,this.game_manager.refBlock(e,t,o,i),this.target_pos=null}.bind(this))))},set_next_block:function(e){this.next_block=e},set_cur_block:function(e){this.cur_block=e},start:function(){this.rot_node=this.node.getChildByName("rotate"),this.anim_node=this.rot_node.getChildByName("anim"),this.power_node=this.rot_node.getChildByName("power"),this.score_node=this.rot_node.getChildByName("jump_score");var e=this.anim_node.getComponent(cc.Animation);this.bg_node=cc.find("Canvas/bg"),this.is_power_mode=!1,this.speed=0,this.x_distance=0,this.stopTime=0,this.bg_node.on(cc.Node.EventType.TOUCH_START,function(t){this.jump_complete&&(this.is_power_mode=!0,this.x_distance=0,this.speed=this.init_speed,this.power_node.stopAllActions(),this.power_node.runAction(cc.scaleTo(2,1,1)),e.play("jump"))}.bind(this),this),this.bg_node.on(cc.Node.EventType.TOUCH_END,function(e){this.jump_complete&&this.is_power_mode&&(this.is_power_mode=!1,this.power_node.stopAllActions(),this.power_node.runAction(cc.scaleTo(.5,.4,.4)),this.jump_complete=!1,this.player_jump())}.bind(this),this),this.bg_node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.jump_complete&&this.is_power_mode&&(this.is_power_mode=!1,this.power_node.stopAllActions(),this.power_node.runAction(cc.scaleTo(.5,.4,.4)),this.jump_complete=!1,this.player_jump())}.bind(this),this)},update:function(e){this.is_power_mode&&(this.speed+=this.a_power*e,this.x_distance+=this.speed*e)}}),cc._RF.pop()},{game_scene:"game_scene"}]},{},["block","game_scene","player","player2"]);