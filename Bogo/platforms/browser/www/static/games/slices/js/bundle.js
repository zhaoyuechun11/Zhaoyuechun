var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();!function(){function e(t,i,o){function r(n,s){if(!i[n]){if(!t[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(a)return a(n,!0);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}var h=i[n]={exports:{}};t[n][0].call(h.exports,function(e){return r(t[n][1][e]||e)},h,h.exports,e,t,i,o)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<o.length;n++)r(o[n]);return r}return e}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.init=function(){Laya.ClassUtils.regClass},e.width=640,e.height=1136,e.scaleMode="fixedwidth",e.screenMode="none",e.alignV="top",e.alignH="left",e.startScene="EndView.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e}();i.default=o,o.init()},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("./GameConfig"),r=e("./view/RootView"),a=e("./MessageProxy"),n=function(){function e(){this.stageWidth=720,this.stageHeight=1280,this.scene=null,Config.isAlpha=!0,Laya.init(this.stageWidth,this.stageHeight),Laya.stage.bgColor=null,Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL,Laya.stage.screenMode=o.default.screenMode,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.URL.exportSceneToJson=o.default.exportSceneToJson,Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return e.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},e.prototype.onConfigLoaded=function(){a.MessageProxy.Instance().InitProxy(),this.rootView=new r.RootView,Laya.stage.addChild(this.rootView),this.rootView.init()},e}();i.GameController=n,i.game=new n},{"./GameConfig":1,"./MessageProxy":3,"./view/RootView":14}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=Laya.Browser,r=function(){function e(){}return e.Instance=function(){return null==this.s_instance&&(this.s_instance=new e),this.s_instance},e.prototype.SetGameView=function(e){this._view=e},e.prototype.InitProxy=function(){var e=this;o.window.addEventListener("message",function(t){console.log("receive message listener"),e.OnReceiveMessage(t.data)}),this._users=[]},e.prototype.PostMessage=function(e){o.window.parent&&o.window.parent.postMessage(e,"*")},e.prototype.SendPostScore=function(e){this.PostMessage({cmd:"SendGameData",data:e})},e.prototype.SendLoadReady=function(){this.PostMessage({cmd:"GameLoadReady"})},e.prototype.SendGameReady=function(){this.PostMessage({cmd:"GamePlayReady"})},e.prototype.SendGameOver=function(){this.PostMessage({cmd:"GameOver"})},e.prototype.AddListenter=function(e){this._listener=e},e.prototype.RemoveListener=function(){this._listener=null},e.prototype.OnReceiveMessage=function(e){console.log("on receive message"),console.log(e);switch(e.cmd){case"UpdateData":2==this._users.length&&(e.data.userId==this._users[0].userId?this._view&&this._view.UpdateScoreData(0,e.data.userScore):this._view&&this._view.UpdateScoreData(1,e.data.userScore));break;case"GameResult":this._view&&this._view.ShowResult(e.data);break;case"GameBegin":console.log(e.data),this._users=e.data,this._view?(console.log("set view data  "),this._view.SetUserData(0,e.data[0]),this._view.SetUserData(1,e.data[1])):console.log("view is not create ")}this._listener&&(console.log("call back listener "),this._listener(e.data))},e}();i.MessageProxy=r},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o="watermelon",r=e("../utils/MathTools"),a=e("../view/PieceItemContainer"),n=e("../view/RandomPieceItemContainer"),s=function(){function e(){this.pieceStyle=o,this.itemPieceType="game/img_"+this.pieceStyle+".png",this.generatePieceData=[[0],[1],[2],[3],[4],[5],[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,0,1],[0,1,2],[1,2,3],[2,3,4],[3,4,5],[4,5,0]],this.getPieceStyle()}return e.prototype.getPieceSkin=function(){return this.itemPieceType},e.prototype.setPieceSkin=function(e){this.itemPieceType=e},e.prototype.getPieceStyle=function(){switch(r.MathTools.randomNum(0,4)){case 0:this.pieceStyle="kiwi";break;case 1:this.pieceStyle="mangosteen";break;case 2:this.pieceStyle="avocado";break;case 3:this.pieceStyle="strawberry";break;case 4:this.pieceStyle=o}this.itemPieceType="game/img_"+this.pieceStyle+".png"},e.prototype.getRandomPieces=function(){if(0==this.generatePieceData.length)return[0];var e=r.MathTools.randomFloat(0,1);return e>0&&e<=.7?this.generatePieceData[r.MathTools.randomNum(0,5)]:e>.7&&e<=.9?this.generatePieceData[r.MathTools.randomNum(6,11)]:e>.9&&e<=1?this.generatePieceData[r.MathTools.randomNum(12,17)]:this.generatePieceData[r.MathTools.randomNum(0,17)]},e.prototype.getRandomPieceItemContainer=function(){var e=new n.RandomPieceItemContainer;return e.setpieceItemArray(this.getRandomPieces()),e.setPieceType(this.pieceStyle),e.setPieceSkin(this.itemPieceType),e.centerX=0,e.centerY=0,e},e.prototype.generatePieceItemContainer=function(){var e=new a.PieceItemContainer;return e.setPieceType(this.pieceStyle),e.setPieceSkin(this.itemPieceType),e.centerX=0,e.centerY=0,e},e}();i.PieceDataFactory=s},{"../utils/MathTools":9,"../view/PieceItemContainer":12,"../view/RandomPieceItemContainer":13}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){this.user_score=0,this.opposite_score=0,this.user_name="User",this.opposite_name="User",this.game_result=0}return e.Instance=function(){return null==this.s_instance&&(this.s_instance=new e),this.s_instance},e.prototype.setGameResult=function(e){this.game_result=e},e.prototype.getGameResult=function(){return this.game_result},e.prototype.getUserScore=function(){return this.user_score},e.prototype.setUserScore=function(e){this.user_score=e},e.prototype.addUserScore=function(e){this.user_score+=e},e.prototype.getOppositeScore=function(){return this.opposite_score},e.prototype.setOppositeScore=function(e){this.opposite_score=e},e.prototype.getUserName=function(){return this.user_name},e.prototype.setUserName=function(e){this.user_name=e},e.prototype.getOppositeName=function(){return this.opposite_name},e.prototype.setOppositeName=function(e){this.opposite_name=e},e}();i.PlayerData=o},{}],6:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r=Laya.View,a=Laya.Dialog;!function(e){var t=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Box",props:{y:650,x:359,width:1,var:"box_container",pivotY:450,pivotX:360,height:1},compId:4},{type:"Image",props:{y:20,x:20,width:40,visible:!1,var:"btn_back",skin:"game/img_btn_back.png",height:40},compId:7}],loadList:["game/img_btn_back.png"],loadList3D:[],components:[]},t}(r);e.EndViewUI=t;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:720,height:720},compId:2,child:[{type:"Sprite",props:{y:19,x:-2,var:"sprite_lose",texture:"game/game_lose.png"},compId:3},{type:"Box",props:{y:436,x:170,var:"user_score"},compId:4},{type:"Box",props:{y:436,x:440,var:"opposite_score"},compId:5},{type:"Label",props:{y:536,x:139,width:160,var:"user_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"center"},compId:6},{type:"Label",props:{y:536,x:411,width:160,var:"opposite_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"center"},compId:7}],loadList:["game/game_lose.png"],loadList3D:[],components:[]},t}(a);e.LoseViewUI=i;var n=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:720,visible:!0,height:1280},compId:2,child:[{type:"Image",props:{y:490,x:219,var:"circle_piecedata_bg",skin:"game/img_circle_big.png",centerY:-12,centerX:0},compId:127},{type:"Sprite",props:{y:0,x:0,width:720,visible:!1,var:"sprite_timer",texture:"game/img_gamebg.png",height:1280,alpha:1},compId:3,child:[{type:"Image",props:{y:490,x:219,var:"circle_piecedata_bg2",skin:"game/img_circle_big.png",centerY:-12,centerX:0},compId:74}],components:[]},{type:"Animation",props:{y:480,x:214,var:"ani_ready"},compId:75},{type:"Image",props:{y:0,x:10,width:38,visible:!1,var:"ime_back",skin:"game/img_btn_back.png",height:40},compId:7},{type:"Image",props:{width:1,var:"circle_01",skin:"game/slices_bg.png",pivotY:0,height:1,centerY:-276,centerX:0,anchorX:0},compId:15},{type:"Image",props:{width:1,var:"circle_02",skin:"game/img_circle.png",right:130,pivotY:0,height:1,centerY:-118,anchorX:0},compId:16},{type:"Image",props:{width:1,var:"circle_06",skin:"game/img_circle.png",left:130,height:1,centerY:-118},compId:17},{type:"Image",props:{width:1,var:"circle_03",skin:"game/img_circle.png",right:130,pivotY:0,height:1,centerY:130,anchorX:0},compId:18},{type:"Image",props:{width:1,var:"circle_05",skin:"game/img_circle.png",pivotY:0,left:130,height:1,centerY:130,anchorX:0},compId:19},{type:"Image",props:{width:1,var:"circle_04",skin:"game/img_gamebg.png",rotation:0,pivotX:1,height:1,centerY:252,centerX:0},compId:20},{type:"Image",props:{width:1,var:"circle_piecedata",skin:"game/img_circle.png",pivotY:1,height:1,centerY:-12,centerX:0,anchorX:1},compId:47},{type:"Image",props:{y:1062,x:60,left:63,bottom:82},compId:68,child:[{type:"ProgressBar",props:{x:102,visible:!0,var:"score_progress",skin:"game/img_indicator.png",centerY:21},compId:64},{type:"Image",props:{width:58,var:"img_theme_logo",top:30,skin:"game/img_watermelon.png",rotation:30,left:57,height:71},compId:81}],components:[]},{type:"Box",props:{y:1013,x:313,var:"box_score"},compId:103},{type:"Sprite",props:{y:82,x:325,width:70},compId:82,child:[{type:"Image",props:{y:24,x:0,width:30,var:"img_timer_right",skin:"number/img_0.png",right:0,height:50},compId:83},{type:"Image",props:{y:24,x:5,width:30,var:"img_timer_left",skin:"number/img_0.png",height:50},compId:84}],components:[]},{type:"Sprite",props:{y:90,x:72,var:"sprite_user",texture:"game/slices_user.png"},compId:89,child:[{type:"Text",props:{y:98,x:-50,width:290,var:"user_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"left",runtime:"laya.display.Text"},compId:92},{type:"Box",props:{y:25,x:100,var:"user_score"},compId:101},{type:"Sprite",props:{y:-10,x:-58,width:100,texture:"game/default_head2.png",height:100},compId:129,child:[{type:"Sprite",props:{y:5,x:6,width:87,var:"user_head",scaleY:1,scaleX:1,height:87},compId:120,child:[{type:"Sprite",props:{y:0,x:2,width:86,scaleY:1,scaleX:1,renderType:"mask",height:88},compId:122,child:[{type:"Circle",props:{y:44,x:44,radius:44,lineWidth:1,fillColor:"#ff0000"},compId:123}],components:[]}],components:[]},{type:"Sprite",props:{y:-6,x:-10,texture:"game/head.png"},compId:121}],components:[]}],components:[]},{type:"Sprite",props:{y:90,x:396,var:"sprite_opposite",texture:"game/slices_opposite.png"},compId:93,child:[{type:"Text",props:{y:98,x:12,width:290,var:"opposite_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"right",runtime:"laya.display.Text"},compId:94},{type:"Box",props:{y:25,x:100,var:"opposite_score"},compId:102},{type:"Sprite",props:{y:-10,x:210,width:100,texture:"game/default_head2.png",height:100},compId:131,child:[{type:"Sprite",props:{y:5,x:5,width:88,visible:!0,var:"opposite_head",scaleY:1,scaleX:1,height:88},compId:110,child:[{type:"Sprite",props:{y:-1,x:-2,width:91,visible:!0,renderType:"mask",height:90},compId:124,child:[{type:"Circle",props:{y:45,x:45,radius:45,lineWidth:1,fillColor:"#ff0000"},compId:125}],components:[]}],components:[]},{type:"Sprite",props:{y:-6,x:-11,texture:"game/head.png"},compId:126}],components:[]},{type:"Sprite",props:{y:-30,x:187,var:"oppohead_add",scaleY:.48,scaleX:.48},compId:133}],components:[]},{type:"Sprite",props:{y:635,x:360,width:392,pivotY:72,pivotX:196,height:144},compId:106,child:[{type:"Sprite",props:{y:72,x:196,width:264,var:"sprite_go",texture:"game/go.png",scaleY:0,scaleX:0,pivotY:72,pivotX:132,height:144},compId:107},{type:"Sprite",props:{y:72,x:196,width:392,var:"sprite_ready",texture:"game/ready.png",scaleY:.2,scaleX:0,pivotY:72,pivotX:196,height:144},compId:108}],components:[]},{type:"Sprite",props:{y:60,x:-8,var:"userhead_add",scaleY:.48,scaleX:.48},compId:132}],animations:[{nodes:[{target:101,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:101,key:"y",index:0}],x:[{value:127,tweenMethod:"linearNone",tween:!0,target:101,key:"x",index:0}]}},{target:92,keyframes:{y:[{value:80.75,tweenMethod:"linearNone",tween:!0,target:92,key:"y",index:0}],x:[{value:21,tweenMethod:"linearNone",tween:!0,target:92,key:"x",index:0}],align:[{value:"left",tweenMethod:"linearNone",tween:!1,target:92,key:"align",index:0}]}},{target:94,keyframes:{y:[{value:84,tweenMethod:"linearNone",tween:!0,target:94,key:"y",index:0}],x:[{value:174,tweenMethod:"linearNone",tween:!0,target:94,key:"x",index:0}],align:[{value:"right",tweenMethod:"linearNone",tween:!1,target:94,key:"align",index:0}]}},{target:102,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:102,key:"y",index:0}],x:[{value:127,tweenMethod:"linearNone",tween:!0,target:102,key:"x",index:0}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["game/img_circle_big.png","game/img_gamebg.png","game/img_btn_back.png","game/slices_bg.png","game/img_circle.png","game/img_indicator.png","game/img_watermelon.png","number/img_0.png","game/slices_user.png","game/default_head2.png","game/head.png","game/slices_opposite.png","game/go.png","game/ready.png"],loadList3D:[],components:[]},t}(r);e.MainGameUI=n;var s=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{y:0,width:242,height:242,centerY:0,centerX:0},compId:2,child:[{type:"Image",props:{y:121,x:120,width:242,var:"img_piece_bg",skin:"game/img_circle.png",height:242,anchorY:.5,anchorX:.5},compId:54,child:[{type:"Sprite",props:{y:114,x:114,var:"sprite_bg"},compId:53,child:[{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel1",rotation:30},compId:32,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece1",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:33}],components:[]},{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel3",rotation:150},compId:44,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece3",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:35}],components:[]},{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel2",rotation:90},compId:43,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece2",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:34}],components:[]},{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel4",rotation:210},compId:45,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece4",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:38}],components:[]},{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel5",rotation:270},compId:46,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece5",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:39}],components:[]},{type:"Sprite",props:{y:8,x:7,var:"sprite_pannel6",rotation:330},compId:47,child:[{type:"Image",props:{y:0,x:0,var:"sprite_piece6",skin:"game/img_watermelon.png",scaleY:.9,scaleX:.9},compId:40}],components:[]}],components:[]},{type:"Animation",props:{y:0,x:0,var:"ani_swf"},compId:62}],components:[]},{type:"Box",props:{y:121,x:121,width:1,var:"score_ani",pivotY:.5,pivotX:.5,height:1},compId:66}],loadList:["game/img_circle.png","game/img_watermelon.png"],loadList3D:[],components:[]},t}(r);e.PieceUI=s;var c=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:290,height:290},compId:2,child:[{type:"Sprite",props:{y:146,x:146,width:145,var:"sprite_bg",height:145},compId:30,child:[{type:"Sprite",props:{y:2,x:0,var:"piece_holder6",rotation:330},compId:42,child:[{type:"Image",props:{var:"img_piece6",skin:"game/img_watermelon.png"},compId:43}],components:[]},{type:"Sprite",props:{y:2,x:0,var:"piece_holder1",rotation:30},compId:32,child:[{type:"Image",props:{var:"img_piece1",skin:"game/img_watermelon.png"},compId:33}],components:[]},{type:"Sprite",props:{y:2,x:0,var:"piece_holder2",rotation:90},compId:34,child:[{type:"Image",props:{var:"img_piece2",skin:"game/img_watermelon.png"},compId:35}],components:[]},{type:"Sprite",props:{y:2,x:0,var:"piece_holder3",rotation:150},compId:36,child:[{type:"Image",props:{var:"img_piece3",skin:"game/img_watermelon.png"},compId:37}],components:[]},{type:"Sprite",props:{y:2,x:0,var:"piece_holder4",rotation:210},compId:38,child:[{type:"Image",props:{var:"img_piece4",skin:"game/img_watermelon.png"},compId:39}],components:[]},{type:"Sprite",props:{y:2,x:0,var:"piece_holder5",rotation:270},compId:40,child:[{type:"Image",props:{var:"img_piece5",skin:"game/img_watermelon.png"},compId:41}],components:[]}],components:[]}],loadList:["game/img_watermelon.png"],loadList3D:[],components:[]},t}(a);e.PieceFactoryUI=c;var p=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"View",props:{width:750,height:1134},compId:2,child:[{type:"Image",props:{y:0,x:0,width:750,height:1134},compId:3},{type:"HBox",props:{y:0,x:0,var:"layer_main",name:"layer_main"},compId:4},{type:"HBox",props:{y:0,x:0,var:"layer_over",name:"layer_over"},compId:5},{type:"HBox",props:{y:0,x:0,var:"layer_ready",name:"layer_ready"},compId:8}],loadList:[],loadList3D:[],components:[]},t}(r);e.RootViewUI=p;var h=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.uiView)},t.uiView={type:"Dialog",props:{width:720,height:720},compId:2,child:[{type:"Sprite",props:{y:215,x:215,width:290,var:"sprite_win",height:290},compId:4,child:[{type:"Sprite",props:{y:144,x:144,width:642,var:"sprite_light",texture:"game/light.png",pivotY:320,pivotX:320,height:642},compId:5},{type:"Sprite",props:{y:-176,x:-176,texture:"game/halo.png"},compId:6},{type:"Sprite",props:{y:-80,x:-215,var:"sprite_tielogo",texture:"game/game_tie.png"},compId:12},{type:"Sprite",props:{y:-80,x:-215,var:"sprite_winlogo",texture:"game/game_win.png"},compId:7}],components:[]},{type:"Box",props:{y:360,x:178,var:"user_score"},compId:8},{type:"Box",props:{y:360,x:448,var:"opposite_score"},compId:9},{type:"Label",props:{y:460,x:147,width:160,var:"user_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"center"},compId:10},{type:"Label",props:{y:460,x:416,width:160,var:"opposite_name",text:"user",overflow:"hidden",height:30,fontSize:30,color:"#ffffff",bold:!0,align:"center"},compId:11}],loadList:["game/light.png","game/halo.png","game/game_tie.png","game/game_win.png"],loadList3D:[],components:[]},t}(a);e.WinViewUI=h}(i.ui||(i.ui={}))},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){this.nowNum=1,this.upGoEffectnum=0,this.upGoEffectFunc=null}return e.prototype.play=function(e,t,i,o,r,a){void 0===r&&(r=!1),null!=e&&null!=t&&null!=i&&null!=r&&(this.num=i,null!=a&&(this.func=a),e.skin=t+this.nowNum.toString()+"."+o,Laya.timer.frameLoop(2,this,this.imgloop,[e,t,o,r]))},e.prototype.imgloop=function(e,t,i,o){this.nowNum<this.num?(this.nowNum+=1,e.skin=t+this.nowNum.toString()+"."+i):!0===o?this.nowNum=0:(null!=this.func&&this.func(),Laya.timer.clear(this,this.imgloop))},e.prototype.upGoEffect=function(e,t,i,o,r){if(null!=e&&null!=t&&null!=i&&null!=o){this.upGoEffectnum=Math.floor(1e3*i/50),e.alpha=1;Laya.Tween.to(e,{scale:4},1e3*i,Laya.Ease.strongOut,null,0),null!=r&&(this.upGoEffectFunc=r),Laya.timer.loop(50,this,this.objUpLoop,[e,t,i,o])}},e.prototype.objUpLoop=function(e,t,i,o){this.upGoEffectnum-=1,o&&(e.alpha=this.upGoEffectnum/Math.floor(1e3*i/80)),this.upGoEffectnum>=0?e.y-=t:(null!=this.upGoEffectFunc&&this.upGoEffectFunc(),Laya.timer.clear(this,this.objUpLoop))},e.prototype.burstEffect=function(e,t,i){Laya.timer.loop(30,this,this.doBurstEffecttFun,[e,t])},e.prototype.doBurstEffecttFun=function(e,t){e.load(t,!0)},e.prototype.effectClear=function(e,t,i){null!==e&&null!==t&&(this.effectClearNum=Math.floor(1e3*t/30),null!=i&&(this.effectClearFunc=i),e.scaleX=0,Laya.timer.loop(30,this,this.effectClearLoop,[e,t]))},e.prototype.effectClearLoop=function(e,t){if(this.effectClearNum>=0&&e.scaleX<=.7)this.effectClearNum-=1,e.scaleX=1-this.effectClearNum/Math.floor(1e3*t/30);else if(this.effectClearNum>=0&&e.scaleX<=.9)e.scaleX=.95;else if(this.effectClearNum>=0&&e.scaleX>=.9){e.scaleX=1;var i=new Laya.Image;i.skin="game/img_bt21_tx.png",i.pivot(318,33),i.scale(1.1,1.1),e.addChild(i),i.x=e.width/2,i.y=e.height/2,this.effectClearNum=-1}else this.effectClearNum<=0&&(e.destroyChildren(),null!=this.effectClearFunc&&this.effectClearFunc(),Laya.timer.clear(this,this.effectClearLoop))},e.prototype.stop=function(e){Laya.timer.clear(this,e)},e}();i.AniUtils=o},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={},r=function(){function e(){}return e.Instance=function(){return null==this.s_instance&&(this.s_instance=new e),this.s_instance},e.prototype.OnEvent=function(e,t,i){for(var r=t.split(" "),a=0;a<r.length;a++){var n=r[a];o[n]=o[n]||[],o[n].push({caller:e,cb:i})}},e.prototype.OffEvent=function(e,t,i){if(t)for(var r=t.split(" "),a=0;a<r.length;a++){var n=o[r[a]],s=[];if(i&&n)for(var c=0;c<n.length;c++)n[c].caller===e&&n[c].cb===i||s.push(n[c]);o[r[a]]=s}},e.prototype.TriggerEvent=function(e,t){var i=e.split(" ");if(!t);for(var r=0;r<i.length;r++){var a=i[r],n=o[a];if(n)for(var s=0;s<n.length;s++)n[s].cb.apply(n[s].caller,t)}},e}();i.CustomEventManager=r},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.getAngleFormY=function(e,t,i,o){var r=Math.abs(e-i),a=Math.abs(t-o),n=a/Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),s=Math.acos(n),c=180/(Math.PI/s);return i>e&&o>t?c=c:i==e&&o>t?c=180:i>e&&o==t?c=90:i<e&&o>t?c=-c:i<e&&o==t?c=-90:i<e&&o<t?c=-180+c:i>e&&o<t&&(c=180-c),c},e.getDistance=function(e,t,i,o){var r=Math.abs(e-i),a=Math.abs(t-o);return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))},e.randomNum=function(e,t){return e+Math.round((t-e)*Math.random())},e.randomFloat=function(e,t){return e+(t-e)*Math.random()},e.pieceMoveFromTween=function(e,t,i){Laya.Tween.from(e,{x:t,y:i},1e3,Laya.Ease.elasticOut,null,0)},e.pieceMoveToTween=function(e,t,i){Laya.Tween.to(e,{x:t,y:i},1e3,Laya.Ease.elasticOut,null,0)},e}();i.MathTools=o},{}],10:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r,a=e("../ui/layaMaxUI"),n=e("../GameController"),s=e("../logic/PlayerData"),c=e("../logic/PiecesDataFactory"),p=e("../utils/AniUtils"),h=e("../utils/CustomEventManager"),l=e("../MessageProxy");!function(e){e[e.Laya_Ready=0]="Laya_Ready",e[e.Layer_Main=1]="Layer_Main",e[e.Layer_Over=2]="Layer_Over"}(r||(r={}));var m=function(e){function t(){var t=e.call(this)||this;return t.score=0,t.timerNum=90,t.isUpdated=!1,t.clickable=!1,t.lblList=[],t}return o(t,e),t.prototype.init=function(){this.initData(),this.initPieceItemContainerArr(),this.initViews(),this.drowCircleImg(this.opposite_head,"")},t.prototype.showReady=function(){this.sprite_go.visible=!0,this.sprite_ready.visible=!0,Laya.Tween.to(this.sprite_ready,{scaleX:1,scaleY:1},400,Laya.Ease.strongOut,null,0),Laya.Tween.to(this.sprite_ready,{scaleX:0,scaleY:0},300,Laya.Ease.strongOut,null,400),Laya.Tween.to(this.sprite_go,{scaleX:1,scaleY:1},400,Laya.Ease.strongOut,null,700),Laya.Tween.to(this.sprite_go,{scaleX:0,scaleY:0},300,Laya.Ease.strongOut,Laya.Handler.create(this,this.resetReadyGo),1100),Laya.SoundManager.playSound("sound/readygo.mp3",1,new Laya.Handler(this,this.playMusicBg))},t.prototype.playMusicBg=function(){Laya.SoundManager.stopSound("sound/readygo.mp3"),Laya.SoundManager.playMusic("sound/slicesbg.mp3",0)},t.prototype.stopPlayMusicBg=function(){Laya.SoundManager.stopMusic()},t.prototype.initViews=function(){this.circle_piecedata.addChild(this.RandomPieceItemContainer),this.circle_01.addChild(this.pieceItemContainer1),this.circle_02.addChild(this.pieceItemContainer2),this.circle_03.addChild(this.pieceItemContainer3),this.circle_04.addChild(this.pieceItemContainer4),this.circle_05.addChild(this.pieceItemContainer5),this.circle_06.addChild(this.pieceItemContainer6),this.box_score.visible=!1,this.score_progress.visible=!1,this.img_theme_logo.visible=!1,Laya.timer.loop(1e3,this,this.timerCutDownView),this.showScore(),this.drowCircleImg(this.user_head,"game/default_head2.png"),this.drowCircleImg(this.opposite_head,"game/default_head2.png")},t.prototype.resetReadyGo=function(){this.sprite_go.scale(.1,.1),this.sprite_go.visible=!1,this.sprite_ready.scale(.1,.1),this.sprite_ready.visible=!1,this.clickable=!0},t.prototype.initData=function(){this.pieceDataFactory=new c.PieceDataFactory,this.RandomPieceItemContainer=this.pieceDataFactory.getRandomPieceItemContainer(),this.RandomPieceItemContainer.resetViews(),this.circleFacPosX=360,this.circleFacPosY=630,this.ani_ready.x=190,this.ani_ready.y=460,this.ani_ready.interval=40,this.ani_ready.scale(1,1),l.MessageProxy.Instance().SendLoadReady(),l.MessageProxy.Instance().SendGameReady(),l.MessageProxy.Instance().SetGameView(this),this.showReady()},t.prototype.initPieceItemContainerArr=function(){this.pieceItemContainer1=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer1.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction1),this.pieceItemContainer2=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer2.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction2),this.pieceItemContainer3=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer3.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction3),this.pieceItemContainer4=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer4.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction4),this.pieceItemContainer5=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer5.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction5),this.pieceItemContainer6=this.pieceDataFactory.generatePieceItemContainer(),this.pieceItemContainer6.on(Laya.Event.MOUSE_DOWN,this,this.onAddPieceAction6),this.pieceItemContainerArr=[this.pieceItemContainer1,this.pieceItemContainer2,this.pieceItemContainer3,this.pieceItemContainer4,this.pieceItemContainer5,this.pieceItemContainer6]},t.prototype.showScore=function(){this.showUserScore(this.user_score,s.PlayerData.Instance().getUserScore(),.3,24),this.showUserScore(this.opposite_score,s.PlayerData.Instance().getOppositeScore(),.3,24),l.MessageProxy.Instance().SendPostScore(s.PlayerData.Instance().getUserScore())},t.prototype.onAddPieceAction1=function(){this.clickable&&(this.pieceItemContainer1.setPieceCenterX(this.circle_01.x).setPieceCenterY(this.circle_01.y),this.isUpdated=this.pieceItemContainer1.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(0,this.isUpdated))},t.prototype.onAddPieceAction2=function(){this.clickable&&(this.pieceItemContainer2.setPieceCenterX(this.circle_02.x).setPieceCenterY(this.circle_02.y),this.isUpdated=this.pieceItemContainer2.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(1,this.isUpdated))},t.prototype.onAddPieceAction3=function(){this.clickable&&(this.pieceItemContainer3.setPieceCenterX(this.circle_03.x).setPieceCenterY(this.circle_03.y),this.isUpdated=this.pieceItemContainer3.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(2,this.isUpdated))},t.prototype.onAddPieceAction4=function(){this.clickable&&(this.pieceItemContainer4.setPieceCenterX(this.circle_04.x).setPieceCenterY(this.circle_04.y),this.isUpdated=this.pieceItemContainer4.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(3,this.isUpdated))},t.prototype.onAddPieceAction5=function(){this.clickable&&(this.pieceItemContainer5.setPieceCenterX(this.circle_05.x).setPieceCenterY(this.circle_05.y),this.isUpdated=this.pieceItemContainer5.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(4,this.isUpdated))},t.prototype.onAddPieceAction6=function(){this.clickable&&(this.pieceItemContainer6.setPieceCenterX(this.circle_06.x).setPieceCenterY(this.circle_06.y),this.isUpdated=this.pieceItemContainer6.upDataPieceItemArray(this.RandomPieceItemContainer.getpieceItemArray()),this.onCirclePieceDataAction(5,this.isUpdated))},t.prototype.onCirclePieceDataAction=function(e,t){var i=this;t&&this.pieceItemContainerArr.length>=e+1?(this.checkPieceItemContainerState(e),Laya.timer.once(200,this,function(){i.resetRandomPieceItemContainer(),i.pieceItemContainerArr[e].foreachPiecesStates()})):this.addPieceItemContainerFailue(e)},t.prototype.resetRandomPieceItemContainer=function(){this.circle_piecedata.destroyChildren(),this.RandomPieceItemContainer=this.pieceDataFactory.getRandomPieceItemContainer(),this.circle_piecedata.addChild(this.RandomPieceItemContainer),this.RandomPieceItemContainer.resetViews(),this.checkIsAllPannleNoMatch()},t.prototype.checkPieceItemContainerState=function(e){var t,i=this.RandomPieceItemContainer.getPieceItemArraySize(),o=0;0==e?(t=5,o=1):5==e?(t=4,o=0):(t=e-1,o=e+1);var r=this.pieceItemContainerArr[e],a=this.pieceItemContainerArr[t],n=this.pieceItemContainerArr[o];if(this.playTransAni(r,r.getPieceCenterX(),r.getPieceCenterY()),r.checkIsFull()){Laya.SoundManager.playSound("sound/sgblk.mp3",1);var c=r.getPieceItemArraySize()+a.getPieceItemArraySize()+n.getPieceItemArraySize();s.PlayerData.Instance().addUserScore(c),this.playScoreAni(r,r.getPieceItemArraySize()),this.playScoreAni(a,a.getPieceItemArraySize()),this.playScoreAni(n,n.getPieceItemArraySize()),r.clearPieceItemArray(),this.pieceItemContainerArr[t].clearPieceItemArray(),this.pieceItemContainerArr[o].clearPieceItemArray()}else Laya.SoundManager.playSound("sound/yes.mp3",1),s.PlayerData.Instance().addUserScore(i),this.playScoreAni(r,i);l.MessageProxy.Instance().SendPostScore(s.PlayerData.Instance().getUserScore()),this.showUserScore(this.user_score,s.PlayerData.Instance().getUserScore(),.3,24)},t.prototype.addPieceItemContainerFailue=function(e){Laya.SoundManager.playSound("sound/no.mp3",1);var t=this.pieceItemContainerArr[e];this.playTransErrorAni(t.getPieceCenterX(),t.getPieceCenterY())},t.prototype.checkIsAllPannleNoMatch=function(){var e=this.RandomPieceItemContainer.getpieceItemArray();this.pieceItemContainer1.checkCanUpDataItem(e)||this.pieceItemContainer2.checkCanUpDataItem(e)||this.pieceItemContainer3.checkCanUpDataItem(e)||this.pieceItemContainer4.checkCanUpDataItem(e)||this.pieceItemContainer5.checkCanUpDataItem(e)||this.pieceItemContainer6.checkCanUpDataItem(e)||Laya.timer.once(700,this,this.resetRandomPieceItemContainer)},t.prototype.playScoreAni=function(e,t){var i=this;if(0!=e.getPieceItemArraySize()){var o=new p.AniUtils,r=this.pool(this.lblList,e.getScoreAniLable());this.lblList[r].destroyChildren(),this.lblList[r].visible=!1,e.getScoreAniLable();var a=new Laya.Image;a.scale(1,1),a.x=-60,a.y=0,a.skin="score/img_add.png";var n=new Laya.Image;n.scale(1,1),n.x=a.x+60,n.skin="score/img_"+t+".png",this.lblList[r].addChild(a),this.lblList[r].addChild(n),this.lblList[r].anchorX=n.x,this.lblList[r].anchorY=n.y+n.height/2,this.lblList[r].visible=!0,Laya.Tween.to(this.lblList[r],{rotation:-15},60,Laya.Ease.strongOut,null,500),Laya.Tween.to(this.lblList[r],{rotation:0},60,Laya.Ease.strongOut,null,560),Laya.Tween.to(this.lblList[r],{rotation:15},60,Laya.Ease.strongOut,null,620),Laya.Tween.to(this.lblList[r],{rotation:0},60,Laya.Ease.strongOut,null,700),o.upGoEffect(this.lblList[r],10,.4,!1,function(){}),Laya.timer.once(800,this,function(){i.lblList[r].visible=!1})}},t.prototype.playTransAni=function(e,t,i){Laya.Tween.to(this.circle_piecedata,{x:t,y:i},200,Laya.Ease.strongOut,Laya.Handler.create(this,this.resetTransValue,[e]),0),Laya.Tween.to(this.RandomPieceItemContainer.sprite_bg,{scaleX:.9,scaleY:.9},200)},t.prototype.playTransErrorAni=function(e,t){Laya.Tween.to(this.RandomPieceItemContainer.sprite_bg,{scaleX:.9,scaleY:.9},200),Laya.Tween.to(this.circle_piecedata,{x:e,y:t},200,Laya.Ease.strongOut,null,0),Laya.Tween.to(this.circle_piecedata,{x:this.circleFacPosX,y:this.circleFacPosY},200,Laya.Ease.strongOut,null,200),Laya.Tween.to(this.RandomPieceItemContainer.sprite_bg,{scaleX:1,scaleY:1},200,null,null,200)},t.prototype.resetTransValue=function(e){Laya.Tween.to(e.sprite_bg,{},20,Laya.Ease.bounceInOut,null,0),Laya.Tween.to(e.sprite_bg,{},20,Laya.Ease.bounceInOut,null,20)},t.prototype.pool=function(e,t){var i,o=!1;if(e.length>0){for(var r=0;r<e.length;r++)if(null===e[r].text){o=!0,i=r;break}if(!o){a=t;e.push(a),i=e.length-1}}else{var a=t;e.push(a),i=e.length-1}return i},t.prototype.onMouseDownBack=function(){n.game.rootView.closeView(n.game.rootView.gameMainUI,r.Layer_Main)},t.prototype.doCircleRotateEffect=function(){},t.prototype.onLoaded=function(){var e=this;this.ani_ready.visible=!0,Laya.Animation.createFrames(this.aniUrls("ready0",7),"ready"),this.ani_ready.play(0,!1,"ready"),Laya.timer.once(300,this,function(){e.ani_ready.visible=!1})},t.prototype.aniUrls=function(e,t){for(var i=[],o=1;o<=t;o++)i.push("ready/res/"+e+o+".png");return i},t.prototype.timerCutDownView=function(){this.timerNum<=0||(this.timerNum-=1,this.showCutDown(this.timerNum))},t.prototype.showCutDown=function(e){var t=e.toString();1==t.length?(this.img_timer_left.skin="number/img_0.png",this.img_timer_right.skin="number/img_"+t[0]+".png"):t.length>1&&(this.img_timer_left.skin="number/img_"+t[0]+".png",this.img_timer_right.skin="number/img_"+t[1]+".png")},t.prototype.showUserScore=function(e,t,i,o){e.destroyChildren(),t<0&&(t=0);var r=t.toString(),a=0;if(1==r.length){a=o;(s=new Laya.Image).scale(i,i),s.skin="number/img_0.png",e.addChild(s)}for(var n=0;n<r.length;n++){var s=new Laya.Image;s.scale(i,i),s.skin="number/img_"+r[n]+".png",e.addChild(s),s.x=a+n*o}},t.prototype.onDestory=function(){this.stopPlayMusicBg(),Laya.timer.clearAll(this),h.CustomEventManager.Instance().OffEvent(this,"score",this.showUserScore),h.CustomEventManager.Instance().OffEvent(this,"cutdown",this.timerCutDownView)},t.prototype.UpdateScoreData=function(e,t){0==e?(this.showUserScore(this.user_score,t,.3,24),s.PlayerData.Instance().setUserScore(t)):(this.showUserScore(this.opposite_score,t,.3,24),s.PlayerData.Instance().setOppositeScore(t))},t.prototype.SetUserData=function(e,t){0==e?(this.user_name.text=t.userName,s.PlayerData.Instance().setUserName(t.userName),this.drowCircleImg(this.user_head,t.userHead),this.drowCircleImg(this.userhead_add,t.userHeadFrame)):(this.opposite_name.text=t.userName,s.PlayerData.Instance().setOppositeName(t.userName),this.drowCircleImg(this.opposite_head,t.userHead),this.drowCircleImg(this.oppohead_add,t.userHeadFrame))},t.prototype.drowCircleImg=function(e,t){0!=t.length&&e.loadImage(t)},t.prototype.ShowResult=function(e){this.onDestory(),s.PlayerData.Instance().setGameResult(e),n.game.rootView.openView(n.game.rootView.gameOverView,r.Layer_Over)},t}(a.ui.MainGameUI);i.GameMainView=m},{"../GameController":2,"../MessageProxy":3,"../logic/PiecesDataFactory":4,"../logic/PlayerData":5,"../ui/layaMaxUI":6,"../utils/AniUtils":7,"../utils/CustomEventManager":8}],11:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r,a=e("../ui/layaMaxUI"),n=e("../logic/PlayerData"),s=e("../GameController"),c=e("../MessageProxy");!function(e){e[e.Laya_Ready=0]="Laya_Ready",e[e.Layer_Main=1]="Layer_Main",e[e.Layer_Over=2]="Layer_Over"}(r||(r={}));var p=function(e){function t(){var t=e.call(this)||this;return t.timerNum=4,t.oppositeScore=0,t.uerScore=0,t}return o(t,e),t.prototype.init=function(){var e=n.PlayerData.Instance().getGameResult();this.uerScore=n.PlayerData.Instance().getUserScore(),this.oppositeScore=n.PlayerData.Instance().getOppositeScore(),this.userName=n.PlayerData.Instance().getUserName(),this.oppositeName=n.PlayerData.Instance().getOppositeName(),this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownBack),this.box_container.scale(.1,.1),e>0?this.showUserWin():e<=0?this.showUserLose():this.showUserTie()},t.prototype.onMouseDownBack=function(){this.onDestory(),s.game.rootView.closeView(s.game.rootView.gameOverView,r.Layer_Over),s.game.rootView.closeView(s.game.rootView.gameMainUI,r.Layer_Main),c.MessageProxy.Instance().SetGameView(null),c.MessageProxy.Instance().SendGameOver()},t.prototype.showUserWin=function(){var e=this,t=new a.ui.WinViewUI;this.box_container.addChild(t),Laya.SoundManager.playSound("sound/win.mp3",1),Laya.Tween.to(this.box_container,{scaleX:1,scaleY:1},500,Laya.Ease.strongOut,null,0),t.opposite_name.text=this.oppositeName,t.user_name.text=this.userName,t.sprite_winlogo.visible=!0,t.sprite_tielogo.visible=!1,this.showUserScore(t.user_score,this.uerScore,.6,45),this.showUserScore(t.opposite_score,this.oppositeScore,.6,45),Laya.timer.frameLoop(1,this,function(){e.rotationLight(t.sprite_light)})},t.prototype.showUserLose=function(){var e=new a.ui.LoseViewUI;this.box_container.addChild(e),Laya.SoundManager.playSound("sound/over.mp3",1),e.user_name.text=this.userName,e.opposite_name.text=this.oppositeName,this.showUserScore(e.user_score,this.uerScore,.6,45),this.showUserScore(e.opposite_score,this.oppositeScore,.6,45),Laya.Tween.to(this.box_container,{scaleX:1,scaleY:1},500,Laya.Ease.strongOut,null,0)},t.prototype.showUserTie=function(){var e=this,t=new a.ui.WinViewUI;this.box_container.addChild(t),Laya.SoundManager.playSound("sound/tie.mp3",1),Laya.Tween.to(this.box_container,{scaleX:1,scaleY:1},500,Laya.Ease.strongOut,null,0),t.user_name.text=this.userName,t.opposite_name.text=this.oppositeName,t.sprite_winlogo.visible=!1,t.sprite_tielogo.visible=!0,this.showUserScore(t.user_score,this.uerScore,.6,45),this.showUserScore(t.opposite_score,this.oppositeScore,.6,45),Laya.timer.frameLoop(1,this,function(){e.rotationLight(t.sprite_light)})},t.prototype.rotationLight=function(e){e.rotation+=2},t.prototype.showUserScore=function(e,t,i,o){console.log("score:"+t),e.destroyChildren(),t<0&&(t=0);var r=t.toString(),a=0;if(1==r.length){a=o;(s=new Laya.Image).scale(i,i),s.skin="number/img_0.png",e.addChild(s)}for(var n=0;n<r.length;n++){var s=new Laya.Image;s.scale(i,i),s.skin="number/img_"+r[n]+".png",e.addChild(s),s.x=a+n*o}},t.prototype.onDestory=function(){Laya.SoundManager.stopAll(),Laya.timer.clearAll(this)},t.prototype.timerCutDownView=function(){this.timerNum-=1,this.timerNum<=0&&(s.game.rootView.closeView(s.game.rootView.gameOverView,r.Layer_Over),s.game.rootView.closeView(s.game.rootView.gameMainUI,r.Layer_Main),this.onDestory())},t}(a.ui.EndViewUI);i.GameOverView=p},{"../GameController":2,"../MessageProxy":3,"../logic/PlayerData":5,"../ui/layaMaxUI":6}],12:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this)||this;return t.pieceTheme="game/img_watermelon.png",t.pieceType="watermelon",t.pieceItemArray=[],t.score_ani.centerX=0,t.score_ani.centerY=0,t.ani_swf.pos(-140,-140),t.ani_swf.scale(2,2),t.ani_swf.interval=50,t.resetViews(),t.initScoreLable(),t}return o(t,e),t.prototype.resetViews=function(){this.initViews(),this.foreachPiecesStates()},t.prototype.initViews=function(){this.sprite_bg.visible=!0,this.sprite_pannel1.visible=!1,this.sprite_pannel2.visible=!1,this.sprite_pannel3.visible=!1,this.sprite_pannel4.visible=!1,this.sprite_pannel5.visible=!1,this.sprite_pannel6.visible=!1},t.prototype.initScoreLable=function(){this.score_ani.visible=!1},t.prototype.foreachPiecesStates=function(){if(null!=this.pieceItemArray&&0!=this.pieceItemArray.length)for(var e=0;e<this.pieceItemArray.length;e++){switch(this.pieceItemArray[e]){case 0:this.sprite_pannel1.visible=!0,this.sprite_piece1.skin=this.pieceTheme;break;case 1:this.sprite_pannel2.visible=!0,this.sprite_piece2.skin=this.pieceTheme;break;case 2:this.sprite_pannel3.visible=!0,this.sprite_piece3.skin=this.pieceTheme;break;case 3:this.sprite_pannel4.visible=!0,this.sprite_piece4.skin=this.pieceTheme;break;case 4:this.sprite_pannel5.visible=!0,this.sprite_piece5.skin=this.pieceTheme;break;case 5:this.sprite_pannel6.visible=!0,this.sprite_piece6.skin=this.pieceTheme}}},t.prototype.getPieceCenterX=function(){return this.posX},t.prototype.setPieceCenterX=function(e){return this.posX=e,this},t.prototype.getPieceCenterY=function(){return this.posY},t.prototype.setPieceCenterY=function(e){return this.posY=e,this},t.prototype.getPieceType=function(){return this.pieceType},t.prototype.setPieceType=function(e){return this.pieceType=e,this},t.prototype.getPieceSkin=function(){return this.pieceTheme},t.prototype.setPieceSkin=function(e){return this.pieceTheme=e,this},t.prototype.getScoreAniLable=function(){return this.score_ani},t.prototype.setScoreAniLable=function(e){return this.score_ani=e,this},t.prototype.getpieceItemArray=function(){return this.pieceItemArray},t.prototype.setpieceItemArray=function(e){this.pieceItemArray=e,this.foreachPiecesStates()},t.prototype.checkCanUpDataItem=function(e){if(null==this.pieceItemArray||0==this.pieceItemArray.length)return!0;for(var t=0,i=e;t<i.length;t++){var o=i[t];if(this.pieceItemArray.indexOf(o)>-1)return!1}return!0},t.prototype.upDataPieceItemArray=function(e){return!!this.checkCanUpDataItem(e)&&(this.pieceItemArray=this.pieceItemArray.concat(e),!0)},t.prototype.clearPieceItemArray=function(){var e=this;Laya.timer.once(220,this,function(){0!=e.getPieceItemArraySize()&&(e.pieceItemArray=[],e.resetViews(),e.doCircleBurstEffect())})},t.prototype.getPieceItemArraySize=function(){return null!=this.pieceItemArray?this.pieceItemArray.length:0},t.prototype.checkIsFull=function(){return 6==this.getPieceItemArraySize()},t.prototype.playScaleanimate=function(){var e=this;Laya.timer.once(100,this,function(){e.updateScaleValue()}),Laya.timer.once(200,this,function(){e.resetScaleValue()})},t.prototype.updateScaleValue=function(){Laya.Tween.to(this.sprite_bg,{scaleX:1.1,scaleY:1.1},100)},t.prototype.resetScaleValue=function(){Laya.Tween.to(this.sprite_bg,{scaleX:.9,scaleY:.9},100)},t.prototype.doCircleBurstEffect=function(){this.ani_swf.loadAtlas("res/atlas/baolie/"+this.pieceType+".atlas",Laya.Handler.create(this,this.onLoaded))},t.prototype.onLoaded=function(){var e=this;Laya.Animation.createFrames(this.aniUrls(this.pieceType,14),"burst"),this.ani_swf.play(0,!1,"burst"),this.ani_swf.visible=!0,Laya.timer.once(700,this,function(){e.ani_swf.visible=!1})},t.prototype.aniUrls=function(e,t){for(var i=[],o=1;o<=t;o++)o<10?i.push("baolie/"+e+"/burst0"+o+".png"):i.push("baolie/"+e+"/burst"+o+".png");return i},t}(e("../ui/layaMaxUI").ui.PieceUI);i.PieceItemContainer=r},{"../ui/layaMaxUI":6}],13:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){function t(){var t=e.call(this)||this;return t.pieceTheme="game/img_watermelon.png",t.pieceItemArray=[],t.scaleFlag=!0,t}return o(t,e),t.prototype.resetViews=function(){this.initViews(),this.foreachPiecesStates(),this.doCircleRotateEffect()},t.prototype.initViews=function(){this.sprite_bg.visible=!0,this.piece_holder1.visible=!1,this.piece_holder2.visible=!1,this.piece_holder3.visible=!1,this.piece_holder4.visible=!1,this.piece_holder5.visible=!1,this.piece_holder6.visible=!1},t.prototype.foreachPiecesStates=function(){if(this.sprite_bg.scale(.1,.1),null!=this.pieceItemArray&&0!=this.pieceItemArray.length){for(var e=0;e<this.pieceItemArray.length;e++){switch(this.pieceItemArray[e]){case 0:this.piece_holder1.visible=!0,this.img_piece1.skin=this.pieceTheme;break;case 1:this.piece_holder2.visible=!0,this.img_piece2.skin=this.pieceTheme;break;case 2:this.piece_holder3.visible=!0,this.img_piece3.skin=this.pieceTheme;break;case 3:this.piece_holder4.visible=!0,this.img_piece4.skin=this.pieceTheme;break;case 4:this.piece_holder5.visible=!0,this.img_piece5.skin=this.pieceTheme;break;case 5:this.piece_holder6.visible=!0,this.img_piece6.skin=this.pieceTheme}}Laya.Tween.to(this.sprite_bg,{scaleX:1,scaleY:1},100)}},t.prototype.getPieceType=function(){return this.pieceType},t.prototype.setPieceType=function(e){this.pieceType=e},t.prototype.getPieceSkin=function(){return this.pieceTheme},t.prototype.setPieceSkin=function(e){this.pieceTheme=e},t.prototype.getpieceItemArray=function(){return this.pieceItemArray},t.prototype.setpieceItemArray=function(e){this.pieceItemArray=e;for(var t=0,i=e;t<i.length;t++){var o=i[t];console.log("random 生成 新的元素 ："+o)}this.resetViews()},t.prototype.checkCanUpDataItem=function(e){return null==this.pieceItemArray||0==this.pieceItemArray.length||(this.pieceItemArray.every(function(e,t,i){return i.indexOf(e)<0}),!1)},t.prototype.upDataPieceItemArray=function(e){this.pieceItemArray.concat(e),this.foreachPiecesStates()},t.prototype.clearPieceItemArray=function(){this.pieceItemArray=[],this.resetViews()},t.prototype.getPieceItemArraySize=function(){return null!=this.pieceItemArray?this.pieceItemArray.length:0},t.prototype.checkIsFull=function(){return 6==this.getPieceItemArraySize()},t.prototype.doCircleRotateEffect=function(){},t}(e("../ui/layaMaxUI").ui.PieceFactoryUI);i.RandomPieceItemContainer=r},{"../ui/layaMaxUI":6}],14:[function(e,t,i){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var r,a=e("../ui/layaMaxUI"),n=e("./GameMainView"),s=e("./GameOverView");!function(e){e[e.Laya_Ready=0]="Laya_Ready",e[e.Layer_Main=1]="Layer_Main",e[e.Layer_Over=2]="Layer_Over"}(r||(r={}));var c=function(e){function t(){var t=e.call(this)||this;return t.gameOverView=new s.GameOverView,t.gameMainUI=new n.GameMainView,t.openView(t.gameMainUI,r.Layer_Main),t}return o(t,e),t.prototype.init=function(){},t.prototype.openView=function(e,t){switch(t){case r.Layer_Main:this.layer_main.addChild(e),this.gameMainUI.init();break;case r.Laya_Ready:this.layer_ready.addChild(e);case r.Layer_Over:this.layer_over.addChild(e),this.gameOverView.init()}},t.prototype.closeView=function(e,t){switch(e.onDestory(),t){case r.Layer_Main:this.layer_main.destroyChildren();break;case r.Laya_Ready:this.layer_ready.destroyChildren();case r.Layer_Over:this.layer_over.destroyChildren()}},t.prototype.onDestory=function(){console.log("onDestory...")},t}(a.ui.RootViewUI);i.RootView=c},{"../ui/layaMaxUI":6,"./GameMainView":10,"./GameOverView":11}]},{},[2]);