var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),GameView=function(e){function t(){var t=e.call(this)||this;return t.mGameMode=null,t.checkerboard=null,t.mPatternList=[],t.width=Laya.stage.width,t.height=Laya.stage.height,t.Init(),t}return __extends(t,e),t.prototype.Init=function(){this.checkerboard=new Laya.View;var e=[];this.mGameMode=ControllerManage.Instance().mGameController.mGameMode,this.mGameMode.checkerboard=[];for(var t=0;t<this.mGameMode.horizontalCount;t++){for(var a=[],i=0;i<this.mGameMode.verticalCount;i++){var o=new GamePattern;a[i]=o,this.checkerboard.addChild(o),o.Init(t,i),0==t||0==i||t==this.mGameMode.horizontalCount-1||i==this.mGameMode.verticalCount-1?o.SetEmpty():(this.mPatternList.push(o),e.push(o))}this.mGameMode.checkerboard[t]=a}for(this.candySum=e.length;e.length>0;){var n="Icon/"+Common.Random(7)+".png",r=e[Common.Random(e.length-1)];e.splice(e.indexOf(r),1);var s=e[Common.Random(e.length-1)];1==e.length&&(s=e[0]),e.splice(e.indexOf(s),1),r.SetIcon(n),s.SetIcon(n),r.isClear=!0,s.isClear=!0}this.checkerboard.centerX=0,this.checkerboard.centerY=0,this.addChild(this.checkerboard);var c=new Laya.Image,h=new Dialog;c.centerX=0,c.centerY=0,c.skin="Frame/ready.png",Laya.timer.once(900,this,function(){c.scale(2,2),c.skin="Frame/go.png",Laya.Tween.to(c,{scaleX:1,scaleY:1},100)}),this.addChild(h),this.addChild(c),Laya.SoundManager.playSound("sounds/readyGo.mp3",1,Laya.Handler.create(this,this.musicComplete,[c,h])),this.SetScore(0,.01),this.SetScore(1,.01),Laya.timer.once(2e3,this,function(){c.removeSelf(),h.removeSelf()}),MessageProxy.Instance().SendGameReady(),Laya.stage.on(Laya.Event.VISIBILITY_CHANGE,this,function(){Laya.stage.isVisibility?Laya.SoundManager.playMusic("sounds/happyMisic2.mp3",0):Laya.SoundManager.stopMusic()})},t.prototype.musicComplete=function(e,t){e.removeSelf(),t.removeSelf(),Laya.SoundManager.playMusic("sounds/happyMisic2.mp3",0)},t.prototype.SetScore=function(e,t){0==e?(this.clip_pb1.visible=!0,this.clip_pb1.clipWidth=162*t,console.log(this.clip_pb1.clipWidth)):(this.clip_pb2.visible=!0,this.clip_pb2.clipWidth=162*t,console.log(this.clip_pb2.clipWidth))},t}(ui.GameUI.GameUI);